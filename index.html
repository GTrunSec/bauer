<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2019-02-27 Wed 22:02 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>bauer: an Emacs+Nix IDE</title>
<meta name="generator" content="Org mode" />
<meta name="author" content="Matthew Bauer" />
<meta name="description" content="My Emacs configuration"
 />
<meta name="keywords" content="dotfiles config ide emacs nix bauer" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-hledger:before { content: 'hledger'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { width: 90%; }
  /*]]>*/-->
</style>
<link rel="stylesheet" href="https://matthewbauer.us/style.css" /> <meta name="viewport" content="width=device-width, initial-scale=1.0" />
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2018 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="content">
<h1 class="title">bauer: an Emacs+Nix IDE
<br />
<span class="subtitle">Bauer’s Automated Unified Emacs Realm</span>
</h1>
<p>
This ORG-mode file generates an Emacs configuration. I am calling it an
<a href="https://www.gnu.org/s/emacs/">Emacs</a>+<a href="https://nixos.org">Nix</a> IDE. That is, the Emacs configuration is <i>integrated</i> with hardcoded
Nix store paths. This provides a kind of functional Emacs configuration. The
integration between Emacs &amp; Nix comes with lots of useful side effects. The raw
Org file can always be downloaded <a href="https://matthewbauer.us/bauer/README.org">here</a>. You can create pull requests &amp; issues on
<a href="https://github.com/matthewbauer/bauer">the GitHub repo</a>. You can access my website at <a href="https://matthewbauer.us">https://matthewbauer.us</a>.
</p>

<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#usage">Usage</a>
<ul>
<li><a href="#install">Installing/upgrading</a></li>
<li><a href="#develop">Developing</a></li>
<li><a href="#nonix">Without Nix</a></li>
</ul>
</li>
<li><a href="#emacs">Emacs init file</a>
<ul>
<li><a href="#org7b0db3c">Increase GC</a></li>
<li><a href="#org227ae6b">Autoloads &amp; Misc.</a></li>
<li><a href="#org23475a6">Custom config</a></li>
<li><a href="#org1f68397">Setup use-package</a></li>
<li><a href="#org374fa70">Key bindings</a></li>
<li><a href="#orgb43a463">Setup installer</a></li>
<li><a href="#packages">Packages</a></li>
</ul>
</li>
<li><a href="#profiles">Profiles</a>
<ul>
<li><a href="#org08b856b"><code>.profile</code></a></li>
<li><a href="#zshrc"><code>.zshrc</code></a></li>
<li><a href="#orgf4d0b03"><code>etc-profile.sh</code></a></li>
<li><a href="#org768871d"><code>.gitignore</code></a></li>
<li><a href="#org9d38f6b"><code>.gitconfig</code></a></li>
</ul>
</li>
<li><a href="#bootstrap">Bootstrapping</a>
<ul>
<li><a href="#site-paths"><code>site-paths.el.in</code></a></li>
<li><a href="#org105630b"><code>bootstrap.sh</code></a></li>
<li><a href="#runemacs"><code>runemacs.sh</code></a></li>
</ul>
</li>
<li><a href="#build">Building</a>
<ul>
<li><a href="#orgd28b873"><code>default.nix</code>: the tangler</a></li>
<li><a href="#orgc4af751"><code>bauer.nix</code>: the build script</a></li>
<li><a href="#orge44fb55">Invoking it</a></li>
</ul>
</li>
<li><a href="#ci">Continuous integration</a>
<ul>
<li><a href="#travis"><code>.travis.yml</code></a></li>
</ul>
</li>
<li><a href="#extra">Extra</a>
<ul>
<li><a href="#org75b3202"><code>update.sh</code></a></li>
<li><a href="#orgc6b44ef"><code>.gitignore</code></a></li>
<li><a href="#org0ccfafa"><code>.gitattributes</code></a></li>
<li><a href="#org6b97e55"><code>init.el</code></a></li>
<li><a href="#orgd6945cf">NixOS module</a></li>
<li><a href="#org8c04f02">LICENSE</a></li>
</ul>
</li>
</ul>
</div>
</div>

<div id="outline-container-orgad0fcfa" class="outline-2">
<h2 id="usage"><a id="orgad0fcfa"></a>Usage</h2>
<div class="outline-text-2" id="text-usage">
</div>

<div id="outline-container-org4896eb0" class="outline-3">
<h3 id="install"><a id="org4896eb0"></a>Installing/upgrading</h3>
<div class="outline-text-3" id="text-install">
<p>
This is the script that I use to setup all of my new machines but it&rsquo;s portable
enough for anyone to use.
</p>

<p>
To install, just run this command from your shell:
</p>

<div class="org-src-container">
<pre class="src src-shell">curl https://matthewbauer.us/bauer/install | sh
</pre>
</div>

<p>
Once it’s installed, you can open Emacs at any time with this command:
</p>

<div class="org-src-container">
<pre class="src src-shell">$<span style="font-weight: bold; font-style: italic;">HOME</span>/.nix-profile/bin/run
</pre>
</div>

<p>
If you don&rsquo;t like it, it&rsquo;s also very easy to uninstall. Just run:
</p>

<div class="org-src-container">
<pre class="src src-shell">nix-env -e bauer
nix-collect-garbage -d
</pre>
</div>
</div>
</div>

<div id="outline-container-orgcabfc5d" class="outline-3">
<h3 id="develop"><a id="orgcabfc5d"></a>Developing</h3>
<div class="outline-text-3" id="text-develop">
<p>
After you’ve installed it, it’s easy to make changes. By default, the
configuration lives in <code>~/.local/share/bauer</code>. To make changes just follow this
process,
</p>

<div class="org-src-container">
<pre class="src src-shell"><span style="font-weight: bold;">cd</span> ~/.local/share/bauer
nix-build
./result/run README.org
</pre>
</div>

<p>
The last line will spawn an Emacs frame in the Git repo. Anything in that file
can be change. Once you’ve made a change, just run <code>M-x dev-restart</code> to rebuild
the configuration &amp; restart Emacs. Make any changes you want to <a href="./README.html">the README.org
file</a> or any of the files in <a href="./site-lisp">the site-lisp folder</a>. Make sure you commit your
changes afterward by typing <code>C-c p v</code>, then <code>c-ac</code>. If you have already forked
<a href="https://github.com/matthewbauer/bauer">this repo on GitHub</a>, you can add it as a remote by typing <code>Mg</code> followed by your
GitHub username within Magit. To push to it, just type <code>Pr</code> then find your
username in the list &amp; press enter. Pull requests are always welcome through
GitHub!
</p>
</div>
</div>

<div id="outline-container-org6d1d7ef" class="outline-3">
<h3 id="nonix"><a id="org6d1d7ef"></a>Without Nix</h3>
<div class="outline-text-3" id="text-nonix">
<p>
You can also use this configuration without Nix. This just gives you the Emacs
configuration without any of the Nix integrations. All of the binaries will have
to be provided externally. To get started, run the following:
</p>

<div class="org-src-container">
<pre class="src src-shell">mv ~/.emacs.d ~/.emacs.d.old
git clone https://github.com/matthewbauer/bauer <span style="font-style: italic;">\</span>
          ~/.emacs.d
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgf1e4e23" class="outline-2">
<h2 id="emacs"><a id="orgf1e4e23"></a>Emacs init file</h2>
<div class="outline-text-2" id="text-emacs">
<p>
This is the main part of the IDE. It is written in Emacs lisp &amp; will be loaded
every time Emacs is started.
</p>
</div>

<div id="outline-container-org7b0db3c" class="outline-3">
<h3 id="org7b0db3c">Increase GC</h3>
<div class="outline-text-3" id="text-org7b0db3c">
<p>
Increasing GC is a common way to speed up Emacs. <code>gc-cons-threshold</code> sets at
what point Emacs should invoke its garbage collector Some people set it to a
really larger number permanently. This works well until the garbage is actually
collected (then you have to wait a long time). I’ve decided to just set it
temporarily to a large number so we only garbage collect once on startup. After
that we reset it to the standard value. Read <a href="http://bling.github.io/blog/2016/01/18/why-are-you-changing-gc-cons-threshold/">@bling’s post</a> for more info on
this.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">-*- mode: emacs-lisp; coding: utf-8; -*-</span>

(<span style="font-weight: bold;">defvar</span> <span style="font-weight: bold; font-style: italic;">file-name-handler-alist-backup</span>
        file-name-handler-alist)
(<span style="font-weight: bold;">setq</span> gc-cons-threshold
        most-positive-fixnum
      file-name-handler-alist nil)
(add-hook 'after-init-hook
  (<span style="font-weight: bold;">lambda</span> ()
    (garbage-collect)
    (<span style="font-weight: bold;">setq</span> gc-cons-threshold
            (car (get 'gc-cons-threshold 'standard-value))
      file-name-handler-alist
        (append
          file-name-handler-alist-backup
          file-name-handler-alist))))
</pre>
</div>
</div>
</div>

<div id="outline-container-org227ae6b" class="outline-3">
<h3 id="org227ae6b">Autoloads &amp; Misc.</h3>
<div class="outline-text-3" id="text-org227ae6b">
<p>
Setup some initial aliases for Emacs. These give us an easy way to use these
functions without actually require&rsquo;ing them. Ideally, Emacs should pick these up
through the automatic autoloading method, but that sometimes conflicts with the
compiling phases used later.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">eval-and-compile</span>
  (autoload 'package-installed-p <span style="font-style: italic;">"package"</span>)
  (autoload 'use-package-autoload-keymap <span style="font-style: italic;">"use-package"</span>)
  (autoload 'pcomplete-arg   <span style="font-style: italic;">"pcomplete"</span>)
  (autoload 'pcomplete--here <span style="font-style: italic;">"pcomplete"</span>)
  (autoload 'tramp-tramp-file-p <span style="font-style: italic;">"tramp"</span>)
  (autoload 'tramp-dissect-file-name <span style="font-style: italic;">"tramp"</span>)

  (<span style="font-weight: bold;">defvar</span> <span style="font-weight: bold; font-style: italic;">view-mode-map</span>)
  (<span style="font-weight: bold;">defvar</span> <span style="font-weight: bold; font-style: italic;">iso-transl-ctl-x-8-map</span>)
  (<span style="font-weight: bold;">defvar</span> <span style="font-weight: bold; font-style: italic;">dired-mode-map</span>))
</pre>
</div>

<p>
Now we are going to setup some basic Emacs GUI elements. Under normal
circumstances, we want GUI elements hidden from the user so that we only see the
text buffer. This gives us a minimalist look that works well with the theme. We
will end up disabling <code>tool-bar-mode</code>, <code>scroll-bar-mode</code>, <code>blink-cursor-mode</code>,
&amp; <code>menu-bar-mode</code> here. The one exception to this is when we are running macOS
where the system provides a builtin menubar system that Emacs can use.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="font-weight: bold; font-style: italic;">;;</span><span style="font-weight: bold; font-style: italic;">(when window-system</span>
<span style="font-weight: bold; font-style: italic;">;;  </span><span style="font-weight: bold; font-style: italic;">(tool-bar-mode -1)</span>
<span style="font-weight: bold; font-style: italic;">;;  </span><span style="font-weight: bold; font-style: italic;">(scroll-bar-mode -1)</span>
<span style="font-weight: bold; font-style: italic;">;;  </span><span style="font-weight: bold; font-style: italic;">(blink-cursor-mode -1))</span>

<span style="font-weight: bold; font-style: italic;">;;</span><span style="font-weight: bold; font-style: italic;">(when (not (memq window-system '(mac ns)))</span>
<span style="font-weight: bold; font-style: italic;">;;  </span><span style="font-weight: bold; font-style: italic;">(menu-bar-mode -1))</span>
</pre>
</div>

<p>
When we are within a terminal we want to be able to use the mouse, so
<code>xterm-mouse-mode</code> is enabled here.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">when</span> (not window-system)
  (xterm-mouse-mode 1))
</pre>
</div>
</div>
</div>

<div id="outline-container-org23475a6" class="outline-3">
<h3 id="org23475a6">Custom config</h3>
<div class="outline-text-3" id="text-org23475a6">
<p>
<a href="./lisp/set-defaults.el">set-defaults</a> provides an easy way to override the default custom files. This
means that when you customize a variable it will appear as ‘standard’ even
though it’s not what the package originally defined as the default. This is
useful for an Emacs distribution to provide <i>better defaults</i> while still
letting the user override them. Look through the lispdoc of the package for
documentation on how this works. Eventually, this will be added to MELPA for use
in other Emacs distributions.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">require</span> '<span style="font-weight: bold; text-decoration: underline;">set-defaults</span>)
</pre>
</div>
</div>

<div id="outline-container-orge0e4fae" class="outline-4">
<h4 id="orge0e4fae">Better defaults</h4>
<div class="outline-text-4" id="text-orge0e4fae">
<p>
These are some <b>better</b> defaults for Emacs. They shouldn’t require any packages
to be installed to work (those go in use-package). In addition, they should take
almost no time to run (meaning they probably shouldn’t have custom init hooks).
The format of arguments to <code>set-defaults</code> is identical to the one used by
<code>custom-set-variables</code>.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(set-defaults
 '(TeX-auto-save t)
 '(TeX-auto-untabify t)
 '(TeX-electric-escape t)
 '(TeX-parse-self t)
 '(ad-redefinition-action 'accept)
 '(apropos-do-all t)
 '(async-shell-command-buffer 'new-buffer)
 '(auth-source-save-behavior t)
 '(auto-revert-check-vc-info t)
 '(auto-revert-verbose nil)
 '(auto-save-visited-file-name t)
 '(ange-ftp-default-user t)
 '(auto-window-vscroll nil)
 '(bug-reference-bug-regexp
   <span style="font-style: italic;">"</span><span style="font-weight: bold; font-style: italic;">\\</span><span style="font-weight: bold; font-style: italic;">(</span><span style="font-weight: bold; font-style: italic;">\\</span><span style="font-weight: bold; font-style: italic;">(?:</span><span style="font-style: italic;">[Ii]ssue </span><span style="font-weight: bold; font-style: italic;">\\</span><span style="font-weight: bold; font-style: italic;">|</span><span style="font-style: italic;">[Ff]ixe[ds] </span><span style="font-weight: bold; font-style: italic;">\\</span><span style="font-weight: bold; font-style: italic;">|</span><span style="font-style: italic;">[Rr]esolve[ds]? </span><span style="font-weight: bold; font-style: italic;">\\</span><span style="font-weight: bold; font-style: italic;">|</span><span style="font-style: italic;">[Cc]lose[ds]?</span><span style="font-weight: bold; font-style: italic;">\\</span><span style="font-weight: bold; font-style: italic;">|</span><span style="font-style: italic;">[Pp]</span><span style="font-weight: bold; font-style: italic;">\\</span><span style="font-weight: bold; font-style: italic;">(?:</span><span style="font-style: italic;">ull [Rr]equest</span><span style="font-weight: bold; font-style: italic;">\\</span><span style="font-weight: bold; font-style: italic;">|</span><span style="font-style: italic;">[Rr]</span><span style="font-weight: bold; font-style: italic;">\\</span><span style="font-weight: bold; font-style: italic;">)</span><span style="font-style: italic;"> </span><span style="font-weight: bold; font-style: italic;">\\</span><span style="font-weight: bold; font-style: italic;">|</span><span style="font-style: italic;">(</span><span style="font-weight: bold; font-style: italic;">\\</span><span style="font-weight: bold; font-style: italic;">)</span><span style="font-style: italic;">#</span><span style="font-weight: bold; font-style: italic;">\\</span><span style="font-weight: bold; font-style: italic;">(</span><span style="font-style: italic;">[0-9]+</span><span style="font-weight: bold; font-style: italic;">\\</span><span style="font-weight: bold; font-style: italic;">)</span><span style="font-style: italic;">)?</span><span style="font-weight: bold; font-style: italic;">\\</span><span style="font-weight: bold; font-style: italic;">)</span><span style="font-style: italic;">"</span>)
 '(flycheck-emacs-lisp-load-path (<span style="font-weight: bold;">quote</span> inherit))
 '(backward-delete-char-untabify-method 'hungry)
 '(backup-directory-alist `((<span style="font-style: italic;">"."</span> .
                             ,(expand-file-name <span style="font-style: italic;">"backup"</span>
                                                user-emacs-directory))))
 '(checkdoc-spellcheck-documentation-flag t)
 '(company-auto-complete (<span style="font-weight: bold;">lambda</span> ()
                           (<span style="font-weight: bold;">and</span> (company-tooltip-visible-p)
                                (company-explicit-action-p))))
 '(company-continue-commands
   '(not save-buffer
         save-some-buffers
         save-buffers-kill-terminal
         save-buffers-kill-emacs
         comint-previous-matching-input-from-input
         comint-next-matching-input-from-input))
 '(company-require-match nil)
 '(company-selection-wrap-around t)
 '(company-backends '(company-elisp
                      company-css
                      company-cmake
                      company-nxml
                      (company-capf
                       company-files
                       company-keywords
                       company-dabbrev-code)
                      company-dabbrev))
 '(comint-input-ignoredups t)
 '(comint-process-echoes t)
 '(comint-prompt-read-only t)
 '(comint-scroll-show-maximum-output nil)
 '(compilation-always-kill t)
 '(compilation-ask-about-save nil)
 '(compilation-environment '(<span style="font-style: italic;">"TERM=xterm-256color"</span>))
 '(compilation-skip-threshold 2)
 '(completion-styles '(basic
                       partial-completion
                       emacs22
                       substring))
 '(completions-cycle-threshold t)
 '(completions-format 'vertical)
 '(counsel-find-file-at-point t)
 '(counsel-mode-override-describe-bindings t)
 '(create-lockfiles nil)
 '(cursor-in-non-selected-windows nil)
 '(custom-buffer-done-kill t)
 '(custom-file (expand-file-name
                <span style="font-style: italic;">"settings.el"</span>
                user-emacs-directory))
 '(custom-safe-themes t)
 '(custom-search-field nil)
 '(dante-tap-type-time 2)
 '(delete-by-moving-to-trash t)
 '(delete-old-versions t)
 <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">'(dired-auto-revert-buffer t)</span>
 '(dired-dwim-target t)
 '(dired-hide-details-hide-symlink-targets nil)
 '(dired-listing-switches <span style="font-style: italic;">"-alhv"</span>)
 '(dired-omit-files <span style="font-style: italic;">"^\\.</span><span style="font-weight: bold; font-style: italic;">\\</span><span style="font-weight: bold; font-style: italic;">|</span><span style="font-style: italic;">^#.*#$"</span>)
 '(dired-omit-verbose nil)
 '(dired-recursive-copies 'always)
 '(dired-recursive-deletes 'always)
 '(dired-subtree-line-prefix <span style="font-style: italic;">" "</span>)
 '(disabled-command-function nil)
 '(display-buffer-reuse-frames t)
 '(dtrt-indent-verbosity 0)
 '(echo-keystrokes 0)
 '(enable-recursive-minibuffers t)
 '(erc-autojoin-timing 'ident)
 '(erc-interpret-mirc-color t)
 '(erc-join-buffer 'bury)
 '(erc-kill-buffer-on-part t)
 '(erc-kill-queries-on-quit t)
 '(erc-kill-server-buffer-on-quit t)
 '(erc-log-write-after-send t)
 '(erc-prompt (<span style="font-weight: bold;">lambda</span> nil (concat <span style="font-style: italic;">"["</span> (buffer-name) <span style="font-style: italic;">"]"</span>)))
 '(erc-prompt-for-password nil)
 '(erc-query-display 'buffer)
 '(erc-rename-buffers t)
 '(erc-track-exclude-server-buffer t)
 '(erc-track-exclude-types '(<span style="font-style: italic;">"JOIN"</span> <span style="font-style: italic;">"NICK"</span> <span style="font-style: italic;">"PART"</span>
                             <span style="font-style: italic;">"QUIT"</span> <span style="font-style: italic;">"MODE"</span> <span style="font-style: italic;">"333"</span> <span style="font-style: italic;">"353"</span>))
 '(erc-track-remove-disconnected-buffers t)
 '(erc-track-position-in-mode-line t)
 '(erc-timestamp-format <span style="font-style: italic;">"%H:%M "</span>)
 '(erc-timestamp-only-if-changed-flag nil)
 '(erc-try-new-nick-p nil)
 '(erc-user-full-name 'user-full-name)
 '(eshell-history-size 1000)
 '(eshell-output-filter-functions '(eshell-handle-ansi-color
                                    eshell-watch-for-password-prompt
                                    eshell-truncate-buffer))
 '(eshell-scroll-show-maximum-output nil)
 '(eshell-visual-commands
   '(<span style="font-style: italic;">"vi"</span> <span style="font-style: italic;">"screen"</span> <span style="font-style: italic;">"top"</span> <span style="font-style: italic;">"less"</span> <span style="font-style: italic;">"more"</span> <span style="font-style: italic;">"lynx"</span> <span style="font-style: italic;">"ncftp"</span> <span style="font-style: italic;">"pine"</span> <span style="font-style: italic;">"tin"</span>
     <span style="font-style: italic;">"trn"</span> <span style="font-style: italic;">"elm"</span> <span style="font-style: italic;">"ssh"</span> <span style="font-style: italic;">"mutt"</span> <span style="font-style: italic;">"tmux"</span> <span style="font-style: italic;">"htop"</span> <span style="font-style: italic;">"fish"</span>
     <span style="font-style: italic;">"alsamixer"</span> <span style="font-style: italic;">"watch"</span> <span style="font-style: italic;">"elinks"</span> <span style="font-style: italic;">"links"</span> <span style="font-style: italic;">"nethack"</span> <span style="font-style: italic;">"vim"</span> <span style="font-style: italic;">"zsh"</span>))
 '(eshell-visual-options nil)
 '(eshell-visual-subcommands '((<span style="font-style: italic;">"nix"</span> <span style="font-style: italic;">"build"</span> <span style="font-style: italic;">"repl"</span>) (<span style="font-style: italic;">"vagrant"</span> <span style="font-style: italic;">"ssh"</span>)))
 '(eshell-banner-message <span style="font-style: italic;">""</span>)
 '(eshell-cmpl-autolist t)
 '(eshell-cmpl-cycle-completions nil)
 '(eshell-cmpl-cycle-cutoff-length 2)
 '(eshell-cmpl-ignore-case t)
 '(eshell-cp-overwrite-files nil)
 '(eshell-default-target-is-dot t)
 '(eshell-destroy-buffer-when-process-dies t)
 '(eshell-hist-ignoredups t)
 '(eshell-list-files-after-cd t)
 '(eshell-ls-dired-initial-args '(<span style="font-style: italic;">"-h"</span>))
 '(eshell-ls-initial-args <span style="font-style: italic;">"-h"</span>)
 '(eshell-review-quick-commands t)
 '(eshell-prompt-function
   (<span style="font-weight: bold;">lambda</span> ()
     (concat (<span style="font-weight: bold;">when</span> (tramp-tramp-file-p default-directory)
               (concat
                (tramp-file-name-user
                 (tramp-dissect-file-name default-directory))
                <span style="font-style: italic;">"@"</span>
                (tramp-file-name-host
                 (tramp-dissect-file-name default-directory))
                <span style="font-style: italic;">" "</span>))
             (<span style="font-weight: bold;">let</span> ((dir (eshell/pwd)))
               (<span style="font-weight: bold;">if</span> (string= dir (getenv <span style="font-style: italic;">"HOME"</span>)) <span style="font-style: italic;">"~"</span>
                 (<span style="font-weight: bold;">let</span> ((dirname (file-name-nondirectory dir)))
                   (<span style="font-weight: bold;">if</span> (string= dirname <span style="font-style: italic;">""</span>) <span style="font-style: italic;">"/"</span> dirname))))
             (<span style="font-weight: bold;">if</span> (= (user-uid) 0) <span style="font-style: italic;">" # "</span> <span style="font-style: italic;">" $ "</span>))))
 '(eshell-save-history-on-exit t)
 '(eshell-stringify nil)
 '(eshell-term-name <span style="font-style: italic;">"ansi"</span>)
 '(eshell-visual-commands '(<span style="font-style: italic;">"vi"</span> <span style="font-style: italic;">"top"</span> <span style="font-style: italic;">"screen"</span> <span style="font-style: italic;">"less"</span>
                            <span style="font-style: italic;">"rlogin"</span> <span style="font-style: italic;">"telnet"</span> <span style="font-style: italic;">"lynx"</span>))
 '(eshell-history-size 50000)
 '(eval-expression-print-level nil)
 '(expand-region-contract-fast-key <span style="font-style: italic;">"j"</span>)
 '(explicit-shell-args
   '(<span style="font-style: italic;">"-c"</span> <span style="font-style: italic;">"export EMACS= INSIDE_EMACS=; stty echo; shell"</span>))
 '(find-ls-option '(<span style="font-style: italic;">"-print0 | xargs -P4 -0 ls -ldN"</span> . <span style="font-style: italic;">"-ldN"</span>))
 '(find-ls-subdir-switches <span style="font-style: italic;">"-ldN"</span>)
 '(flycheck-display-errors-function
   'flycheck-display-error-messages-unless-error-list)
 '(flycheck-global-modes '(not erc-mode
                               message-mode
                               git-commit-mode
                               view-mode
                               outline-mode
                               text-mode
                               org-mode))
 '(flycheck-standard-error-navigation nil)
 '(flycheck-check-syntax-automatically '(save mode-enabled))
 '(flyspell-highlight-properties nil)
 '(flyspell-issue-welcome-flag nil)
 '(flymake-no-changes-timeout nil)
 '(flymake-start-syntax-check-on-newline nil)
 '(frame-title-format
   '(<span style="font-weight: bold;">:eval</span>
     (<span style="font-weight: bold;">if</span> (buffer-file-name)
         (abbreviate-file-name (buffer-file-name))
       <span style="font-style: italic;">"%b"</span>)))
 '(gnuplot-inline-image-mode 'dedicated)
 '(haskell-interactive-mode-scroll-to-bottom t)
 '(haskell-process-type 'ghci)
 '(haskell-process-load-or-reload-prompt t)
 '(haskell-process-suggest-haskell-docs-imports t)
 '(haskell-process-suggest-hoogle-imports t)
 '(haskell-process-suggest-remove-import-lines t)
 '(help-window-select t)
 '(hideshowvis-ignore-same-line nil)
 '(highlight-nonselected-windows nil)
 '(history-delete-duplicates t)
 '(ibuffer-default-display-maybe-show-predicates t)
 '(ibuffer-expert t)
 '(ibuffer-formats
   '((mark modified read-only <span style="font-style: italic;">" "</span> (name 16 -1) <span style="font-style: italic;">" "</span>
           (size 6 -1 <span style="font-weight: bold;">:right</span>) <span style="font-style: italic;">" "</span> (mode 16 16) <span style="font-style: italic;">" "</span> filename)
     (mark <span style="font-style: italic;">" "</span> (name 16 -1) <span style="font-style: italic;">" "</span> filename)))
 '(ibuffer-maybe-show-regexps nil)
 '(ibuffer-show-empty-filter-groups nil)
 '(ibuffer-shrink-to-minimum-size t)
 '(ibuffer-use-other-window t)
 '(iedit-toggle-key-default nil)
 '(imenu-auto-rescan t)
 '(indicate-empty-lines t)
 '(inhibit-startup-echo-area-message t)
 '(inhibit-startup-screen t)
 '(initial-scratch-message <span style="font-style: italic;">""</span>)
 '(initial-major-mode 'fundamental-mode)
 '(ispell-extra-args '(<span style="font-style: italic;">"--sug-mode=ultra"</span>))
 '(ispell-quietly t)
 '(ispell-silently-savep t)
 '(jit-lock-defer-time 0.25)
 '(js2-mode-show-parse-errors nil)
 '(js2-mode-show-strict-warnings nil)
 '(js2-strict-missing-semi-warning nil)
 '(kill-do-not-save-duplicates t)
 '(kill-whole-line t)
 '(load-prefer-newer t)
 '(mac-allow-anti-aliasing t)
 '(mac-command-key-is-meta t)
 '(mac-command-modifier 'meta)
 '(mac-option-key-is-meta nil)
 '(mac-option-modifier 'super)
 '(mac-right-option-modifier nil)
 '(magit-remote-add-set-remote\.pushDefault t)
 '(magit-clone-set-remote\.pushDefault t)
 '(magit-ediff-dwim-show-on-hunks t)
 '(magit-highlight-trailing-whitespace nil)
 '(magit-highlight-whitespace nil)
 '(magit-log-auto-more t)
 '(magit-no-confirm t)
 '(magit-process-find-password-functions
   '(magit-process-password-auth-source))
 '(magit-process-popup-time 15)
 '(magit-save-repository-buffers 'dontask)
 '(magit-stage-all-confirm nil)
 '(magit-unstage-all-confirm nil)
 '(magit-blame-disable-modes '(fci-mode view-mode yascroll-bar-mode))
 '(mode-line-default-help-echo nil)
 '(mmm-global-mode 'buffers-with-submode-classes)
 '(mmm-submode-decoration-level 2)
 '(minibuffer-prompt-properties
   '(read-only t
               cursor-intangible t
               face minibuffer-prompt))
 '(next-error-recenter t)
 '(notmuch-show-logo nil)
 '(nrepl-log-messages t)
 '(ns-function-modifier 'hyper)
 '(ns-pop-up-frames nil)
 '(nsm-save-host-names t)
 '(nxml-sexp-element-flag t)
 '(nxml-slash-auto-complete-flag t)
 '(org-confirm-babel-evaluate nil)
 '(org-export-with-toc nil)
 '(org-html-htmlize-output-type 'css)
 '(org-latex-listings-langs
   (<span style="font-weight: bold;">quote</span>
    ((emacs-lisp <span style="font-style: italic;">"Lisp"</span>)
     (lisp <span style="font-style: italic;">"Lisp"</span>)
     (clojure <span style="font-style: italic;">"Lisp"</span>)
     (c <span style="font-style: italic;">"C"</span>)
     (cc <span style="font-style: italic;">"C++"</span>)
     (fortran <span style="font-style: italic;">"fortran"</span>)
     (perl <span style="font-style: italic;">"Perl"</span>)
     (cperl <span style="font-style: italic;">"Perl"</span>)
     (python <span style="font-style: italic;">"Python"</span>)
     (ruby <span style="font-style: italic;">"Ruby"</span>)
     (html <span style="font-style: italic;">"HTML"</span>)
     (xml <span style="font-style: italic;">"XML"</span>)
     (tex <span style="font-style: italic;">"TeX"</span>)
     (latex <span style="font-style: italic;">"[LaTeX]TeX"</span>)
     (shell-script <span style="font-style: italic;">"bash"</span>)
     (gnuplot <span style="font-style: italic;">"Gnuplot"</span>)
     (ocaml <span style="font-style: italic;">"Caml"</span>)
     (caml <span style="font-style: italic;">"Caml"</span>)
     (sql <span style="font-style: italic;">"SQL"</span>)
     (sqlite <span style="font-style: italic;">"sql"</span>)
     (makefile <span style="font-style: italic;">"make"</span>)
     (R <span style="font-style: italic;">"r"</span>)
     (nix <span style="font-style: italic;">"{}"</span>)
     (nil <span style="font-style: italic;">"{}"</span>)
     (yaml <span style="font-style: italic;">"{}"</span>)
     (gitattributes <span style="font-style: italic;">"{}"</span>)
     (gitignore <span style="font-style: italic;">"{}"</span>)
     (shell <span style="font-style: italic;">"{}"</span>)
     (gitconfig <span style="font-style: italic;">"{}"</span>))))
 '(org-latex-default-packages-alist
   (<span style="font-weight: bold;">quote</span>
   ((<span style="font-style: italic;">"utf8"</span> <span style="font-style: italic;">"inputenc"</span> t
      (<span style="font-style: italic;">"pdflatex"</span>))
     (<span style="font-style: italic;">"T1"</span> <span style="font-style: italic;">"fontenc"</span> t
      (<span style="font-style: italic;">"pdflatex"</span>))
     (<span style="font-style: italic;">""</span> <span style="font-style: italic;">"graphicx"</span> t nil)
     (<span style="font-style: italic;">""</span> <span style="font-style: italic;">"grffile"</span> t nil)
     (<span style="font-style: italic;">""</span> <span style="font-style: italic;">"longtable"</span> nil nil)
     (<span style="font-style: italic;">""</span> <span style="font-style: italic;">"wrapfig"</span> nil nil)
     (<span style="font-style: italic;">""</span> <span style="font-style: italic;">"rotating"</span> nil nil)
     (<span style="font-style: italic;">"normalem"</span> <span style="font-style: italic;">"ulem"</span> t nil)
     (<span style="font-style: italic;">""</span> <span style="font-style: italic;">"amsmath"</span> t nil)
     (<span style="font-style: italic;">""</span> <span style="font-style: italic;">"textcomp"</span> t nil)
     (<span style="font-style: italic;">""</span> <span style="font-style: italic;">"amssymb"</span> t nil)
     (<span style="font-style: italic;">""</span> <span style="font-style: italic;">"capt-of"</span> nil nil)
     (<span style="font-style: italic;">""</span> <span style="font-style: italic;">"hyperref"</span> nil nil)
     (<span style="font-style: italic;">""</span> <span style="font-style: italic;">"parskip"</span> nil nil)
     (<span style="font-style: italic;">""</span> <span style="font-style: italic;">"alltt"</span> nil nil)
     (<span style="font-style: italic;">""</span> <span style="font-style: italic;">"upquote"</span> nil nil)
     (<span style="font-style: italic;">""</span> <span style="font-style: italic;">"listings"</span> nil nil))))
 '(org-log-done 'time)
 '(org-special-ctrl-a/e t)
 '(org-support-shift-select t)
 '(package-archives
   '((<span style="font-style: italic;">"melpa"</span> . <span style="font-style: italic;">"https://melpa.org/packages/"</span>)
     (<span style="font-style: italic;">"org"</span> . <span style="font-style: italic;">"http://orgmode.org/elpa/"</span>)
     (<span style="font-style: italic;">"gnu"</span> . <span style="font-style: italic;">"https://elpa.gnu.org/packages/"</span>)))
 '(pcomplete-compare-entries-function 'file-newer-than-file-p)
 '(projectile-globally-ignored-files '(<span style="font-style: italic;">".DS_Store"</span> <span style="font-style: italic;">"TAGS"</span>))
 '(projectile-ignored-project-function 'file-remote-p)
 <span style="font-weight: bold; font-style: italic;">;;   </span><span style="font-weight: bold; font-style: italic;">'(projectile-enable-idle-timer 1)</span>
 '(projectile-mode-line
   '(<span style="font-weight: bold;">:eval</span>
     (<span style="font-weight: bold;">if</span> (<span style="font-weight: bold;">and</span> (<span style="font-weight: bold;">ignore-errors</span> (projectile-project-p))
              (not (file-remote-p default-directory)))
         (format <span style="font-style: italic;">" Projectile[%s]"</span>
                 (projectile-project-name))
       <span style="font-style: italic;">""</span>)))
 '(projectile-switch-project-action 'projectile-dired)
 '(projectile-require-project-root t)
 '(projectile-verbose nil)
 '(proof-auto-action-when-deactivating-scripting 'retract)
 '(proof-autosend-enable nil)
 '(proof-electric-terminator-enable t)
 '(proof-fast-process-buffer nil)
 '(proof-script-fly-past-comments t)
 '(proof-shell-fiddle-frames nil)
 '(proof-splash-enable nil)
 '(proof-sticky-errors t)
 '(proof-tidy-response t)
 '(reb-re-syntax 'string)
 '(resize-mini-windows t)
 '(ring-bell-function 'ignore)
 '(ruby-insert-encoding-magic-comment nil)
 '(save-abbrevs 'silently)
 '(save-interprogram-paste-before-kill t)
 '(savehist-additional-variables '(search-ring
                                   regexp-search-ring
                                   kill-ring
                                   comint-input-ring
                                   kmacro-ring
                                   sr-history-registry
                                   file-name-history
                                   tablist-name-filter))
 '(savehist-ignored-variables
   '(load-history flyspell-auto-correct-ring kill-ring))
 '(savehist-save-minibuffer-history t)
 '(scroll-preserve-screen-position 'always)
 '(scroll-conservatively 101)
 '(sentence-end-double-space nil)
 '(set-mark-command-repeat-pop t)
 '(shell-completion-execonly nil)
 '(shell-input-autoexpand nil)
 '(sh-learn-basic-offset t)
 <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">'(show-paren-delay 0)</span>
 '(sp-autoskip-closing-pair 'always)
 '(sp-highlight-pair-overlay nil)
 '(switch-to-buffer-preserve-window-point t)
 '(tab-always-indent 'complete)
 '(term-input-autoexpand t)
 '(term-input-ignoredups t)
 '(term-input-ring-file-name t)
 '(text-quoting-style 'quote)
 '(tramp-default-proxies-alist
   '(((regexp-quote (system-name)) nil nil)
     (nil <span style="font-style: italic;">"\\`</span><span style="font-weight: bold; font-style: italic; text-decoration: underline;">root\\</span><span style="font-style: italic;">'"</span> <span style="font-style: italic;">"/ssh:%h:"</span>)
     (<span style="font-style: italic;">".*"</span> <span style="font-style: italic;">"\\`</span><span style="font-weight: bold; font-style: italic; text-decoration: underline;">root\\</span><span style="font-style: italic;">'"</span> <span style="font-style: italic;">"/ssh:%h:"</span>)))
 '(tls-checktrust t)
 '(uniquify-buffer-name-style 'forward)
 '(uniquify-ignore-buffers-re <span style="font-style: italic;">"^\\*"</span>)
 '(uniquify-separator <span style="font-style: italic;">"/"</span>)
 '(use-dialog-box nil)
 '(use-file-dialog nil)
 '(use-package-always-defer t)
 '(version-control t)
 '(vc-allow-async-revert t)
 '(vc-command-messages t)
 '(vc-git-diff-switches '(<span style="font-style: italic;">"-w"</span> <span style="font-style: italic;">"-U3"</span>))
 '(vc-follow-symlinks nil)
 '(vc-ignore-dir-regexp
   (concat <span style="font-style: italic;">"</span><span style="font-weight: bold; font-style: italic;">\\</span><span style="font-weight: bold; font-style: italic;">(</span><span style="font-weight: bold; font-style: italic;">\\</span><span style="font-weight: bold; font-style: italic;">(</span><span style="font-style: italic;">\\`"</span>
           <span style="font-style: italic;">"</span><span style="font-weight: bold; font-style: italic;">\\</span><span style="font-weight: bold; font-style: italic;">(?:</span><span style="font-style: italic;">[\\/][\\/][</span><span style="font-style: italic;">^</span><span style="font-style: italic;">\\/]+[\\/]</span><span style="font-weight: bold; font-style: italic;">\\</span><span style="font-weight: bold; font-style: italic;">|</span><span style="font-style: italic;">/"</span>
           <span style="font-style: italic;">"</span><span style="font-weight: bold; font-style: italic;">\\</span><span style="font-weight: bold; font-style: italic;">(?:</span><span style="font-style: italic;">net</span><span style="font-weight: bold; font-style: italic;">\\</span><span style="font-weight: bold; font-style: italic;">|</span><span style="font-style: italic;">afs</span><span style="font-weight: bold; font-style: italic;">\\</span><span style="font-weight: bold; font-style: italic;">|</span><span style="font-style: italic;">\\.\\.\\.</span><span style="font-weight: bold; font-style: italic;">\\</span><span style="font-weight: bold; font-style: italic;">)</span><span style="font-style: italic;">/</span><span style="font-weight: bold; font-style: italic;">\\</span><span style="font-weight: bold; font-style: italic;">)</span><span style="font-style: italic;">"</span>
           <span style="font-style: italic;">"\\'</span><span style="font-weight: bold; font-style: italic;">\\</span><span style="font-weight: bold; font-style: italic;">)</span><span style="font-weight: bold; font-style: italic;">\\</span><span style="font-weight: bold; font-style: italic;">|</span><span style="font-weight: bold; font-style: italic;">\\</span><span style="font-weight: bold; font-style: italic;">(</span><span style="font-style: italic;">\\`/[</span><span style="font-style: italic;">^</span><span style="font-style: italic;">/|:][</span><span style="font-style: italic;">^</span><span style="font-style: italic;">/|]*:</span><span style="font-weight: bold; font-style: italic;">\\</span><span style="font-weight: bold; font-style: italic;">)</span><span style="font-weight: bold; font-style: italic;">\\</span><span style="font-weight: bold; font-style: italic;">)</span><span style="font-weight: bold; font-style: italic;">\\</span><span style="font-weight: bold; font-style: italic;">|</span><span style="font-style: italic;">\\"</span>
           <span style="font-style: italic;">"(\\`/[</span><span style="font-style: italic;">^</span><span style="font-style: italic;">/|:][</span><span style="font-style: italic;">^</span><span style="font-style: italic;">/|]*:</span><span style="font-weight: bold; font-style: italic;">\\</span><span style="font-weight: bold; font-style: italic;">)</span><span style="font-style: italic;">"</span>))
 '(vc-make-backup-files t)
 '(view-read-only t)
 '(view-inhibit-help-message t)
 '(woman-imenu t)
 '(x-stretch-cursor t)
 '(which-key-lighter <span style="font-style: italic;">""</span>)
 '(whitespace-action '(cleanup auto-cleanup))
 '(whitespace-style '(face trailing lines space-before-tab
                           empty lines-style))
 '(fortune-always-compile nil)
 )
</pre>
</div>
</div>
</div>

<div id="outline-container-orga7f5710" class="outline-4">
<h4 id="orga7f5710">Site paths</h4>
<div class="outline-text-4" id="text-orga7f5710">
<p>
Now, pull in generated paths from <code>site-paths.el</code>. Nix will generate this file
automatically for us &amp; different Emacs variables will be set to their Nix
store derivation paths. Everything should work fine if you don’t have this
available, though. If you are in Emacs &amp; already have the IDE installed you
can inspect this file by typing <code>C-h C-l site-paths</code>. It will look similar to a
<code>settings.el</code> file where each line corresponds to a customizable variable.
Unlike <code>settings.el</code>, each entry is path in the Nix store &amp; we verify it
exists before setting it.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(load <span style="font-style: italic;">"site-paths"</span> t)
</pre>
</div>
</div>
</div>

<div id="outline-container-org48d6307" class="outline-4">
<h4 id="org48d6307">Set environment</h4>
<div class="outline-text-4" id="text-org48d6307">
<p>
<code>set-envs</code> is provided by <a href="./lisp/set-defaults.el">set-defaults</a>. We can use it like
<code>custom-set-variables</code>, just it calls <code>setenv</code> instead of <code>setq</code>. All of
these entries correspond to environment variables that we want to always be
set in the Emacs process.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(set-envs
 '(<span style="font-style: italic;">"EDITOR"</span> <span style="font-style: italic;">"emacsclient"</span>)
 '(<span style="font-style: italic;">"LANG"</span> <span style="font-style: italic;">"en_US.UTF-8"</span>)
 '(<span style="font-style: italic;">"LC_ALL"</span> <span style="font-style: italic;">"en_US.UTF-8"</span>)
 '(<span style="font-style: italic;">"NODE_NO_READLINE"</span> <span style="font-style: italic;">"1"</span>)
 '(<span style="font-style: italic;">"PAGER"</span> <span style="font-style: italic;">"cat"</span>)
 '(<span style="font-style: italic;">"PS1"</span> <span style="font-style: italic;">"\\W &gt; "</span>)
 )
</pre>
</div>

<p>
Fix broken Git on Windows.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">when</span> (eq window-system 'w32)
  (setenv <span style="font-style: italic;">"GIT_ASKPASS"</span> <span style="font-style: italic;">"git-gui--askpass"</span>))
</pre>
</div>
</div>
</div>

<div id="outline-container-org5c34ef9" class="outline-4">
<h4 id="org5c34ef9">Load custom file</h4>
<div class="outline-text-4" id="text-org5c34ef9">
<p>
This file allows users to override the above defaults. This will mean you
can use custom as you normally would in vanilla Emacs.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(load custom-file t)
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org1f68397" class="outline-3">
<h3 id="org1f68397">Setup use-package</h3>
<div class="outline-text-3" id="text-org1f68397">
<p>
<a href="https://github.com/jwiegley/use-package">use-package</a> is an Emacs package by John Weigley allowing users to easily
configure other Emacs packages. It’s quite useful &amp; it will be used
extensively in this project.
</p>

<p>
Now to get <code>use-package</code> we will require <code>package.el</code> &amp; initialize it if
site-paths is not setup (meaning we’re outside the Nix expression). Because
site-paths should be available (unless you don’t have Nix), we can skip this
step. All of this is marked ‘eval-and-compile’ to make sure the compiler picks
it up on build phase.
</p>

<p>
So, there are basically two modes for using this configuration. One when
packages are installed externally (through Nix) &amp; another where they are
installed internally. This is captured in the variable ‘needs-package-init’
which will be t when we want to use the builtin package.el &amp; will be nil when
we want to just assume everything is available.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">eval-and-compile</span>
  (<span style="font-weight: bold;">setq</span> needs-package-init
        (<span style="font-weight: bold;">and</span> (not (locate-library <span style="font-style: italic;">"site-paths"</span>))
                 (not (<span style="font-weight: bold;">and</span>
                    (boundp 'use-package-list--is-running)
                    use-package-list--is-running)))))
</pre>
</div>

<p>
First handle using <code>package.el</code>. We will do all of the work of bootstrapping
here including running <code>package-initialize</code>, ensuring <code>use-package</code>, &amp; <code>delight</code>
are installed.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">when</span> needs-package-init
  (<span style="font-weight: bold;">require</span> '<span style="font-weight: bold; text-decoration: underline;">package</span>)
  (package-initialize)
  (<span style="font-weight: bold;">unless</span> (package-installed-p 'use-package)
    (package-refresh-contents)
    (package-install 'use-package))
  (<span style="font-weight: bold;">unless</span> (package-installed-p 'delight)
    (package-refresh-contents)
    (package-install 'delight)))
</pre>
</div>

<p>
Actually require <code>use-package</code>,
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">eval-and-compile</span>
  (<span style="font-weight: bold;">require</span> '<span style="font-weight: bold; text-decoration: underline;">delight</span>)
  (<span style="font-weight: bold;">require</span> '<span style="font-weight: bold; text-decoration: underline;">bind-key</span>)
  (<span style="font-weight: bold;">require</span> '<span style="font-weight: bold; text-decoration: underline;">use-package</span>))
</pre>
</div>

<p>
Now let’s handle the case where all of the packages are already provided.
Basically, we’ll prevent use-package from running ‘ensure’ on anything.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">eval-and-compile</span>
  (<span style="font-weight: bold;">setq</span> use-package-always-ensure needs-package-init)
  (<span style="font-weight: bold;">when</span> (not needs-package-init)
    (<span style="font-weight: bold;">setq</span> use-package-ensure-function 'ignore
          package-enable-at-startup nil
          package--init-file-ensured t)))
</pre>
</div>
</div>
</div>

<div id="outline-container-org374fa70" class="outline-3">
<h3 id="org374fa70">Key bindings</h3>
<div class="outline-text-3" id="text-org374fa70">
<p>
Using bind-key, setup some simple key bindings. None of these should overwrite
Emacs’ default keybindings. Also, they should only require vanilla Emacs to work
(non-vanilla Emacs key bindings should be put in their <code>use-package</code>
declaration). These are meant to all be as close to vanilla Emacs as possible. I
try to avoid extremely specific key binds here.
</p>

<p>
What is overwritten can be seen with <code>M-x describe-personal-keybindings</code>. The
goal is to overwrite as little as possible. When it is necessary to overwrite
Emacs keybinds, documentation on why should be provided.
</p>

<p>
First we include a library that provides some nice helper functions that will be
used as key bindings.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">require</span> '<span style="font-weight: bold; text-decoration: underline;">bauer</span>)
</pre>
</div>

<p>
Now we will call <code>bind-keys</code>. We give it keys to bind &amp; what function to run
when those keys are pressed. Note on syntax of bind-keys: if you are unfamiliar
with how Emacs key binding works, you should read through <a href="https://www.masteringemacs.org/article/mastering-key-bindings-emacs">this article</a>.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">require</span> '<span style="font-weight: bold; text-decoration: underline;">files</span>)
(<span style="font-weight: bold;">when</span> (fboundp 'ns-drag-n-drop-as-text)
  (global-set-key [M-s-drag-n-drop]
                 'ns-drag-n-drop-as-text))
(bind-keys
 (<span style="font-style: italic;">"C-c C-u"</span> . rename-uniquely)
 (<span style="font-style: italic;">"C-x ~"</span> . (<span style="font-weight: bold;">lambda</span> () (<span style="font-weight: bold;">interactive</span>) (find-file <span style="font-style: italic;">"~"</span>)))
 (<span style="font-style: italic;">"C-x /"</span> . (<span style="font-weight: bold;">lambda</span> () (<span style="font-weight: bold;">interactive</span>) (find-file <span style="font-style: italic;">"/"</span>)))
 (<span style="font-style: italic;">"C-x 4 C-x ~"</span> . (<span style="font-weight: bold;">lambda</span> () (<span style="font-weight: bold;">interactive</span>) (find-file-other-window <span style="font-style: italic;">"~"</span>)))
 (<span style="font-style: italic;">"C-x 4 C-x /"</span> . (<span style="font-weight: bold;">lambda</span> () (<span style="font-weight: bold;">interactive</span>) (find-file-other-window <span style="font-style: italic;">"/"</span>)))
 (<span style="font-style: italic;">"C-c C-o"</span> . browse-url-at-point)
 (<span style="font-style: italic;">"H-l"</span> . browse-url-at-point)
 (<span style="font-style: italic;">"C-x 5 3"</span> . iconify-frame)
 (<span style="font-style: italic;">"C-x 5 4"</span> . toggle-frame-fullscreen)
 (<span style="font-style: italic;">"s-SPC"</span> . cycle-spacing)
 (<span style="font-style: italic;">"C-c w w"</span> . whitespace-mode)
 (<span style="font-style: italic;">"&lt;C-return&gt;"</span> . other-window)
 (<span style="font-style: italic;">"s-o"</span> . other-window)
 (<span style="font-style: italic;">"C-z"</span> . delete-other-windows)
 (<span style="font-style: italic;">"M-g l"</span> . goto-line)
 (<span style="font-style: italic;">"&lt;C-M-backspace&gt;"</span> . backward-kill-sexp)
 (<span style="font-style: italic;">"C-x t"</span> . toggle-truncate-lines)
 (<span style="font-style: italic;">"C-x v H"</span> . vc-region-history)
 (<span style="font-style: italic;">"C-c SPC"</span> . just-one-space)
 (<span style="font-style: italic;">"C-c f"</span> . flush-lines)
 (<span style="font-style: italic;">"C-c o"</span> . customize-option)
 (<span style="font-style: italic;">"C-c O"</span> . customize-group)
 (<span style="font-style: italic;">"C-c F"</span> . customize-face)
 (<span style="font-style: italic;">"C-c q"</span> . fill-region)
 (<span style="font-style: italic;">"C-c s"</span> . replace-string)
 (<span style="font-style: italic;">"C-c u"</span> . rename-uniquely)
 (<span style="font-style: italic;">"C-c z"</span> . clean-buffer-list)
 (<span style="font-style: italic;">"C-c ="</span> . count-matches)
 (<span style="font-style: italic;">"C-c ;"</span> . comment-or-uncomment-region)
 (<span style="font-style: italic;">"M-+"</span> . text-scale-increase)
 (<span style="font-style: italic;">"M-_"</span> . text-scale-decrease)

 (<span style="font-style: italic;">"H-c"</span> . compile)
 (<span style="font-style: italic;">"s-c"</span> . compile)
 (<span style="font-style: italic;">"s-r"</span> . revert-buffer)
 (<span style="font-style: italic;">"s-1"</span> . other-frame)
 (<span style="font-style: italic;">"&lt;s-return&gt;"</span> . toggle-frame-fullscreen)

 (<span style="font-style: italic;">"s-C-&lt;left&gt;"</span>  . enlarge-window-horizontally)
 (<span style="font-style: italic;">"s-C-&lt;right&gt;"</span> . shrink-window-horizontally)
 (<span style="font-style: italic;">"s-C-&lt;down&gt;"</span>  . shrink-window)
 (<span style="font-style: italic;">"s-C-&lt;up&gt;"</span>    . enlarge-window)

 (<span style="font-style: italic;">"&lt;S-s-up&gt;"</span>   . shrink-window)
 (<span style="font-style: italic;">"&lt;S-s-down&gt;"</span> . enlarge-window)

 (<span style="font-style: italic;">"&lt;s-down&gt;"</span>  . windmove-down)
 (<span style="font-style: italic;">"&lt;s-up&gt;"</span>    . windmove-up)
 (<span style="font-style: italic;">"&lt;s-left&gt;"</span>  . windmove-left)
 (<span style="font-style: italic;">"&lt;s-right&gt;"</span> . windmove-right)

 (<span style="font-style: italic;">"C-c ["</span> . align-regexp)
 (<span style="font-style: italic;">"M-s d"</span> . find-grep-dired)
 (<span style="font-style: italic;">"M-s F"</span> . find-grep)
 (<span style="font-style: italic;">"M-s G"</span> . grep)
 (<span style="font-style: italic;">"s-/"</span> . comment-or-uncomment-region)

 (<span style="font-style: italic;">"C-x M-p"</span> . (<span style="font-weight: bold;">lambda</span> () (<span style="font-weight: bold;">interactive</span>)
                (<span style="font-weight: bold;">save-excursion</span> (other-window 1)
                                (quit-window))))

 (<span style="font-style: italic;">"C-M--"</span> . (<span style="font-weight: bold;">lambda</span> () (<span style="font-weight: bold;">interactive</span>)
              (update-font-size -1 t)))
 (<span style="font-style: italic;">"C-M-="</span> . (<span style="font-weight: bold;">lambda</span> () (<span style="font-weight: bold;">interactive</span>)
              (update-font-size 1 t)))
 (<span style="font-style: italic;">"C-M-0"</span> . (<span style="font-weight: bold;">lambda</span> () (<span style="font-weight: bold;">interactive</span>)
              (update-font-size 12 nil)))

 (<span style="font-style: italic;">"M-n"</span> . next-error)
 (<span style="font-style: italic;">"M-p"</span> . previous-error)

 (<span style="font-style: italic;">"C-c m b"</span> . eval-buffer)
 (<span style="font-style: italic;">"C-c m e"</span> . eval-last-sexp)
 (<span style="font-style: italic;">"C-c m i"</span> . eval-expression)
 (<span style="font-style: italic;">"C-c m d"</span> . eval-defun)
 (<span style="font-style: italic;">"C-c m n"</span> . eval-print-last-sexp)
 (<span style="font-style: italic;">"C-c m r"</span> . eval-region)

 (<span style="font-style: italic;">"C-x r q"</span>        . save-buffers-kill-terminal)
 (<span style="font-style: italic;">"C-c C-&lt;return&gt;"</span> . delete-blank-lines)
 (<span style="font-style: italic;">"C-&lt;f10&gt;"</span>        . menu-bar-mode)
 (<span style="font-style: italic;">"C-x M-g"</span>        . browse-url-at-point)

 (<span style="font-style: italic;">"C-s"</span>     . isearch-forward-regexp)
 (<span style="font-style: italic;">"C-r"</span>     . isearch-backward-regexp)
 (<span style="font-style: italic;">"C-S-s"</span>   . isearch-forward)
 (<span style="font-style: italic;">"C-S-r"</span>   . isearch-backward)
 (<span style="font-style: italic;">"M-s l"</span>   . sort-lines)
 (<span style="font-style: italic;">"M-s m"</span>   . multi-occur)
 (<span style="font-style: italic;">"M-s M"</span>   . multi-occur-in-matching-buffers)
 (<span style="font-style: italic;">"M-s f"</span>   . find-name-dired)
 (<span style="font-style: italic;">"C-c i i"</span> . imenu)
 (<span style="font-style: italic;">"C-c I"</span>   . bauer-find-config))

(bind-keys
 <span style="font-weight: bold;">:package</span> view
 <span style="font-weight: bold;">:map</span> view-mode-map
 (<span style="font-style: italic;">"n"</span> . next-line)
 (<span style="font-style: italic;">"p"</span> . previous-line)
 (<span style="font-style: italic;">"j"</span> . next-line)
 (<span style="font-style: italic;">"k"</span> . previous-line)
 (<span style="font-style: italic;">"l"</span> . forward-char)
 (<span style="font-style: italic;">"f"</span> . forward-char)
 (<span style="font-style: italic;">"b"</span> . backward-char)
 (<span style="font-style: italic;">"e"</span> . end-of-line)
 (<span style="font-style: italic;">"a"</span> . beginning-of-line))

(bind-keys
 <span style="font-weight: bold;">:package</span> iso-transl
 <span style="font-weight: bold;">:map</span> iso-transl-ctl-x-8-map
 (<span style="font-style: italic;">"' /"</span>       . <span style="font-style: italic;">"&#8242;"</span>)
 (<span style="font-style: italic;">"\" /"</span>      . <span style="font-style: italic;">"&#8243;"</span>)
 (<span style="font-style: italic;">"\" ("</span>      . <span style="font-style: italic;">"&#8220;"</span>)
 (<span style="font-style: italic;">"\" )"</span>      . <span style="font-style: italic;">"&#8221;"</span>)
 (<span style="font-style: italic;">"' ("</span>       . <span style="font-style: italic;">"&#8216;"</span> )
 (<span style="font-style: italic;">"' )"</span>       . <span style="font-style: italic;">"&#8217;"</span> )
 (<span style="font-style: italic;">"4 &lt; -"</span>     . <span style="font-style: italic;">"&#8592;"</span>)
 (<span style="font-style: italic;">"4 - &gt;"</span>     . <span style="font-style: italic;">"&#8594;"</span>)
 (<span style="font-style: italic;">"4 b"</span>       . <span style="font-style: italic;">"&#8592;"</span>)
 (<span style="font-style: italic;">"4 f"</span>       . <span style="font-style: italic;">"&#8594;"</span>)
 (<span style="font-style: italic;">"4 p"</span>       . <span style="font-style: italic;">"&#8593;"</span>)
 (<span style="font-style: italic;">"4 n"</span>       . <span style="font-style: italic;">"&#8595;"</span>)
 (<span style="font-style: italic;">"&lt;down&gt;"</span>    . <span style="font-style: italic;">"&#8659;"</span>)
 (<span style="font-style: italic;">"&lt;S-down&gt;"</span>  . <span style="font-style: italic;">"&#8595;"</span>)
 (<span style="font-style: italic;">"&lt;left&gt;"</span>    . <span style="font-style: italic;">"&#8656;"</span>)
 (<span style="font-style: italic;">"&lt;S-left&gt;"</span>  . <span style="font-style: italic;">"&#8592;"</span>)
 (<span style="font-style: italic;">"&lt;right&gt;"</span>   . <span style="font-style: italic;">"&#8658;"</span>)
 (<span style="font-style: italic;">"&lt;S-right&gt;"</span> . <span style="font-style: italic;">"&#8594;"</span>)
 (<span style="font-style: italic;">"&lt;up&gt;"</span>      . <span style="font-style: italic;">"&#8657;"</span>)
 (<span style="font-style: italic;">"&lt;S-up&gt;"</span>    .       <span style="font-style: italic;">"&#8593;"</span>)
 (<span style="font-style: italic;">","</span>         . <span style="font-style: italic;">"&#8230;"</span>))

(bind-keys
 <span style="font-weight: bold;">:prefix-map</span> bauer-git
 <span style="font-weight: bold;">:prefix</span> <span style="font-style: italic;">"s-g"</span>
 (<span style="font-style: italic;">"l"</span> . magit-clone)

 <span style="font-weight: bold;">:prefix-map</span> bauer-help
 <span style="font-weight: bold;">:prefix</span> <span style="font-style: italic;">"s-h"</span>
 (<span style="font-style: italic;">"k"</span> . describe-personal-keybindings)
 (<span style="font-style: italic;">"p"</span> . ffap)
 (<span style="font-style: italic;">"m"</span> . man)
 (<span style="font-style: italic;">"w"</span> . woman))

(<span style="font-weight: bold;">unless</span> window-system
  (global-set-key (kbd <span style="font-style: italic;">"&lt;mouse-4&gt;"</span>) 'scroll-down-line)
  (global-set-key (kbd <span style="font-style: italic;">"&lt;mouse-5&gt;"</span>) 'scroll-up-line))

(<span style="font-weight: bold;">when</span> (eq window-system 'mac)
  (<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">mac-fullscreen</span> ()
    (<span style="font-weight: bold;">interactive</span>)
    (<span style="font-weight: bold;">let</span> ((fullscreen (frame-parameter nil 'fullscreen)))
      (<span style="font-weight: bold;">if</span> (memq fullscreen '(fullscreen fullboth))
          (<span style="font-weight: bold;">let</span> ((fullscreen-restore (frame-parameter nil 'fullscreen-restore)))
            (<span style="font-weight: bold;">if</span> (memq fullscreen-restore '(maximized fullheight fullwidth))
                (set-frame-parameter nil 'fullscreen fullscreen-restore)
              (set-frame-parameter nil 'fullscreen nil)))
        (modify-frame-parameters
         nil `((fullscreen . fullscreen) (fullscreen-restore . ,fullscreen))))))

  (bind-key <span style="font-style: italic;">"C-x 5 4"</span> 'mac-fullscreen))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgb43a463" class="outline-3">
<h3 id="orgb43a463">Setup installer</h3>
<div class="outline-text-3" id="text-orgb43a463">
<p>
Installer provides installation &amp; upgrading functionality. You can upgrade the
IDE at any time by typing <code>M-x upgrade</code> from within Emacs. You may have to
restart Emacs for the upgrade to take place. See <a href="./lisp/installer.el">installer.el</a> for documentation.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">require</span> '<span style="font-weight: bold; text-decoration: underline;">installer</span> nil t)
</pre>
</div>
</div>
</div>

<div id="outline-container-org2723825" class="outline-3">
<h3 id="packages"><a id="org2723825"></a>Packages</h3>
<div class="outline-text-3" id="text-packages">
<p>
Each of these entries are <code>use-package</code> calls that will both install &amp; load
the package for us. The most important are listed first in “Essentials”.
“Built-in&ldquo; Emacs packages are also configured. Next comes the “Programming
Language” modes. Finally, we list some miscellaneous modes.
</p>

<p>
This is an alphabetized listing of all Emacs packages needed by the IDE. To
resort, go to one of the package group headings &amp; type <code>C-c ^ a</code>.
</p>
</div>

<div id="outline-container-org4519475" class="outline-4">
<h4 id="org4519475">Essentials</h4>
<div class="outline-text-4" id="text-org4519475">
<p>
These are the best &amp; most useful modes available to us in Emacs world.
</p>
</div>

<ul class="org-ul">
<li><a id="orgbd0a7e2"></a>aggressive-indent<br />
<div class="outline-text-5" id="text-orgbd0a7e2">
<p>
<a href="https://github.com/Malabarba/aggressive-indent-mode">GitHub</a>
</p>

<p>
Automatically indent code as you type. Only enabled for Lisp currently.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package aggressive-indent
  <span style="font-weight: bold;">:hook</span> ((emacs-lisp-mode
          inferior-emacs-lisp-mode
          ielm-mode
          lisp-mode
          inferior-lisp-mode
          isp-interaction-mode
          slime-repl-mode) <span style="font-weight: bold;">. aggressive-indent-mode))</span>
</pre>
</div>
</div>
</li>

<li><a id="org26c3733"></a>Apropospriate Theme<br />
<div class="outline-text-5" id="text-org26c3733">
<p>
<a href="https://github.com/waymondo/apropospriate-theme">GitHub</a>
</p>

<p>
This is the theme I use &amp; it works well for this configuration. It is dark
with high contrast. We will only enable it when we are running with GUI Emacs.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package apropospriate-theme
  <span style="font-weight: bold;">:if</span> window-system
  <span style="font-weight: bold;">:init</span>
  (add-to-list 'custom-theme-load-path
               (file-name-directory
                 (locate-library <span style="font-style: italic;">"apropospriate-theme"</span>)))
  (load-theme 'apropospriate-dark t))
</pre>
</div>
</div>
</li>

<li><a id="org4d72d36"></a>Company<br />
<div class="outline-text-5" id="text-org4d72d36">
<p>
<a href="http://company-mode.github.io">Website</a>
</p>

<p>
Company provides completions in Emacs. Activate them by pressing <code>C-M-i</code>.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package company
  <span style="font-weight: bold;">:commands</span> global-company-mode
  <span style="font-weight: bold;">:delight</span>
  <span style="font-weight: bold;">:demand</span>
  <span style="font-weight: bold;">:preface</span>
  (load <span style="font-style: italic;">"company-autoloads"</span> t t)
  (<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">company-complete-common-or-cycle-backward</span> ()
    <span style="font-style: italic;">"Complete common prefix or cycle backward."</span>
    (<span style="font-weight: bold;">interactive</span>)
    (company-complete-common-or-cycle -1))
  <span style="font-weight: bold;">:bind</span> (<span style="font-weight: bold;">:map</span> company-mode-map
              (<span style="font-style: italic;">"C-M-i"</span> . company-complete-common-or-cycle)
              <span style="font-weight: bold;">:map</span> company-active-map
              (<span style="font-style: italic;">"RET"</span> . company-complete-selection)
              ([return] . company-complete-selection)
              (<span style="font-style: italic;">"C-j"</span> . company-complete-selection)

              (<span style="font-style: italic;">"TAB"</span> . company-complete-common-or-cycle)
              (<span style="font-style: italic;">"&lt;tab&gt;"</span> . company-complete-common-or-cycle)
              (<span style="font-style: italic;">"S-TAB"</span> . company-complete-common-or-cycle-backward)
              (<span style="font-style: italic;">"&lt;backtab&gt;"</span> . company-complete-common-or-cycle-backward)
              (<span style="font-style: italic;">"C-n"</span> . company-select-next)
              (<span style="font-style: italic;">"C-p"</span> . company-select-previous)

              (<span style="font-style: italic;">"C-/"</span> . company-search-candidates)
              (<span style="font-style: italic;">"C-M-/"</span> . company-filter-candidates)
              (<span style="font-style: italic;">"C-d"</span> . company-show-doc-buffer)
              )
  <span style="font-weight: bold;">:hook</span> ((minibuffer-setup . company-mode)
         (minibuffer-setup .
                           (<span style="font-weight: bold;">lambda</span> () (<span style="font-weight: bold;">setq-local</span> company-frontends
                                             '(company-preview-if-just-one-frontend))))
         (after-init . global-company-mode)
         ((shell-mode sh-mode fish-mode eshell-mode) .
          (<span style="font-weight: bold;">lambda</span> ()
            (<span style="font-weight: bold;">setq-local</span> company-backends
                        '((company-capf
                           company-files))))))
  <span style="font-weight: bold;">:config</span>
  (advice-add 'completion-at-point
              <span style="font-weight: bold;">:override</span> 'company-complete-common-or-cycle)
  (global-company-mode))
</pre>
</div>
</div>

<ul class="org-ul">
<li><a id="org12cd807"></a>company-irony<br />
<div class="outline-text-6" id="text-org12cd807">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package company-irony
  <span style="font-weight: bold;">:commands</span> company-irony
  <span style="font-weight: bold;">:hook</span> (irony-mode . (<span style="font-weight: bold;">lambda</span> ()
    (<span style="font-weight: bold;">setq-local</span> company-backends '(company-irony company-capf)))))
</pre>
</div>
</div>
</li>

<li><a id="org62fac60"></a>company-restclient<br />
<div class="outline-text-6" id="text-org62fac60">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package company-restclient
  <span style="font-weight: bold;">:commands</span> company-restclient
  <span style="font-weight: bold;">:hook</span> (restclient-mode . (<span style="font-weight: bold;">lambda</span> ()
    (<span style="font-weight: bold;">setq-local</span> company-backends '(company-restclient company-capf)))))
</pre>
</div>
</div>
</li>
<li><a id="org99ba77d"></a>company-anaconda<br />
<div class="outline-text-6" id="text-org99ba77d">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package company-anaconda
  <span style="font-weight: bold;">:commands</span> company-anaconda
  <span style="font-weight: bold;">:hook</span> (anaconda-mode . (<span style="font-weight: bold;">lambda</span> ()
                           (<span style="font-weight: bold;">setq-local</span> company-backends '((company-anaconda
                                                           company-capf))))))
</pre>
</div>
</div>
</li>
<li><a id="org6475bfa"></a>company-tern<br />
<div class="outline-text-6" id="text-org6475bfa">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package company-tern
  <span style="font-weight: bold;">:commands</span> company-tern
  <span style="font-weight: bold;">:hook</span> (tern-mode . (<span style="font-weight: bold;">lambda</span> ()
    (<span style="font-weight: bold;">setq-local</span> company-backends '(company-tern company-capf)))))
</pre>
</div>
</div>
</li>
<li><a id="org8586600"></a>company-ghc<br />
<div class="outline-text-6" id="text-org8586600">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package company-ghc
  <span style="font-weight: bold;">:commands</span> company-ghc
  <span style="font-weight: bold;">:hook</span> (haskell-mode . (<span style="font-weight: bold;">lambda</span> ()
    (<span style="font-weight: bold;">setq-local</span> company-backends '(company-ghc company-capf)))))
</pre>
</div>
</div>
</li>
<li><a id="org6634fae"></a>company-auctex<br />
<div class="outline-text-6" id="text-org6634fae">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package company-auctex
  <span style="font-weight: bold;">:commands</span> (company-auctex
             company-auctext-labels
             company-auctest-bibs
             company-auctex-macros
             company-auctext-symbols
             company-auctext-environments)
  <span style="font-weight: bold;">:hook</span>
  (tex-mode . (<span style="font-weight: bold;">lambda</span> ()
                (<span style="font-weight: bold;">setq-local</span> company-backends '((company-auctex-labels
                                                company-auctex-bibs
                                                company-auctex-macros
                                                company-auctex-environments
                                                company-auctex-symbols
                                                company-capf))))))
</pre>
</div>
</div>
</li>
<li><a id="org0411db6"></a>company-web<br />
<div class="outline-text-6" id="text-org0411db6">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package company-web
  <span style="font-weight: bold;">:preface</span>
  (autoload 'company-web-html <span style="font-style: italic;">"company-web-html"</span>)
  (autoload 'company-web-jade <span style="font-style: italic;">"company-web-jade"</span>)
  (autoload 'company-web-slim <span style="font-style: italic;">"company-web-slim"</span>)
  <span style="font-weight: bold;">:hook</span> ((web-mode . (<span style="font-weight: bold;">lambda</span> ()
                       (<span style="font-weight: bold;">setq-local</span> company-backends '(company-web-html
                                                      company-web-jade
                                                      company-web-slim
                                                      company-capf))))))
</pre>
</div>
</div>
</li>
<li><a id="org79ec972"></a>company-math<br />
<div class="outline-text-6" id="text-org79ec972">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package company-math
  <span style="font-weight: bold;">:preface</span>
  (autoload 'company-math-symbols-latex <span style="font-style: italic;">"company-math"</span>)
  (autoload 'company-latex-commands <span style="font-style: italic;">"company-math"</span>)
  <span style="font-weight: bold;">:hook</span>
  (TeX-mode . (<span style="font-weight: bold;">lambda</span> ()
                (<span style="font-weight: bold;">setq-local</span> company-backends '((company-math-symbols-latex
                                                company-latex-commands
                                                company-capf))))))
</pre>
</div>
</div>
</li>
</ul>
</li>
<li><a id="orgaf539c2"></a>Counsel<br />
<div class="outline-text-5" id="text-orgaf539c2">
<p>
<a href="https://github.com/abo-abo/swiper">GitHub</a>
</p>

<p>
Counsel provides a better selection experience to the default Emacs.
</p>

<p>
Counsel is only enabled on non-Windows systems. This is due to an issue in
counsel-find-file, see <a href="https://github.com/abo-abo/swiper/issues/773">https://github.com/abo-abo/swiper/issues/773</a> for more
info.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package counsel
  <span style="font-weight: bold;">:disabled</span>
  <span style="font-weight: bold;">:commands</span> (counsel-mode counsel-descbinds
             counsel-grep-or-swiper)

  <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">counsel doesn&#8217;t work well with windows drives</span>
  <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">see https://github.com/abo-abo/swiper/issues/773</span>
  <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">:if (not (string= system-type "windows-nt"))</span>

  <span style="font-weight: bold;">:bind*</span> (([remap execute-extended-command] . counsel-M-x)
          ([remap find-library] . counsel-find-library)
          ([remap describe-bindings]  .
           counsel-descbinds)
          ([remap describe-face]  .
           counsel-describe-faces)
          ([remap list-faces-display] . counsel-faces)
          ([remap imenu] . counsel-imenu)
          ([remap load-library] . counsel-load-library)
          ([remap load-theme] . counsel-load-theme)
          ([remap yank-pop] . counsel-yank-pop)
          ([remap info-lookup-symbol] .
           counsel-info-lookup-symbol)
          ([remap pop-to-mark-command] .
           counsel-mark-ring)
          ([remap bookmark-jump] . counsel-bookmark)
          (<span style="font-style: italic;">"C-c j"</span> . counsel-git-grep)
          (<span style="font-style: italic;">"C-x l"</span> . counsel-locate)
          (<span style="font-style: italic;">"M-y"</span> . counsel-yank-pop)
          (<span style="font-style: italic;">"C-c i 8"</span> . counsel-unicode-char)
          (<span style="font-style: italic;">"C-x M-f"</span> . counsel-find-file)

          <span style="font-weight: bold;">:map</span> help-map
          (<span style="font-style: italic;">"C-v"</span> . counsel-find-symbol)
          (<span style="font-style: italic;">"C-k"</span> . counsel-find-function-on-key)
          (<span style="font-style: italic;">"C-l"</span> . counsel-find-library)
          ))
</pre>
</div>
</div>

<ul class="org-ul">
<li><a id="orgfb649e4"></a>ivy<br />
<div class="outline-text-6" id="text-orgfb649e4">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package ivy
  <span style="font-weight: bold;">:commands</span> (ivy-read)
  <span style="font-weight: bold;">:bind</span> (([remap list-buffers] . ivy-switch-buffer)
         ([remap switch-to-buffer] . ivy-switch-buffer)
         ([remap switch-to-buffer-other-window] .
          ivy-switch-buffer-other-window)
         <span style="font-weight: bold;">:package</span> ivy
         <span style="font-weight: bold;">:map</span> ivy-minibuffer-map
         (<span style="font-style: italic;">"&lt;escape&gt;"</span> . abort-recursive-edit))
  <span style="font-weight: bold;">:init</span>
  (<span style="font-weight: bold;">defvar</span> <span style="font-weight: bold; font-style: italic;">projectile-completion-system</span>)
  (<span style="font-weight: bold;">defvar</span> <span style="font-weight: bold; font-style: italic;">magit-completing-read-function</span>)
  (<span style="font-weight: bold;">defvar</span> <span style="font-weight: bold; font-style: italic;">projector-completion-system</span>)
  (<span style="font-weight: bold;">setq</span> projectile-completion-system 'ivy
        magit-completing-read-function 'ivy-completing-read)
  <span style="font-weight: bold;">:commands</span> (ivy-completing-read
             ivy-completion-in-region
             swiper))
</pre>
</div>
</div>
</li>
</ul>
</li>
<li><a id="orgf70dec1"></a>diff-hl<br />
<div class="outline-text-5" id="text-orgf70dec1">
<p>
<a href="https://github.com/dgutov/diff-hl">GitHub</a>
</p>

<p>
This mode provides indicators at the right fringe of the Emacs buffer. These
indications show where a file has been edited from the last Git commit.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package diff-hl
  <span style="font-weight: bold;">:bind</span> (<span style="font-weight: bold;">:package</span> diff-hl
         <span style="font-weight: bold;">:map</span> diff-hl-mode-map
         (<span style="font-style: italic;">"&lt;left-fringe&gt; &lt;mouse-1&gt;"</span> . diff-hl-diff-goto-hunk))
  <span style="font-weight: bold;">:hook</span> ((prog-mode . diff-hl-mode)
         (vc-dir-mode . diff-hl-mode)
         (dired-mode . diff-hl-dir-mode)
         (magit-post-refresh . diff-hl-magit-post-refresh)
         (org-mode . diff-hl-mode)))
</pre>
</div>
</div>
</li>

<li><a id="orgb1a2095"></a>dtrt-indent<br />
<div class="outline-text-5" id="text-orgb1a2095">
<p>
<a href="https://github.com/jscheid/dtrt-indent">GitHub</a>
</p>

<p>
This mode will try to 
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package dtrt-indent
  <span style="font-weight: bold;">:delight</span>
  <span style="font-weight: bold;">:hook</span> (prog-mode . dtrt-indent-mode))
</pre>
</div>
</div>
</li>

<li><a id="orgdfacf5c"></a>Emacs shell<br />
<div class="outline-text-5" id="text-orgdfacf5c">
<p>
Emacs shell provides . Run eshell by typing <code>C-c e</code> or <code>M-x eshell</code>.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package eshell
  <span style="font-weight: bold;">:ensure</span> nil
  <span style="font-weight: bold;">:bind</span> ((<span style="font-style: italic;">"C-c M-t"</span> . eshell)
         (<span style="font-style: italic;">"C-c x"</span> . eshell)
         (<span style="font-style: italic;">"C-c e"</span> . eshell))
  <span style="font-weight: bold;">:hook</span> (<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">(eshell-first-time-mode-hook . eshell-read-history)</span>
         (eshell-first-time-mode-hook . eshell-initialize))
  <span style="font-weight: bold;">:preface</span>
  (<span style="font-weight: bold;">defvar</span> <span style="font-weight: bold; font-style: italic;">eshell-isearch-map</span>
    (<span style="font-weight: bold;">let</span> ((map (copy-keymap isearch-mode-map)))
      (define-key map [(control ?m)] 'eshell-isearch-return)
      (define-key map [return]       'eshell-isearch-return)
      (define-key map [(control ?r)] 'eshell-isearch-repeat-backward)
      (define-key map [(control ?s)] 'eshell-isearch-repeat-forward)
      (define-key map [(control ?g)] 'eshell-isearch-abort)
      (define-key map [backspace]    'eshell-isearch-delete-char)
      (define-key map [delete]       'eshell-isearch-delete-char)
      map)
    <span style="font-style: italic;">"Keymap used in isearch in Eshell."</span>)
  (<span style="font-weight: bold;">defalias</span> '<span style="font-weight: bold;">eshell/q</span> 'eshell/exit)
  (<span style="font-weight: bold;">defalias</span> '<span style="font-weight: bold;">eshell/\?</span> 'help)
  (<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">eshell-initialize</span> ()
    (<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">eshell-spawn-external-command</span> (beg end)
      <span style="font-style: italic;">"Parse and expand any history references in current input."</span>
      (<span style="font-weight: bold;">save-excursion</span>
        (goto-char end)
        (<span style="font-weight: bold;">when</span> (looking-back <span style="font-style: italic;">"&amp;!"</span> beg)
          (delete-region (match-beginning 0) (match-end 0))
          (goto-char beg)
          (insert <span style="font-style: italic;">"spawn "</span>))))

    (add-hook 'eshell-expand-input-functions 'eshell-spawn-external-command)))
</pre>
</div>
</div>

<ul class="org-ul">
<li><a id="orgf6da5ae"></a>em-rebind<br />
<div class="outline-text-6" id="text-orgf6da5ae">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package em-rebind
  <span style="font-weight: bold;">:ensure</span> nil
  <span style="font-weight: bold;">:demand</span>
  <span style="font-weight: bold;">:config</span>
  <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">TODO: move this back to customize</span>
  (<span style="font-weight: bold;">setq</span> eshell-rebind-keys-alist
        '(([(control 97)] . eshell-bol)
          ([home] . eshell-bol)
          ([(control 100)] . eshell-delchar-or-maybe-eof)
          ([backspace] . eshell-delete-backward-char)
          ([delete] . eshell-delete-backward-char)
          ([(control 119)] . backward-kill-word)
          ([(control 117)] . eshell-kill-input)
          ([tab] . completion-at-point)
          ([(control 101)] . (<span style="font-weight: bold;">lambda</span> ()
                               (<span style="font-weight: bold;">interactive</span>) (end-of-line)))))

  <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">TODO: move this back to customize</span>
  (<span style="font-weight: bold;">setq</span> eshell-modules-list
        '(eshell-alias
          eshell-basic
          eshell-cmpl
          eshell-dirs
          eshell-glob
          eshell-hist
          eshell-ls
          eshell-pred
          eshell-prompt
          eshell-rebind
          eshell-script
          eshell-term
          eshell-tramp
          eshell-unix
          eshell-xtra
          )))

</pre>
</div>
</div>
</li>

<li><a id="org1907f32"></a>esh-help<br />
<div class="outline-text-6" id="text-org1907f32">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package esh-help
  <span style="font-weight: bold;">:preface</span>
  (autoload 'esh-help-eldoc-command <span style="font-style: italic;">"esh-help"</span>)
  (<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">esh-help-turn-on</span> ()
    (<span style="font-weight: bold;">interactive</span>)
    (<span style="font-weight: bold;">setq-local</span> eldoc-documentation-function
                'esh-help-eldoc-command)
    (<span style="font-weight: bold;">setq</span> eldoc-documentation-function
                'esh-help-eldoc-command)
    (eldoc-mode 1))
  <span style="font-weight: bold;">:hook</span> (eshell-mode . esh-help-turn-on))
</pre>
</div>
</div>
</li>

<li><a id="orgb3ca499"></a>em-dired<br />
<div class="outline-text-6" id="text-orgb3ca499">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package em-dired
    <span style="font-weight: bold;">:preface</span>
    (autoload 'em-dired-new <span style="font-style: italic;">"em-dired"</span>)
    <span style="font-weight: bold;">:ensure</span> nil
    <span style="font-weight: bold;">:bind</span> (<span style="font-weight: bold;">:package</span> dired
                    <span style="font-weight: bold;">:map</span> dired-mode-map
                    (<span style="font-style: italic;">"e"</span> . em-dired))
    <span style="font-weight: bold;">:hook</span> (eshell-mode . em-dired-mode)
    <span style="font-weight: bold;">:init</span>
    (advice-add 'eshell <span style="font-weight: bold;">:before</span> 'em-dired-new))
</pre>
</div>
</div>
</li>
</ul>
</li>

<li><a id="org8c19e7a"></a>ESUP<br />
<div class="outline-text-5" id="text-org8c19e7a">
<p>
<a href="https://github.com/jschaf/esup">GitHub</a>
</p>

<p>
emacs-init-time gives good readings for Emacs startup time. Currently my
emacs-init-time is 4.5 seconds. It fluctuates based on what’s been enabled
but I aim to never let it go above 5. This is good but it includes some
things we don’t have control over (window system &amp; Emacs C internals).
</p>

<p>
ESUP provides good info on what is taking a long time during startup. ESUP is a
startup profiler for Emacs. I’ve provided &ldquo;startup-profile&rdquo; so that you can just
profile what is in “default.el” (this script) &amp; not any other miscellaneous
scripts you have around. This will be part of our effort to get quick startup
times. Slowdowns happen for various reasons but right now autorevert,
apropospriate, &amp; flycheck are the biggest offenders.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package esup
  <span style="font-weight: bold;">:commands</span> esup
  <span style="font-weight: bold;">:preface</span>
  (<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">startup-profile</span> ()
    (<span style="font-weight: bold;">interactive</span>)
    (esup (locate-library <span style="font-style: italic;">"default"</span>))))
</pre>
</div>
</div>
</li>

<li><a id="org1975ff5"></a>Flycheck<br />
<div class="outline-text-5" id="text-org1975ff5">
<p>
<a href="http://www.flycheck.org/">Website</a>
</p>

<p>
Flycheck will annotate code with errors from the compiler or interpreter. It
supports many languages and give us a lot of features right out of the box.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package flycheck
  <span style="font-weight: bold;">:hook</span> (prog-mode . flycheck-mode))
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">(use-package flycheck-haskell</span>
<span style="font-weight: bold; font-style: italic;">;;   </span><span style="font-weight: bold; font-style: italic;">:hook (flycheck-mode . flycheck-haskell-setup)</span>
<span style="font-weight: bold; font-style: italic;">;;   </span><span style="font-weight: bold; font-style: italic;">)</span>
</pre>
</div>
</div>
</li>

<li><a id="orgf8a4cdd"></a>github-clone<br />
<div class="outline-text-5" id="text-orgf8a4cdd">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package github-clone
  <span style="font-weight: bold;">:disabled</span>
  <span style="font-weight: bold;">:if</span> (locate-file <span style="font-style: italic;">"git"</span> exec-path)
  <span style="font-weight: bold;">:bind</span> (<span style="font-style: italic;">"C-c g c"</span> . github-clone))
</pre>
</div>
</div>
</li>
<li><a id="org11412b1"></a>Gnus<br />
<div class="outline-text-5" id="text-org11412b1">
<p>
<a href="http://www.gnus.org">Website</a>
</p>

<p>
Gnus is an infamous email client &amp; news reader.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package gnus
  <span style="font-weight: bold;">:ensure</span> nil
  <span style="font-weight: bold;">:commands</span> gnus
  <span style="font-weight: bold;">:hook</span> ((dired-mode . turn-on-gnus-dired-mode)))
</pre>
</div>
</div>
</li>

<li><a id="org1b2145c"></a>God Mode<br />
<div class="outline-text-5" id="text-org1b2145c">
<p>
<a href="https://github.com/chrisdone/god-mode">GitHub</a>
</p>

<p>
God Mode makes it easier to type Emacs shortcuts involving lots of modifier
keys. Activate it by pressing Escape (Notice “God” at the bottom of the screen).
You no longer have to press &amp; hold the control key!
</p>

<p>
Note that god-mode overwrites escape key. This can cause some issues for
certain Emacs keybinds.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">  (use-package god-mode
    <span style="font-weight: bold;">:bind</span> ((<span style="font-style: italic;">"&lt;escape&gt;"</span> . god-local-mode)
<span style="font-weight: bold; font-style: italic;">;;           </span><span style="font-weight: bold; font-style: italic;">("ESC" . god-local-mode)</span>
))
</pre>
</div>
</div>
</li>

<li><a id="org3e674f2"></a>helpful<br />
<div class="outline-text-5" id="text-org3e674f2">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package helpful
  <span style="font-weight: bold;">:if</span> (&gt;= emacs-major-version 25)
  <span style="font-weight: bold;">:bind</span> (([remap describe-function] . helpful-callable)
         ([remap describe-variable] . helpful-variable)
         ([remap describe-key] . helpful-key))
         (<span style="font-style: italic;">"H-h"</span> . helpful-at-point))
</pre>
</div>
</div>
</li>

<li><a id="orgf293904"></a>Hippie Expand<br />
<div class="outline-text-5" id="text-orgf293904">
<p>
Hippie provides dynamic expansions. Try it out by pressing <code>M-/</code>.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package hippie-exp
  <span style="font-weight: bold;">:ensure</span> nil
  <span style="font-weight: bold;">:bind*</span> ((<span style="font-style: italic;">"M-/"</span> . hippie-expand)
          (<span style="font-style: italic;">"s-?"</span> . hippie-expand-line))
  <span style="font-weight: bold;">:hook</span> ((emacs-lisp-mode ielm-mode) .
         (<span style="font-weight: bold;">lambda</span> ()
           (<span style="font-weight: bold;">setq-local</span>
            hippie-expand-try-functions-list
            (append '(try-complete-lisp-symbol-partially
                      try-complete-lisp-symbol)
             hippie-expand-try-functions-list)))))
</pre>
</div>
</div>
</li>

<li><a id="org20ac83f"></a>Magit<br />
<div class="outline-text-5" id="text-org20ac83f">
<p>
<a href="https://magit.vc">Website</a>
</p>

<p>
Magit is a Git porcelain for Emacs. All of the features from the Git command
line are available in an intuitive Emacs buffer.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package magit
  <span style="font-weight: bold;">:preface</span>
  (autoload 'magit-toplevel <span style="font-style: italic;">"magit"</span>)
  (autoload 'magit-read-string-ns <span style="font-style: italic;">"magit"</span>)
  (autoload 'magit-get <span style="font-style: italic;">"magit"</span>)
  (autoload 'magit-define-popup-action <span style="font-style: italic;">"magit"</span>)
  (autoload 'magit-remote-arguments <span style="font-style: italic;">"magit"</span>)
  (<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">magit-dired-other-window</span> ()
    (<span style="font-weight: bold;">interactive</span>)
    (dired-other-window (magit-toplevel)))

  (<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">magit-remote-github</span> (username <span style="font-weight: bold; text-decoration: underline;">&amp;optional</span> args)
    (<span style="font-weight: bold;">interactive</span> (list (magit-read-string-ns <span style="font-style: italic;">"User name"</span>)
                       (magit-remote-arguments)))
    (<span style="font-weight: bold;">let*</span> ((url (magit-get <span style="font-style: italic;">"remote.origin.url"</span>))
           (match (string-match
                   <span style="font-style: italic;">"^</span><span style="font-weight: bold; font-style: italic;">\\</span><span style="font-weight: bold; font-style: italic;">(?:</span><span style="font-style: italic;">https?://github</span><span style="font-weight: bold; font-style: italic;">\</span><span style="font-style: italic;">.com/</span><span style="font-weight: bold; font-style: italic;">\\</span><span style="font-weight: bold; font-style: italic;">|</span><span style="font-style: italic;">git@github.com:</span><span style="font-weight: bold; font-style: italic;">\\</span><span style="font-weight: bold; font-style: italic;">|</span><span style="font-style: italic;">ssh://git@github</span><span style="font-weight: bold; font-style: italic;">\</span><span style="font-style: italic;">.com/</span><span style="font-weight: bold; font-style: italic;">\\</span><span style="font-weight: bold; font-style: italic;">)</span><span style="font-style: italic;">[</span><span style="font-style: italic;">^</span><span style="font-style: italic;">/]*/</span><span style="font-weight: bold; font-style: italic;">\\</span><span style="font-weight: bold; font-style: italic;">(</span><span style="font-style: italic;">.*</span><span style="font-weight: bold; font-style: italic;">\\</span><span style="font-weight: bold; font-style: italic;">)</span><span style="font-style: italic;">"</span>
                   url)))
      (<span style="font-weight: bold;">unless</span> match
        (<span style="font-weight: bold;">error</span> <span style="font-style: italic;">"Not a github remote"</span>))
      (<span style="font-weight: bold;">let</span> ((repo (match-string 1 url)))
        (apply 'magit-remote-add username
               (format <span style="font-style: italic;">"ssh://git@github.com/%s/%s"</span>
                       username repo) <span style="font-weight: bold;">args))))</span>
  <span style="font-weight: bold;">:hook</span> (magit-mode . (<span style="font-weight: bold;">lambda</span> ()
                        (magit-define-popup-action
                          'magit-remote-popup
                          ?g
                          <span style="font-style: italic;">"Add remote from github user name"</span>
                          'magit-remote-github)))
  <span style="font-weight: bold;">:commands</span> magit-clone
  <span style="font-weight: bold;">:if</span> (locate-file <span style="font-style: italic;">"git"</span> exec-path)
  <span style="font-weight: bold;">:bind</span> ((<span style="font-style: italic;">"C-x g"</span> . magit-status)
         (<span style="font-style: italic;">"C-x G"</span> . magit-dispatch-popup)
         <span style="font-weight: bold;">:package</span> magit
         <span style="font-weight: bold;">:map</span> magit-mode-map
         (<span style="font-style: italic;">"C-o"</span> . magit-dired-other-window)))
</pre>
</div>
</div>

<ul class="org-ul">
<li><a id="orgcd3b107"></a>git-commit<br />
<div class="outline-text-6" id="text-orgcd3b107">
<pre class="example">
(use-package git-commit
  :hook ((git-commit-mode . flyspell-mode)
	 (git-commit-mode . git-commit-save-message)
	 (git-commit-mode . turn-on-auto-fill)))
</pre>
</div>
</li>
<li><a id="org106459c"></a>magithub<br />
<div class="outline-text-6" id="text-org106459c">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package magithub
  <span style="font-weight: bold;">:after</span> magit
  <span style="font-weight: bold;">:config</span>
  (magithub-feature-autoinject t)
  (<span style="font-weight: bold;">setq</span> magithub-clone-default-directory <span style="font-style: italic;">"~/github"</span>))
</pre>
</div>
</div>
</li>
</ul>
</li>

<li><a id="org62c1c6b"></a>MMM Mode<br />
<div class="outline-text-5" id="text-org62c1c6b">
<p>
<a href="https://github.com/purcell/mmm-mode">GitHub</a>
</p>

<p>
MMM mode lets you edit multiple languages within one buffer.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package mmm-mode
  <span style="font-weight: bold;">:commands</span> mmm-mode
  <span style="font-weight: bold;">:config</span>
  (use-package mmm-auto
    <span style="font-weight: bold;">:ensure</span> nil))
</pre>
</div>
</div>
</li>

<li><a id="org606e3ed"></a>multiple-cursors<br />
<div class="outline-text-5" id="text-org606e3ed">
<p>
<a href="https://github.com/magnars/multiple-cursors.el">GitHub</a>
</p>

<p>
Multiple cursors give you more cursors. It is bound to <code>C-&gt;</code> &amp; <code>C-&lt;</code>.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package multiple-cursors
  <span style="font-weight: bold;">:bind</span>
  ((<span style="font-style: italic;">"&lt;C-S-down&gt;"</span> . mc/mark-next-like-this)
   (<span style="font-style: italic;">"&lt;C-S-up&gt;"</span> . mc/mark-previous-like-this)
   (<span style="font-style: italic;">"C-&gt;"</span> . mc/mark-next-like-this)
   (<span style="font-style: italic;">"C-&lt;"</span> . mc/mark-previous-like-this)
   (<span style="font-style: italic;">"M-&lt;mouse-1&gt;"</span> . mc/add-cursor-on-click)
   (<span style="font-style: italic;">"C-c C-&lt;"</span>     . mc/mark-all-like-this)
   (<span style="font-style: italic;">"C-!"</span>         . mc/mark-next-symbol-like-this)
   (<span style="font-style: italic;">"C-S-c C-S-c"</span> . mc/edit-lines)))
</pre>
</div>
</div>
</li>

<li><a id="orgc43e6c3"></a>notmuch<br />
<div class="outline-text-5" id="text-orgc43e6c3">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package notmuch
  <span style="font-weight: bold;">:bind</span> ((<span style="font-style: italic;">"s-m"</span> . notmuch)
         (<span style="font-style: italic;">"H-m"</span> . notmuch)))
</pre>
</div>
</div>
</li>

<li><a id="org7abe510"></a>Org<br />
<div class="outline-text-5" id="text-org7abe510">
<p>
<a href="https://orgmode.org">Website</a>
</p>

<p>
Org mode is an impressive suite of text editing solutions. It gives you an
outliner but also much much more.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package org
  <span style="font-weight: bold;">:ensure</span> org-plus-contrib
  <span style="font-weight: bold;">:hook</span> ((message-mode . turn-on-orgstruct++)
         (org-mode . (<span style="font-weight: bold;">lambda</span> ()
           (add-hook 'completion-at-point-functions
                     'pcomplete-completions-at-point nil t)))
         (org-mode . auto-fill-mode)
         (org-mode . (<span style="font-weight: bold;">lambda</span> () (<span style="font-weight: bold;">setq-local</span> scroll-margin 3)))
         (message-mode . turn-on-orgtbl)
         (org-mode . (<span style="font-weight: bold;">lambda</span> ()
           (autoload 'org-eldoc-documentation-function <span style="font-style: italic;">"org-eldoc"</span>)
           (<span style="font-weight: bold;">setq-local</span> eldoc-documentation-function
                       'org-eldoc-documentation-function))))
  <span style="font-weight: bold;">:bind*</span> ((<span style="font-style: italic;">"C-c c"</span> . org-capture)
          (<span style="font-style: italic;">"C-c a"</span> . org-agenda)
          (<span style="font-style: italic;">"C-c l"</span> . org-store-link)
          (<span style="font-style: italic;">"C-c b"</span> . org-iswitchb))
  <span style="font-weight: bold;">:config</span>
  (use-package ob-dot
    <span style="font-weight: bold;">:ensure</span> nil
    <span style="font-weight: bold;">:demand</span>)
  (use-package ox-latex
    <span style="font-weight: bold;">:ensure</span> nil
    <span style="font-weight: bold;">:demand</span>)
  (use-package ox-beamer
    <span style="font-weight: bold;">:ensure</span> nil
    <span style="font-weight: bold;">:demand</span>)
  (use-package ox-md
    <span style="font-weight: bold;">:ensure</span> nil
    <span style="font-weight: bold;">:demand</span>))
  (use-package org-download
    <span style="font-weight: bold;">:hook</span> (dired-mode . org-download-enable))
</pre>
</div>
</div>
</li>
<li><a id="orgdbab9cc"></a>Projectile<br />
<div class="outline-text-5" id="text-orgdbab9cc">
<p>
<a href="https://github.com/bbatsov/projectile">GitHub</a>
</p>

<p>
Setup projectile &amp; link it with some other packages. This also adds an
easymenu to make the &ldquo;Projectile&rdquo; modeline clickable.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package projectile
  <span style="font-weight: bold;">:commands</span> projectile-mode
  <span style="font-weight: bold;">:bind-keymap*</span> ((<span style="font-style: italic;">"C-c p"</span> . projectile-command-map)
                 (<span style="font-style: italic;">"s-p"</span> . projectile-command-map))
  <span style="font-weight: bold;">:bind</span> ((<span style="font-style: italic;">"C-c C-f"</span> . projectile-find-file))
  <span style="font-weight: bold;">:preface</span>
  (autoload 'projectile-project-vcs <span style="font-style: italic;">"projectile"</span>)
  (autoload 'projectile-project-root <span style="font-style: italic;">"projectile"</span>)
  (autoload 'easy-menu-define <span style="font-style: italic;">"easymenu"</span> <span style="font-style: italic;">""</span> nil 'macro)
  <span style="font-weight: bold;">:demand</span>
  <span style="font-weight: bold;">:config</span>
  (projectile-mode))
</pre>
</div>
</div>
</li>

<li><a id="org8079823"></a>Recentf<br />
<div class="outline-text-5" id="text-org8079823">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package recentf
  <span style="font-weight: bold;">:disabled</span>
  <span style="font-weight: bold;">:ensure</span> nil
  <span style="font-weight: bold;">:config</span> (recentf-mode 1))
</pre>
</div>
</div>
</li>
<li><a id="org7fad08e"></a>smart-hungry-delete<br />
<div class="outline-text-5" id="text-org7fad08e">
<p>
<a href="https://github.com/hrehfeld/emacs-smart-hungry-delete">GitHub</a>
</p>

<p>
Smart hungry delete automatically delete lots of whitespace in a row.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package smart-hungry-delete
  <span style="font-weight: bold;">:if</span> (&gt;= emacs-major-version 25)
  <span style="font-weight: bold;">:bind</span> (<span style="font-weight: bold;">:map</span> prog-mode-map
         (<span style="font-style: italic;">"&lt;backspace&gt;"</span> .
          smart-hungry-delete-backward-char)
         (<span style="font-style: italic;">"C-d"</span> .
          smart-hungry-delete-forward-char))
  <span style="font-weight: bold;">:hook</span> ((prog-mode .
          smart-hungry-delete-default-prog-mode-hook)
         (c-mode-common .
          smart-hungry-delete-default-c-mode-common-hook)
         (python-mode .
          smart-hungry-delete-default-c-mode-common-hook)
         (text-mode .
          smart-hungry-delete-default-text-mode-hook)))
</pre>
</div>
</div>
</li>

<li><a id="org5f55072"></a>Smartparens<br />
<div class="outline-text-5" id="text-org5f55072">
<p>
<a href="https://github.com/Fuco1/smartparens">Website</a>
</p>

<p>
Smartparens is helpful in closing parenthesis when editing Lisp code.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package smartparens
  <span style="font-weight: bold;">:preface</span>
  (autoload 'sp-local-pair <span style="font-style: italic;">"smartparens"</span>)
  (autoload 'sp-local-tag  <span style="font-style: italic;">"smartparens"</span>)
  <span style="font-weight: bold;">:hook</span> (((emacs-lisp-mode
           inferior-emacs-lisp-mode
           ielm-mode
           lisp-mode
           inferior-lisp-mode
           lisp-interaction-mode
           slime-repl-mode
           eval-expression-minibuffer-setup) <span style="font-weight: bold;">.</span>
          smartparens-strict-mode)
         ((emacs-lisp-mode
           inferior-emacs-lisp-mode
           ielm-mode
           lisp-mode
           inferior-lisp-mode
           lisp-interaction-mode
           slime-repl-mode
           org-mode) <span style="font-weight: bold;">. show-smartparens-mode)</span>
         ((web-mode
           html-mode) <span style="font-weight: bold;">. smartparens-mode)</span>
         (smartparens-mode . sp-use-paredit-bindings))
  <span style="font-weight: bold;">:config</span>
  (autoload 'sp-with-modes <span style="font-style: italic;">"smartparens"</span> <span style="font-style: italic;">""</span> nil 'macro)
  (use-package smartparens-config
    <span style="font-weight: bold;">:ensure</span> nil
    <span style="font-weight: bold;">:demand</span>)

  (sp-with-modes 'org-mode
    (sp-local-pair <span style="font-style: italic;">"*"</span> <span style="font-style: italic;">"*"</span>
      <span style="font-weight: bold;">:actions</span> '(insert wrap)
      <span style="font-weight: bold;">:unless</span> '(sp-point-after-word-p sp-point-at-bol-p)
      <span style="font-weight: bold;">:wrap</span> <span style="font-style: italic;">"C-*"</span> <span style="font-weight: bold;">:skip-match</span> 'sp--org-skip-asterisk)
    (sp-local-pair <span style="font-style: italic;">"_"</span> <span style="font-style: italic;">"_"</span> <span style="font-weight: bold;">:unless</span> '(sp-point-after-word-p)
                           <span style="font-weight: bold;">:wrap</span> <span style="font-style: italic;">"C-_"</span>)
    (sp-local-pair <span style="font-style: italic;">"/"</span> <span style="font-style: italic;">"/"</span> <span style="font-weight: bold;">:unless</span> '(sp-point-after-word-p)
                   <span style="font-weight: bold;">:post-handlers</span> '((<span style="font-style: italic;">"[d1]"</span> <span style="font-style: italic;">"SPC"</span>)))
    (sp-local-pair <span style="font-style: italic;">"~"</span> <span style="font-style: italic;">"~"</span> <span style="font-weight: bold;">:unless</span> '(sp-point-after-word-p)
                   <span style="font-weight: bold;">:post-handlers</span> '((<span style="font-style: italic;">"[d1]"</span> <span style="font-style: italic;">"SPC"</span>)))
    (sp-local-pair <span style="font-style: italic;">"="</span> <span style="font-style: italic;">"="</span> <span style="font-weight: bold;">:unless</span> '(sp-point-after-word-p)
                   <span style="font-weight: bold;">:post-handlers</span> '((<span style="font-style: italic;">"[d1]"</span> <span style="font-style: italic;">"SPC"</span>)))
    (sp-local-pair <span style="font-style: italic;">"&#171;"</span> <span style="font-style: italic;">"&#187;"</span>))

  (sp-with-modes '(java-mode c++-mode)
    (sp-local-pair <span style="font-style: italic;">"{"</span> nil
                   <span style="font-weight: bold;">:post-handlers</span> '((<span style="font-style: italic;">"||\n[i]"</span> <span style="font-style: italic;">"RET"</span>)))
    (sp-local-pair <span style="font-style: italic;">"/*"</span> <span style="font-style: italic;">"*/"</span>
                   <span style="font-weight: bold;">:post-handlers</span> '((<span style="font-style: italic;">" | "</span> <span style="font-style: italic;">"SPC"</span>)
                                    (<span style="font-style: italic;">"* ||\n[i]"</span> <span style="font-style: italic;">"RET"</span>))))

  (sp-with-modes '(markdown-mode gfm-mode rst-mode)
    (sp-local-pair <span style="font-style: italic;">"*"</span> <span style="font-style: italic;">"*"</span> <span style="font-weight: bold;">:bind</span> <span style="font-style: italic;">"C-*"</span>)
    (sp-local-tag <span style="font-style: italic;">"2"</span> <span style="font-style: italic;">"**"</span> <span style="font-style: italic;">"**"</span>)
    (sp-local-tag <span style="font-style: italic;">"s"</span> <span style="font-style: italic;">"```scheme"</span> <span style="font-style: italic;">"```"</span>)
    (sp-local-tag <span style="font-style: italic;">"&lt;"</span>  <span style="font-style: italic;">"&lt;_&gt;"</span> <span style="font-style: italic;">"&lt;/_&gt;"</span>
                  <span style="font-weight: bold;">:transform</span> 'sp-match-sgml-tags))

  (sp-local-pair 'emacs-lisp-mode <span style="font-style: italic;">"`"</span> nil
                 <span style="font-weight: bold;">:when</span> '(sp-in-string-p))
  (sp-local-pair 'clojure-mode <span style="font-style: italic;">"`"</span> <span style="font-style: italic;">"`"</span>
                 <span style="font-weight: bold;">:when</span> '(sp-in-string-p))
  (sp-local-pair 'minibuffer-inactive-mode <span style="font-style: italic;">"'"</span> nil
                 <span style="font-weight: bold;">:actions</span> nil)

  (sp-with-modes 'nix-mode
    (sp-local-pair <span style="font-style: italic;">"'"</span> <span style="font-style: italic;">"'"</span>
                   <span style="font-weight: bold;">:unless</span> '(sp-in-comment-p
                             sp-in-string-quotes-p))
    (sp-local-pair <span style="font-style: italic;">"\""</span> <span style="font-style: italic;">"\""</span>)
    (sp-local-pair <span style="font-style: italic;">"''"</span> <span style="font-style: italic;">"''"</span>
                   <span style="font-weight: bold;">:unless</span> '(sp-in-comment-p
                             sp-in-string-quotes-p))))
</pre>
</div>
</div>
</li>

<li><a id="org0ee26c1"></a>sudo-edit<br />
<div class="outline-text-5" id="text-org0ee26c1">
<p>
<a href="https://github.com/nflath/sudo-edit">GitHub</a>
</p>

<p>
Sudo-edit lets you open a file using sudo (it actually goes through TRAMP to
achieve this).
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package sudo-edit
  <span style="font-weight: bold;">:bind</span> ((<span style="font-style: italic;">"C-c C-r"</span> . sudo-edit)))
</pre>
</div>
</div>
</li>

<li><a id="org4ad5108"></a>try<br />
<div class="outline-text-5" id="text-org4ad5108">
<p>
<a href="https://github.com/larstvei/Try">GitHub</a>
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package try
  <span style="font-weight: bold;">:commands</span> try)
</pre>
</div>
</div>
</li>

<li><a id="orgc8e253d"></a>which-key<br />
<div class="outline-text-5" id="text-orgc8e253d">
<p>
Which-key will tell you what key bindings are available give a prefix. Test it
out by pressing <code>C-x</code> &amp; waiting a few seconds. Each key listed is bound to a
function.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package which-key
  <span style="font-weight: bold;">:demand</span>
  <span style="font-weight: bold;">:commands</span> which-key-mode
  <span style="font-weight: bold;">:config</span> (which-key-mode 1))
</pre>
</div>
</div>
</li>
</ul>
</div>

<div id="outline-container-org783fba5" class="outline-4">
<h4 id="org783fba5">Built-ins</h4>
<div class="outline-text-4" id="text-org783fba5">
<p>
These are available automatically, so these <code>use-package</code> blocks just
configure them.
</p>
</div>

<ul class="org-ul">
<li><a id="orgae45f56"></a>ansi-color<br />
<div class="outline-text-5" id="text-orgae45f56">
<p>
Get color/ansi codes in compilation mode.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package ansi-color
  <span style="font-weight: bold;">:ensure</span> nil
  <span style="font-weight: bold;">:hook</span> (compilation-filter . colorize-compilation-buffer)
  <span style="font-weight: bold;">:preface</span>
  (autoload 'ansi-color-apply-on-region <span style="font-style: italic;">"ansi-color"</span>)
  (<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">colorize-compilation-buffer</span> ()
    (<span style="font-weight: bold;">let</span> ((inhibit-read-only t))
      (ansi-color-apply-on-region (point-min) (point-max)))))
</pre>
</div>
</div>
</li>

<li><a id="orgc19c81e"></a>autorevert<br />
<div class="outline-text-5" id="text-orgc19c81e">
<p>
Autorevert mode makes files update when they have changed on disk. Unfortunately
this can have some issues in cases where Emacs uses the wrong file. Need to
investigate how to fix this.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package autorevert
  <span style="font-weight: bold;">:ensure</span> nil
  <span style="font-weight: bold;">:commands</span> global-auto-revert-mode
  <span style="font-weight: bold;">:demand</span>
  <span style="font-weight: bold;">:config</span> (global-auto-revert-mode t))
</pre>
</div>
</div>
</li>

<li><a id="orgefa75bc"></a>bug-reference<br />
<div class="outline-text-5" id="text-orgefa75bc">
<p>
Provides links to bugs listed in sourvce code.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package bug-reference
  <span style="font-weight: bold;">:ensure</span> nil
  <span style="font-weight: bold;">:hook</span> ((prog-mode . bug-reference-prog-mode)
         (text-mode . bug-reference-mode)))
</pre>
</div>
</div>

<ul class="org-ul">
<li><a id="org2b20c9a"></a>bug-reference-github<br />
<div class="outline-text-6" id="text-org2b20c9a">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package bug-reference-github
  <span style="font-weight: bold;">:commands</span> bug-reference-github-set-url-format
  <span style="font-weight: bold;">:disabled</span>
  <span style="font-weight: bold;">:preface</span>
  (<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">bug-reference-github-projectile</span> ()
    (<span style="font-weight: bold;">when</span> (<span style="font-weight: bold;">and</span> projectile-mode
               (eq (projectile-project-vcs
                     (projectile-project-root))
                   'git))
      (bug-reference-github-set-url-format)))
  <span style="font-weight: bold;">:hook</span> (magit-mode . bug-reference-github-projectile))
</pre>
</div>
</div>
</li>
</ul>
</li>

<li><a id="orgb70b78c"></a>comint<br />
<div class="outline-text-5" id="text-orgb70b78c">
<p>
Base mode used for shell and terminal modes.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package comint
  <span style="font-weight: bold;">:ensure</span> nil
  <span style="font-weight: bold;">:preface</span>
  (autoload 'comint-write-input-ring <span style="font-style: italic;">"comint"</span>)
  (autoload 'comint-read-input-ring <span style="font-style: italic;">"comint"</span>)
  (<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">turn-on-comint-history</span> (history-file)
    (<span style="font-weight: bold;">setq</span> comint-input-ring-file-name history-file)
    (comint-read-input-ring 'silent))
  (<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">save-history</span> ()
    (<span style="font-weight: bold;">dolist</span> (buffer (buffer-list))
      (<span style="font-weight: bold;">with-current-buffer</span> buffer
                           (comint-write-input-ring)))))
</pre>
</div>
</div>
</li>

<li><a id="orgf595f7b"></a>compile<br />
<div class="outline-text-5" id="text-orgf595f7b">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package compile
  <span style="font-weight: bold;">:ensure</span> nil
  <span style="font-weight: bold;">:bind</span> ((<span style="font-style: italic;">"C-c C-c"</span> . compile)
         <span style="font-weight: bold;">:map</span> compilation-mode-map
         (<span style="font-style: italic;">"o"</span> . compile-goto-error))
  <span style="font-weight: bold;">:preface</span>
  (autoload 'ansi-color-process-output <span style="font-style: italic;">"ansi-color"</span>)
  (<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">show-compilation</span> ()
    (<span style="font-weight: bold;">interactive</span>)
    (<span style="font-weight: bold;">let</span> ((compile-buf
           (<span style="font-weight: bold;">catch</span> '<span style="font-weight: bold; text-decoration: underline;">found</span>
             (<span style="font-weight: bold;">dolist</span> (buf (buffer-list))
               (<span style="font-weight: bold;">if</span> (string-match <span style="font-style: italic;">"\\*compilation\\*"</span>
                                 (buffer-name buf))
                   (<span style="font-weight: bold;">throw</span> '<span style="font-weight: bold; text-decoration: underline;">found</span> buf))))))
      (<span style="font-weight: bold;">if</span> compile-buf
          (switch-to-buffer-other-window compile-buf)
        (call-interactively 'compile))))

  (<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">compilation-ansi-color-process-output</span> ()
    (ansi-color-process-output nil)
    (set (make-local-variable 'comint-last-output-start)
         (point-marker)))
  <span style="font-weight: bold;">:hook</span> (compilation-filter .
         compilation-ansi-color-process-output))
</pre>
</div>
</div>
</li>

<li><a id="org908eee2"></a>delsel<br />
<div class="outline-text-5" id="text-org908eee2">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package delsel
  <span style="font-weight: bold;">:ensure</span> nil
  <span style="font-weight: bold;">:demand</span>
  <span style="font-weight: bold;">:commands</span> delete-selection-mode
  <span style="font-weight: bold;">:config</span> (delete-selection-mode t))
</pre>
</div>
</div>
</li>

<li><a id="org50c4553"></a>dired<br />
<div class="outline-text-5" id="text-org50c4553">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package dired
  <span style="font-weight: bold;">:ensure</span> nil
  <span style="font-weight: bold;">:preface</span>
  (autoload 'dired-get-filename <span style="font-style: italic;">"dired"</span>)
  (autoload 'term-set-escape-char <span style="font-style: italic;">"term"</span>)
  (<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">dired-run-command</span> (<span style="font-weight: bold; text-decoration: underline;">&amp;optional</span> filename)
    <span style="font-style: italic;">"Run file at point in a new buffer."</span>
    (<span style="font-weight: bold;">interactive</span>)
    (<span style="font-weight: bold;">unless</span> filename
      (<span style="font-weight: bold;">setq</span> filename (expand-file-name
                      (dired-get-filename t t)
                      default-directory)))
    (<span style="font-weight: bold;">let</span> ((buffer (make-term
                    (file-name-nondirectory filename)
                    filename))
          (buffer-read-only nil))
      (<span style="font-weight: bold;">with-current-buffer</span> buffer
        <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">(term-mode)</span>
        (term-char-mode)
        (term-set-escape-char ?\C-x))
      (set-process-sentinel
        (get-buffer-process buffer)
        (<span style="font-weight: bold;">lambda</span> (proc event)
           (<span style="font-weight: bold;">when</span> (not (process-live-p proc))
             (kill-buffer (process-buffer proc)))))
      (switch-to-buffer buffer)))
  <span style="font-weight: bold;">:bind</span> ((<span style="font-style: italic;">"C-c J"</span> . dired-double-jump)
         <span style="font-weight: bold;">:package</span> dired
         <span style="font-weight: bold;">:map</span> dired-mode-map
         (<span style="font-style: italic;">"C-c C-c"</span> . compile)
         (<span style="font-style: italic;">"r"</span> . term)
         (<span style="font-style: italic;">"M-@"</span> . shell)
         (<span style="font-style: italic;">"M-*"</span> . eshell)
         (<span style="font-style: italic;">"W"</span> . browse-url-of-dired-file)
         (<span style="font-style: italic;">"@"</span> . dired-run-command)))
(use-package dired-du
  <span style="font-weight: bold;">:commands</span> dired-du-mode)
</pre>
</div>
</div>

<ul class="org-ul">
<li><a id="org579d1c3"></a>dired-column<br />
<div class="outline-text-6" id="text-org579d1c3">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package dired-column
  <span style="font-weight: bold;">:ensure</span> nil
  <span style="font-weight: bold;">:bind</span> (<span style="font-weight: bold;">:package</span> dired
                  <span style="font-weight: bold;">:map</span> dired-mode-map
                  (<span style="font-style: italic;">"o"</span> . dired-column-find-file)))
</pre>
</div>
</div>
</li>

<li><a id="orga2a3a75"></a>dired-subtree<br />
<div class="outline-text-6" id="text-orga2a3a75">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package dired-subtree
  <span style="font-weight: bold;">:bind</span> (<span style="font-weight: bold;">:package</span> dired
                  <span style="font-weight: bold;">:map</span> dired-mode-map
                  (<span style="font-style: italic;">"&lt;tab&gt;"</span> . dired-subtree-toggle)
                  (<span style="font-style: italic;">"TAB"</span> . dired-subtree-toggle)
                  (<span style="font-style: italic;">"&lt;backtab&gt;"</span> . dired-subtree-cycle)))
</pre>
</div>
</div>
</li>

<li><a id="org296aaeb"></a>dired-x<br />
<div class="outline-text-6" id="text-org296aaeb">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package dired-x
  <span style="font-weight: bold;">:ensure</span> nil
  <span style="font-weight: bold;">:hook</span> ((dired-mode . dired-omit-mode)
         (dired-mode . dired-hide-details-mode))
  <span style="font-weight: bold;">:bind</span> ((<span style="font-style: italic;">"s-\\"</span> . dired-jump-other-window)
         <span style="font-weight: bold;">:package</span> dired
         <span style="font-weight: bold;">:map</span> dired-mode-map
         (<span style="font-style: italic;">")"</span> . dired-omit-mode)))
</pre>
</div>
</div>
</li>
</ul>
</li>

<li><a id="org0e6f501"></a>eldoc<br />
<div class="outline-text-5" id="text-org0e6f501">
<p>
Provides some info for the thing at the point.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package eldoc
  <span style="font-weight: bold;">:ensure</span> nil
  <span style="font-weight: bold;">:hook</span> ((emacs-lisp-mode . eldoc-mode)
         (eval-expression-minibuffer-setup . eldoc-mode)
         (lisp-mode-interactive-mode . eldoc-mode)
         (typescript-mode . eldoc-mode)
         (haskell-mode . eldoc-mode)
         (python-mode . eldoc-mode)
         (eshell-mode . eldoc-mode)
         (org-mode . eldoc-mode)))
</pre>
</div>
</div>
</li>

<li><a id="orgcd5f826"></a>electric<br />
<div class="outline-text-5" id="text-orgcd5f826">
<p>
Setup these modes:
</p>

<ul class="org-ul">
<li>electric-quote</li>
<li>electric-indent</li>
<li>electric-layout</li>
</ul>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package electric
  <span style="font-weight: bold;">:ensure</span> nil
  <span style="font-weight: bold;">:if</span> (&gt;= emacs-major-version 25)
  <span style="font-weight: bold;">:hook</span> ((prog-mode . electric-quote-local-mode)
         (text-mode . electric-quote-local-mode)
         (org-mode . electric-quote-local-mode)
         (message-mode . electric-quote-local-mode)
         (prog-mode . electric-indent-local-mode)
         (prog-mode . electric-layout-mode)))
</pre>
</div>
</div>

<ul class="org-ul">
<li><a id="org1c7db7d"></a>elec-pair<br />
<div class="outline-text-6" id="text-org1c7db7d">
<p>
Setup electric-pair-mode for prog-modes. Also disable it when smartparens is
setup.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package elec-pair
  <span style="font-weight: bold;">:ensure</span> nil
  <span style="font-weight: bold;">:if</span> (&gt;= emacs-major-version 25)
  <span style="font-weight: bold;">:hook</span>
   ((prog-mode . electric-pair-local-mode)
    (smartparens-mode . (<span style="font-weight: bold;">lambda</span> ()
      (electric-pair-local-mode -1)))))
</pre>
</div>
</div>
</li>
</ul>
</li>

<li><a id="org859a784"></a>eww<br />
<div class="outline-text-5" id="text-org859a784">
<p>
eww is enabled so we can open files in non-graphical environments.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package eww
  <span style="font-weight: bold;">:ensure</span> nil
  <span style="font-weight: bold;">:if</span> (<span style="font-weight: bold;">and</span> (not window-system)
           (not (string-equal
                  (getenv <span style="font-style: italic;">"TERM_PROGRAM"</span>)
                  <span style="font-style: italic;">"Apple_Terminal"</span>)))
  <span style="font-weight: bold;">:commands</span> eww-browse-url
  <span style="font-weight: bold;">:init</span>
  (<span style="font-weight: bold;">setq</span> browse-url-browser-function 'eww-browse-url))
</pre>
</div>
</div>
</li>
<li><a id="orgc8a6dff"></a>executable<br />
<div class="outline-text-5" id="text-orgc8a6dff">
<p>
Make scripts executable automatically.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package executable
  <span style="font-weight: bold;">:ensure</span> nil
  <span style="font-weight: bold;">:hook</span>
  ((after-save .
    executable-make-buffer-file-executable-if-script-p)))
</pre>
</div>
</div>
</li>

<li><a id="org1daeaf5"></a>ffap<br />
<div class="outline-text-5" id="text-org1daeaf5">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package ffap
  <span style="font-weight: bold;">:bind</span> ((<span style="font-style: italic;">"C-x C-f"</span> . find-file-at-point)
         (<span style="font-style: italic;">"C-x 4 C-f"</span> . ffap-other-window)
         (<span style="font-style: italic;">"C-x C-r"</span> . ffap-read-only)
         (<span style="font-style: italic;">"C-x C-v"</span> . ffap-alternate-file)
         (<span style="font-style: italic;">"C-x 4 f"</span> . ffap-other-window)
         (<span style="font-style: italic;">"C-x 5 f"</span> . ffap-other-frame)
         (<span style="font-style: italic;">"C-x 4 r"</span> . ffap-read-only-other-window)
         (<span style="font-style: italic;">"C-x 5 r"</span> . ffap-read-only-other-frame)
         (<span style="font-style: italic;">"C-x d"</span>  . dired-at-point)
         (<span style="font-style: italic;">"C-x 4 d"</span> . ffap-dired-other-window)
         (<span style="font-style: italic;">"C-x 5 d"</span> . ffap-dired-other-frame)
         (<span style="font-style: italic;">"C-x C-d"</span> . ffap-list-directory))
  <span style="font-weight: bold;">:hook</span> ((gnus-summary-mode . ffap-gnus-hook)
         (gnus-article-mode . ffap-gnus-hook)
         (vm-mode . ffap-ro-mode-hook)
         (rmail-mode . ffap-ro-mode-hook))
  <span style="font-weight: bold;">:ensure</span> nil)
</pre>
</div>
</div>
</li>
<li><a id="org09dce6f"></a>files<br />
<div class="outline-text-5" id="text-org09dce6f">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package files
  <span style="font-weight: bold;">:ensure</span> nil
  <span style="font-weight: bold;">:demand</span>
  <span style="font-weight: bold;">:preface</span>
  (<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">find-file--line-number</span> (orig-fun filename
                                 <span style="font-weight: bold; text-decoration: underline;">&amp;optional</span> wildcards)
    (<span style="font-weight: bold;">save-match-data</span>
      (<span style="font-weight: bold;">let*</span> ((matched (string-match
                        <span style="font-style: italic;">"^</span><span style="font-weight: bold; font-style: italic;">\\</span><span style="font-weight: bold; font-style: italic;">(</span><span style="font-style: italic;">.*</span><span style="font-weight: bold; font-style: italic;">\\</span><span style="font-weight: bold; font-style: italic;">)</span><span style="font-style: italic;">:</span><span style="font-weight: bold; font-style: italic;">\\</span><span style="font-weight: bold; font-style: italic;">(</span><span style="font-style: italic;">[0-9]+</span><span style="font-weight: bold; font-style: italic;">\\</span><span style="font-weight: bold; font-style: italic;">)</span><span style="font-style: italic;">:?$"</span>
                        filename))
             (line-number (<span style="font-weight: bold;">and</span> matched
                            (match-string 2 filename)
                            (string-to-number
                              (match-string 2 filename))))
             (filename (<span style="font-weight: bold;">if</span> matched
                           (match-string 1 filename)
                           filename)))
        (apply orig-fun (list filename wildcards))
        (<span style="font-weight: bold;">when</span> line-number
          <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">goto-line is for interactive use</span>
          (goto-char (point-min))
          (forward-line (1- line-number))))))
  <span style="font-weight: bold;">:config</span>
  (advice-add 'find-file
              <span style="font-weight: bold;">:around</span> #'find-file--line-number))
</pre>
</div>
</div>
</li>

<li><a id="org6cebb9f"></a>flyspell<br />
<div class="outline-text-5" id="text-org6cebb9f">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package flyspell
  <span style="font-weight: bold;">:ensure</span> nil
  <span style="font-weight: bold;">:if</span> (locate-file
       (<span style="font-weight: bold;">if</span> (boundp 'ispell-program-name)
           ispell-program-name <span style="font-style: italic;">"ispell"</span>)
       exec-path)
  <span style="font-weight: bold;">:hook</span> ((text-mode . flyspell-mode)
         (prog-mode . flyspell-prog-mode))
  <span style="font-weight: bold;">:bind</span> (<span style="font-weight: bold;">:map</span> flyspell-mode-map
              (<span style="font-style: italic;">"C-M-i"</span> . nil)))
</pre>
</div>
</div>
</li>

<li><a id="org05352f5"></a>goto-addr<br />
<div class="outline-text-5" id="text-org05352f5">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package goto-addr
  <span style="font-weight: bold;">:ensure</span> nil
  <span style="font-weight: bold;">:hook</span> ((prog-mode . goto-address-prog-mode)
         (git-commit-mode . goto-address-mode)
         (shell-mode . goto-address-mode)))
</pre>
</div>
</div>
</li>

<li><a id="orgace62e5"></a>hl-line<br />
<div class="outline-text-5" id="text-orgace62e5">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package hl-line
  <span style="font-weight: bold;">:ensure</span> nil
  <span style="font-weight: bold;">:hook</span> ((prog-mode . hl-line-mode)
         (org-mode . hl-line-mode)
         (dired-mode . hl-line-mode)))
</pre>
</div>
</div>
</li>
<li><a id="org12c24eb"></a>paren<br />
<div class="outline-text-5" id="text-org12c24eb">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package paren
  <span style="font-weight: bold;">:ensure</span> nil
  <span style="font-weight: bold;">:hook</span> ((prog-mode . show-paren-mode)
         (smartparens-mode . (<span style="font-weight: bold;">lambda</span> () (show-paren-mode -1)))))
</pre>
</div>
</div>
</li>

<li><a id="orge2a1c53"></a>pp<br />
<div class="outline-text-5" id="text-orge2a1c53">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package pp
  <span style="font-weight: bold;">:ensure</span> nil
  <span style="font-weight: bold;">:commands</span> pp-eval-last-sexp
  <span style="font-weight: bold;">:bind</span> (([remap eval-expression] . pp-eval-expression))
  <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">:init</span>
  <span style="font-weight: bold; font-style: italic;">;;</span><span style="font-weight: bold; font-style: italic;">(global-unset-key (kbd "C-x C-e"))</span>
  <span style="font-weight: bold;">:hook</span> ((lisp-mode emacs-lisp-mode) . always-eval-sexp)
  <span style="font-weight: bold;">:preface</span>
  (<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">always-eval-sexp</span> ()
    (define-key (current-local-map)
                (kbd <span style="font-style: italic;">"C-x C-e"</span>)
                'pp-eval-last-sexp)))
</pre>
</div>
</div>
</li>

<li><a id="org53a7eed"></a>prog-mode<br />
<div class="outline-text-5" id="text-org53a7eed">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package prog-mode
  <span style="font-weight: bold;">:ensure</span> nil
  <span style="font-weight: bold;">:hook</span> ((prog-mode . prettify-symbols-mode)
         (lisp-mode . prettify-symbols-lisp)
         (c-mode . prettify-symbols-c)
         (c++-mode . prettify-symbols-c++)
         ((js-mode js2-mode) . prettify-symbols-js)
         (prog-mode . (<span style="font-weight: bold;">lambda</span> ()
           (<span style="font-weight: bold;">setq-local</span> scroll-margin 3))))
  <span style="font-weight: bold;">:preface</span>
  (<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">prettify-symbols-prog</span> ()
    (<span style="font-weight: bold;">push</span> '(<span style="font-style: italic;">"&lt;="</span> . ?&#8804;) prettify-symbols-alist)
    (<span style="font-weight: bold;">push</span> '(<span style="font-style: italic;">"&gt;="</span> . ?&#8805;) prettify-symbols-alist))
  (<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">prettify-symbols-lisp</span> ()
    (<span style="font-weight: bold;">push</span> '(<span style="font-style: italic;">"/="</span> . ?&#8800;) prettify-symbols-alist)
    (<span style="font-weight: bold;">push</span> '(<span style="font-style: italic;">"sqrt"</span> . ?&#8730;) prettify-symbols-alist)
    (<span style="font-weight: bold;">push</span> '(<span style="font-style: italic;">"not"</span> . ?&#172;) prettify-symbols-alist)
    (<span style="font-weight: bold;">push</span> '(<span style="font-style: italic;">"and"</span> . ?&#8743;) prettify-symbols-alist)
    (<span style="font-weight: bold;">push</span> '(<span style="font-style: italic;">"or"</span> . ?&#8744;) prettify-symbols-alist))
  (<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">prettify-symbols-c</span> ()
    (<span style="font-weight: bold;">push</span> '(<span style="font-style: italic;">"&lt;="</span> . ?&#8804;) prettify-symbols-alist)
    (<span style="font-weight: bold;">push</span> '(<span style="font-style: italic;">"&gt;="</span> . ?&#8805;) prettify-symbols-alist)
    (<span style="font-weight: bold;">push</span> '(<span style="font-style: italic;">"!="</span> . ?&#8800;) prettify-symbols-alist)
    (<span style="font-weight: bold;">push</span> '(<span style="font-style: italic;">"&amp;&amp;"</span> . ?&#8743;) prettify-symbols-alist)
    (<span style="font-weight: bold;">push</span> '(<span style="font-style: italic;">"||"</span> . ?&#8744;) prettify-symbols-alist)
    (<span style="font-weight: bold;">push</span> '(<span style="font-style: italic;">"&gt;&gt;"</span> . ?&#187;) prettify-symbols-alist)
    (<span style="font-weight: bold;">push</span> '(<span style="font-style: italic;">"&lt;&lt;"</span> . ?&#171;) prettify-symbols-alist))
  (<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">prettify-symbols-c++</span> ()
    (<span style="font-weight: bold;">push</span> '(<span style="font-style: italic;">"&lt;="</span> . ?&#8804;) prettify-symbols-alist)
    (<span style="font-weight: bold;">push</span> '(<span style="font-style: italic;">"&gt;="</span> . ?&#8805;) prettify-symbols-alist)
    (<span style="font-weight: bold;">push</span> '(<span style="font-style: italic;">"!="</span> . ?&#8800;) prettify-symbols-alist)
    (<span style="font-weight: bold;">push</span> '(<span style="font-style: italic;">"&amp;&amp;"</span> . ?&#8743;) prettify-symbols-alist)
    (<span style="font-weight: bold;">push</span> '(<span style="font-style: italic;">"||"</span> . ?&#8744;) prettify-symbols-alist)
    (<span style="font-weight: bold;">push</span> '(<span style="font-style: italic;">"&gt;&gt;"</span> . ?&#187;) prettify-symbols-alist)
    (<span style="font-weight: bold;">push</span> '(<span style="font-style: italic;">"&lt;&lt;"</span> . ?&#171;) prettify-symbols-alist)
    (<span style="font-weight: bold;">push</span> '(<span style="font-style: italic;">"-&gt;"</span> . ?&#8594;) prettify-symbols-alist))
  (<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">prettify-symbols-js</span> ()
    (<span style="font-weight: bold;">push</span> '(<span style="font-style: italic;">"function"</span> . ?&#955;) prettify-symbols-alist)
    (<span style="font-weight: bold;">push</span> '(<span style="font-style: italic;">"=&gt;"</span> . ?&#8658;) prettify-symbols-alist)))
</pre>
</div>
</div>
</li>

<li><a id="org33f566c"></a>savehist-mode<br />
<div class="outline-text-5" id="text-org33f566c">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package savehist
  <span style="font-weight: bold;">:ensure</span> nil
  <span style="font-weight: bold;">:hook</span> (after-init . savehist-mode))
</pre>
</div>
</div>
</li>

<li><a id="orgd2c5c56"></a>saveplace-mode<br />
<div class="outline-text-5" id="text-orgd2c5c56">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package saveplace
  <span style="font-weight: bold;">:ensure</span> nil
  <span style="font-weight: bold;">:if</span> (&gt;= emacs-major-version 25)
  <span style="font-weight: bold;">:hook</span> (after-init . save-place-mode))
</pre>
</div>
</div>
</li>

<li><a id="org34f0606"></a>Shell<br />
<div class="outline-text-5" id="text-org34f0606">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package shell
  <span style="font-weight: bold;">:ensure</span> nil
  <span style="font-weight: bold;">:bind</span> ((<span style="font-style: italic;">"C-c C-s"</span> . shell)
         (<span style="font-style: italic;">"H-s"</span> . shell)
         (<span style="font-style: italic;">"M-@"</span> . shell))
  <span style="font-weight: bold;">:hook</span> ((shell-mode . ansi-color-for-comint-mode-on)
         (shell-mode . dirtrack-mode)
         (shell-mode . pcomplete-shell-setup)
         (shell-mode . use-histfile)
         )
  <span style="font-weight: bold;">:preface</span>
  (<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">use-histfile</span> ()
    (turn-on-comint-history
     (expand-file-name <span style="font-style: italic;">"sh-history"</span> user-emacs-directory))))
</pre>
</div>
</div>
</li>

<li><a id="org79fc57c"></a>simple<br />
<div class="outline-text-5" id="text-org79fc57c">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package simple
  <span style="font-weight: bold;">:ensure</span> nil
  <span style="font-weight: bold;">:demand</span>
  <span style="font-weight: bold;">:commands</span> (column-number-mode auto-fill-mode)
  <span style="font-weight: bold;">:bind</span>
  ((<span style="font-style: italic;">"C-`"</span> . list-processes)
   <span style="font-weight: bold;">:map</span> minibuffer-local-map
   (<span style="font-style: italic;">"&lt;escape&gt;"</span>         . abort-recursive-edit)
   (<span style="font-style: italic;">"M-TAB"</span>    . previous-complete-history-element)
   (<span style="font-style: italic;">"&lt;M-S-tab&gt;"</span> . next-complete-history-element))
  <span style="font-weight: bold;">:hook</span> ((text-mode . visual-line-mode))
  <span style="font-weight: bold;">:config</span> (column-number-mode))
</pre>
</div>
</div>
</li>
<li><a id="org9142d30"></a>subword<br />
<div class="outline-text-5" id="text-org9142d30">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package subword
  <span style="font-weight: bold;">:ensure</span> nil
  <span style="font-weight: bold;">:hook</span> ((java-mode . subword-mode)))
</pre>
</div>
</div>
</li>

<li><a id="org3603116"></a>term<br />
<div class="outline-text-5" id="text-org3603116">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package term
  <span style="font-weight: bold;">:ensure</span> nil
  <span style="font-weight: bold;">:commands</span> (term-mode term-char-mode)
  <span style="font-weight: bold;">:hook</span> ((term-mode .
           (<span style="font-weight: bold;">lambda</span> ()
             (<span style="font-weight: bold;">setq</span> term-prompt-regexp
                   <span style="font-style: italic;">"^[</span><span style="font-style: italic;">^</span><span style="font-style: italic;">#$%&gt;\n]*[#$%&gt;] *"</span>)
             (<span style="font-weight: bold;">setq-local</span> transient-mark-mode nil)
             (auto-fill-mode -1))))
  <span style="font-weight: bold;">:preface</span>
  (autoload 'tramp-tramp-file-p <span style="font-style: italic;">"tramp"</span>)
  (autoload 'tramp-dissect-file-name <span style="font-style: italic;">"tramp"</span>))

(use-package tramp-term
  <span style="font-weight: bold;">:commands</span> tramp-term)
</pre>
</div>
</div>
</li>

<li><a id="org383e023"></a>text-mode<br />
<div class="outline-text-5" id="text-org383e023">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package text-mode
  <span style="font-weight: bold;">:no-require</span>
  <span style="font-weight: bold;">:ensure</span> nil
  <span style="font-weight: bold;">:hook</span> ((text-mode . turn-on-auto-fill)))
</pre>
</div>
</div>
</li>

<li><a id="org525f304"></a>time<br />
<div class="outline-text-5" id="text-org525f304">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package time
  <span style="font-weight: bold;">:demand</span>
  <span style="font-weight: bold;">:ensure</span> nil
  <span style="font-weight: bold;">:config</span> (display-time-mode))
</pre>
</div>
</div>
</li>

<li><a id="org5c584c6"></a>url-handlers<br />
<div class="outline-text-5" id="text-org5c584c6">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package url-handlers
  <span style="font-weight: bold;">:ensure</span> nil
  <span style="font-weight: bold;">:demand</span>
  <span style="font-weight: bold;">:commands</span> url-handler-mode
  <span style="font-weight: bold;">:config</span> (url-handler-mode))
</pre>
</div>
</div>
</li>

<li><a id="orgecd0077"></a>which-func<br />
<div class="outline-text-5" id="text-orgecd0077">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package which-func
  <span style="font-weight: bold;">:ensure</span> nil
  <span style="font-weight: bold;">:commands</span> which-function-mode
  <span style="font-weight: bold;">:demand</span>
  <span style="font-weight: bold;">:config</span> (which-function-mode))
</pre>
</div>
</div>
</li>
<li><a id="org3aee3e0"></a>whitespace<br />
<div class="outline-text-5" id="text-org3aee3e0">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package whitespace
  <span style="font-weight: bold;">:disabled</span>
  <span style="font-weight: bold;">:ensure</span> nil
  <span style="font-weight: bold;">:hook</span> (prog-mode . whitespace-mode))
</pre>
</div>
</div>
</li>
</ul>
</div>
<div id="outline-container-orgb43c537" class="outline-4">
<h4 id="orgb43c537">Programming languages</h4>
<div class="outline-text-4" id="text-orgb43c537">
<p>
Each <code>use-package</code> declaration corresponds to <code>major modes</code> in Emacs lingo.
Each language will at least one of these major modes as well as associated
packages (for completion, syntax checking, etc.)
</p>
</div>

<ul class="org-ul">
<li><a id="org0cdbbde"></a>C/C++<br />
<div class="outline-text-5" id="text-org0cdbbde">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package cc-mode
  <span style="font-weight: bold;">:ensure</span> nil
  <span style="font-weight: bold;">:mode</span> ((<span style="font-style: italic;">"\\.h</span><span style="font-weight: bold; font-style: italic;">\\</span><span style="font-weight: bold; font-style: italic;">(</span><span style="font-style: italic;">h?</span><span style="font-weight: bold; font-style: italic;">\\</span><span style="font-weight: bold; font-style: italic;">|</span><span style="font-style: italic;">xx</span><span style="font-weight: bold; font-style: italic;">\\</span><span style="font-weight: bold; font-style: italic;">|</span><span style="font-style: italic;">pp</span><span style="font-weight: bold; font-style: italic;">\\</span><span style="font-weight: bold; font-style: italic;">)</span><span style="font-style: italic;">\\'"</span> . c++-mode)
         (<span style="font-style: italic;">"\\.m\\'"</span> . c-mode)
         (<span style="font-style: italic;">"\\.c\\'"</span> . c-mode)
         (<span style="font-style: italic;">"\\.cpp\\'"</span> . c++-mode)
         (<span style="font-style: italic;">"\\.c++\\'"</span> . c++-mode)
         (<span style="font-style: italic;">"\\.mm\\'"</span> . c++-mode)))
</pre>
</div>
</div>

<ul class="org-ul">
<li><a id="orge6000f8"></a>Irony<br />
<div class="outline-text-6" id="text-orge6000f8">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package irony
  <span style="font-weight: bold;">:preface</span>
  (autoload 'file-remote-p <span style="font-style: italic;">"files"</span>)
  (<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">irony-mode-disable-remote</span> ()
    <span style="font-style: italic;">"Disabled irony in remote buffers."</span>
    (<span style="font-weight: bold;">when</span> (<span style="font-weight: bold;">and</span> buffer-file-name
               (file-remote-p buffer-file-name))
      (irony-mode -1)))
  <span style="font-weight: bold;">:hook</span> (((c++-mode c-mode objc-mode) .
          irony-mode-disable-remote)
         ((c++-mode c-mode objc-mode) . irony-mode)))
</pre>
</div>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package irony-cdb
    <span style="font-weight: bold;">:ensure</span> nil
    <span style="font-weight: bold;">:hook</span> (irony-mode . irony-cdb-autosetup-compile-options))
</pre>
</div>
</div>

<ul class="org-ul">
<li><a id="org064d55b"></a>flycheck-irony<br />
<div class="outline-text-7" id="text-org064d55b">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package flycheck-irony
  <span style="font-weight: bold;">:hook</span> (flycheck-mode . flycheck-irony-setup))
</pre>
</div>
</div>
</li>

<li><a id="org913d2d3"></a>irony-eldoc<br />
<div class="outline-text-7" id="text-org913d2d3">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package irony-eldoc
  <span style="font-weight: bold;">:hook</span> (irony-mode . irony-eldoc))
</pre>
</div>
</div>
</li>
</ul>
</li>
</ul>
</li>

<li><a id="orge3ec250"></a>CoffeeScript<br />
<div class="outline-text-5" id="text-orge3ec250">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package coffee-mode
  <span style="font-weight: bold;">:mode</span> ((<span style="font-style: italic;">"\\.coffee\\'"</span> . coffee-mode)))
</pre>
</div>
</div>
</li>

<li><a id="org08cceab"></a>CSS<br />
<div class="outline-text-5" id="text-org08cceab">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package css-mode
  <span style="font-weight: bold;">:ensure</span> nil
  <span style="font-weight: bold;">:mode</span> <span style="font-style: italic;">"\\.css\\'"</span>)
</pre>
</div>
</div>
</li>

<li><a id="org7619ad9"></a>CSV<br />
<div class="outline-text-5" id="text-org7619ad9">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package csv-mode
  <span style="font-weight: bold;">:mode</span> <span style="font-style: italic;">"\\.csv\\'"</span>)
</pre>
</div>
</div>
</li>

<li><a id="org4745e2a"></a>ELF<br />
<div class="outline-text-5" id="text-org4745e2a">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package elf-mode
  <span style="font-weight: bold;">:magic</span> (<span style="font-style: italic;">"&#127;ELF"</span> . elf-mode))
</pre>
</div>
</div>
</li>

<li><a id="orge757e29"></a>Emacs speaks statistics<br />
<div class="outline-text-5" id="text-orge757e29">
<p>
<a href="https://ess.r-project.org">Website</a>
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package ess-site
  <span style="font-weight: bold;">:ensure</span> ess
  <span style="font-weight: bold;">:no-require</span>
  <span style="font-weight: bold;">:interpreter</span> ((<span style="font-style: italic;">"Rscript"</span> . r-mode)
                (<span style="font-style: italic;">"r"</span> . r-mode))
  <span style="font-weight: bold;">:mode</span> ((<span style="font-style: italic;">"\\.sp\\'"</span>          . S-mode)
         (<span style="font-style: italic;">"/R/.*\\.q\\'"</span>      . R-mode)
         (<span style="font-style: italic;">"\\.[qsS]\\'"</span>       . S-mode)
         (<span style="font-style: italic;">"\\.ssc\\'"</span>         . S-mode)
         (<span style="font-style: italic;">"\\.SSC\\'"</span>         . S-mode)
         (<span style="font-style: italic;">"\\.[rR]\\'"</span>        . R-mode)
         (<span style="font-style: italic;">"\\.[rR]nw\\'"</span>      . Rnw-mode)
         (<span style="font-style: italic;">"\\.[sS]nw\\'"</span>      . Snw-mode)
         (<span style="font-style: italic;">"\\.[rR]profile\\'"</span> . R-mode)
         (<span style="font-style: italic;">"NAMESPACE\\'"</span>      . R-mode)
         (<span style="font-style: italic;">"CITATION\\'"</span>       . R-mode)
         (<span style="font-style: italic;">"\\.omg\\'"</span>         . omegahat-mode)
         (<span style="font-style: italic;">"\\.hat\\'"</span>         . omegahat-mode)
         (<span style="font-style: italic;">"\\.lsp\\'"</span>         . XLS-mode)
         (<span style="font-style: italic;">"\\.do\\'"</span>          . STA-mode)
         (<span style="font-style: italic;">"\\.ado\\'"</span>         . STA-mode)
         (<span style="font-style: italic;">"\\.[Ss][Aa][Ss]\\'"</span>        . SAS-mode)
         (<span style="font-style: italic;">"\\.[Ss]t\\'"</span>       . S-transcript-mode)
         (<span style="font-style: italic;">"\\.Sout"</span>           . S-transcript-mode)
         (<span style="font-style: italic;">"\\.[Rr]out"</span>        . R-transcript-mode)
         (<span style="font-style: italic;">"\\.Rd\\'"</span>          . Rd-mode)
         (<span style="font-style: italic;">"\\.[Bb][Uu][Gg]\\'"</span>         . ess-bugs-mode)
         (<span style="font-style: italic;">"\\.[Bb][Oo][Gg]\\'"</span>         . ess-bugs-mode)
         (<span style="font-style: italic;">"\\.[Bb][Mm][Dd]\\'"</span>         . ess-bugs-mode)
         (<span style="font-style: italic;">"\\.[Jj][Aa][Gg]\\'"</span>         . ess-jags-mode)
         (<span style="font-style: italic;">"\\.[Jj][Oo][Gg]\\'"</span>         . ess-jags-mode)
         (<span style="font-style: italic;">"\\.[Jj][Mm][Dd]\\'"</span>         . ess-jags-mode)
         ))
</pre>
</div>
</div>
</li>

<li><a id="orgcf042a7"></a>Go<br />
<div class="outline-text-5" id="text-orgcf042a7">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package go-mode
  <span style="font-weight: bold;">:mode</span> <span style="font-style: italic;">"\\.go\\'"</span>)
</pre>
</div>
</div>
</li>

<li><a id="org2e679f0"></a>HAML<br />
<div class="outline-text-5" id="text-org2e679f0">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package haml-mode
  <span style="font-weight: bold;">:mode</span> <span style="font-style: italic;">"\\.haml\\'"</span>)
</pre>
</div>
</div>
</li>

<li><a id="org9460ab8"></a>Haskell<br />
<ul class="org-ul">
<li><a id="org01d0080"></a>ghc<br />
<div class="outline-text-6" id="text-org01d0080">
<p>
Note: this needs ghc-mod to be in PATH to work properly.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package ghc
  <span style="font-weight: bold;">:if</span> (locate-file <span style="font-style: italic;">"ghc-mod"</span> exec-path)
  <span style="font-weight: bold;">:hook</span> ((haskell-mode . ghc-init)
         (haskell-mode . ghc-comp-init)))
</pre>
</div>
</div>
</li>
<li><a id="org1da6a5e"></a>haskell-mode<br />
<div class="outline-text-6" id="text-org1da6a5e">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package haskell
  <span style="font-weight: bold;">:preface</span>
  (load <span style="font-style: italic;">"haskell-mode-autoloads"</span> t t)
  <span style="font-weight: bold;">:ensure</span> haskell-mode
  <span style="font-weight: bold;">:mode</span> ((<span style="font-style: italic;">"\\.hs\\'"</span> . haskell-mode)
         (<span style="font-style: italic;">"\\.cabal\\'"</span> . haskell-cabal-mode))
  <span style="font-weight: bold;">:hook</span> ((haskell-mode . subword-mode)
         (haskell-mode . flyspell-prog-mode)
         <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">(haskell-mode . haskell-indentation-mode)</span>
         <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">(haskell-mode . haskell-indent-mode)</span>
         <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">(haskell-mode . imenu-add-menubar-index)</span>
         <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">(haskell-mode .</span>
         <span style="font-weight: bold; font-style: italic;">;;          </span><span style="font-weight: bold; font-style: italic;">(lambda ()</span>
         <span style="font-weight: bold; font-style: italic;">;;            </span><span style="font-weight: bold; font-style: italic;">(autoload 'haskell-doc-current-info</span>
         <span style="font-weight: bold; font-style: italic;">;;              </span><span style="font-weight: bold; font-style: italic;">"haskell-doc")</span>
         <span style="font-weight: bold; font-style: italic;">;;            </span><span style="font-weight: bold; font-style: italic;">(setq-local eldoc-documentation-function</span>
         <span style="font-weight: bold; font-style: italic;">;;                        </span><span style="font-weight: bold; font-style: italic;">'haskell-doc-current-info)))</span>
         )
  <span style="font-weight: bold;">:init</span>
  (add-to-list 'completion-ignored-extensions <span style="font-style: italic;">".hi"</span>))
</pre>
</div>
</div>
</li>

<li><a id="orgd2f08d2"></a>dante<br />
<div class="outline-text-6" id="text-orgd2f08d2">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package dante
  <span style="font-weight: bold;">:ensure</span> t
  <span style="font-weight: bold;">:after</span> haskell-mode
  <span style="font-weight: bold;">:commands</span> 'dante-mode
  <span style="font-weight: bold;">:hook</span> ((haskell-mode . dante-mode)
         (dante-mode . (<span style="font-weight: bold;">lambda</span> () (flycheck-add-next-checker 'haskell-dante '(warning . haskell-hlint)))))
  <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">:config (flycheck-add-next-checker 'haskell-dante '(warning . haskell-hlint))</span>
  )
</pre>
</div>
</div>
</li>

<li><a id="org6a25246"></a>haskell-interactive-mode<br />
<div class="outline-text-6" id="text-org6a25246">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package haskell-interactive-mode
  <span style="font-weight: bold;">:disabled</span>
  <span style="font-weight: bold;">:ensure</span> nil
  <span style="font-weight: bold;">:hook</span> (haskell-mode . interactive-haskell-mode))
</pre>
</div>
</div>
</li>
</ul>
</li>

<li><a id="orgc1df77d"></a>Java<br />
<ul class="org-ul">
<li><a id="org4ba6286"></a>jdee<br />
<div class="outline-text-6" id="text-org4ba6286">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package jdee
  <span style="font-weight: bold;">:mode</span> (<span style="font-style: italic;">"\\.java\\'"</span> . jdee-mode)
  <span style="font-weight: bold;">:bind</span> (<span style="font-weight: bold;">:package</span> jdee
         <span style="font-weight: bold;">:map</span> jdee-mode-map
         (<span style="font-style: italic;">"&lt;s-mouse-1&gt;"</span> . jdee-open-class-at-event)))
</pre>
</div>
</div>
</li>
</ul>
</li>

<li><a id="orgd7edde3"></a>JavaScript<br />
<ul class="org-ul">
<li><a id="org80875a3"></a>indium<br />
<div class="outline-text-6" id="text-org80875a3">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package indium
  <span style="font-weight: bold;">:if</span> (&gt;= emacs-major-version 25)
  <span style="font-weight: bold;">:mode</span> (<span style="font-style: italic;">"\\.js\\'"</span> . indium-mode))
</pre>
</div>
</div>
</li>

<li><a id="orge83b53c"></a>js2-mode<br />
<div class="outline-text-6" id="text-orge83b53c">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package js2-mode
  <span style="font-weight: bold;">:mode</span> ((<span style="font-style: italic;">"\\.js\\'"</span> . js2-mode)
         (<span style="font-style: italic;">"\\.es6\\'"</span> . js2-mode)
         (<span style="font-style: italic;">"\\.ejs\\'"</span> . js2-mode))
  <span style="font-weight: bold;">:interpreter</span> <span style="font-style: italic;">"node"</span>)
</pre>
</div>
</div>
<ul class="org-ul">
<li><a id="org95dfe2b"></a>js2-imenu-extras<br />
<div class="outline-text-7" id="text-org95dfe2b">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package js2-imenu-extras
  <span style="font-weight: bold;">:ensure</span> nil
  <span style="font-weight: bold;">:hook</span> (js2-mode . js2-imenu-extras-mode))
</pre>
</div>
</div>
</li>
</ul>
</li>
<li><a id="org100be5d"></a>tern<br />
<div class="outline-text-6" id="text-org100be5d">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package tern
  <span style="font-weight: bold;">:if</span> (locate-file <span style="font-style: italic;">"tern"</span> exec-path)
  <span style="font-weight: bold;">:hook</span> (js2-mode . tern-mode))
</pre>
</div>
</div>
</li>
</ul>
</li>

<li><a id="orgf74e0c4"></a>JSON<br />
<div class="outline-text-5" id="text-orgf74e0c4">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package json-mode
  <span style="font-weight: bold;">:mode</span> ((<span style="font-style: italic;">"\\.bowerrc$"</span>     . json-mode)
         (<span style="font-style: italic;">"\\.jshintrc$"</span>    . json-mode)
         (<span style="font-style: italic;">"\\.json_schema$"</span> . json-mode)
         (<span style="font-style: italic;">"\\.json\\'"</span> . json-mode))
  <span style="font-weight: bold;">:bind</span> (<span style="font-weight: bold;">:package</span> json-mode-map
         <span style="font-weight: bold;">:map</span> json-mode-map
         (<span style="font-style: italic;">"C-c &lt;tab&gt;"</span> . json-mode-beautify))
  <span style="font-weight: bold;">:config</span>
  (make-local-variable 'js-indent-level))
</pre>
</div>
</div>
</li>

<li><a id="org6416b91"></a>LaTeX<br />
<ul class="org-ul">
<li><a id="org648c31a"></a>auctex<br />
<div class="outline-text-6" id="text-org648c31a">
<p>
Auctex provides some helpful tools for working with LaTeX.
</p>
</div>

<ul class="org-ul">
<li><a id="org3c22993"></a>tex-site<br />
<div class="outline-text-7" id="text-org3c22993">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package tex-site
  <span style="font-weight: bold;">:ensure</span> auctex
  <span style="font-weight: bold;">:no-require</span>
  <span style="font-weight: bold;">:mode</span> (<span style="font-style: italic;">"\\.tex\\'"</span> . TeX-latex-mode))
</pre>
</div>
</div>
</li>
<li><a id="org512373b"></a>tex-mode<br />
<div class="outline-text-7" id="text-org512373b">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package tex-mode
  <span style="font-weight: bold;">:ensure</span> nil
  <span style="font-weight: bold;">:hook</span> (TeX-mode . latex-electric-env-pair-mode))
</pre>
</div>
</div>
</li>
</ul>
</li>
</ul>
</li>
<li><a id="org2032be8"></a>Lisp<br />
<div class="outline-text-5" id="text-org2032be8">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package elisp-mode
  <span style="font-weight: bold;">:ensure</span> nil
  <span style="font-weight: bold;">:interpreter</span> ((<span style="font-style: italic;">"emacs"</span> . emacs-lisp-mode)))
</pre>
</div>
</div>

<ul class="org-ul">
<li><a id="org021efa0"></a>ielm<br />
<div class="outline-text-6" id="text-org021efa0">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package ielm
  <span style="font-weight: bold;">:ensure</span> nil
  <span style="font-weight: bold;">:bind</span> (<span style="font-style: italic;">"C-c :"</span> . ielm))
</pre>
</div>
</div>
</li>
</ul>
</li>

<li><a id="org15f942b"></a>Mach-O<br />
<div class="outline-text-5" id="text-org15f942b">
<p>
View macho binaries read-only. To view in Hexl-mode raw binaries, run M-x
macho-mode to toggle then M-x hexl-mode.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package macho-mode
  <span style="font-weight: bold;">:ensure</span> nil
  <span style="font-weight: bold;">:magic</span> ((<span style="font-style: italic;">"\xFE\xED\xFA\xCE"</span> . macho-mode)
          (<span style="font-style: italic;">"\xFE\xED\xFA\xCF"</span> . macho-mode)
          (<span style="font-style: italic;">"\xCE\xFA\xED\xFE"</span> . macho-mode)
          (<span style="font-style: italic;">"\xCF\xFA\xED\xFE"</span> . macho-mode)))
</pre>
</div>
</div>
</li>

<li><a id="org8452599"></a>Markdown<br />
<ul class="org-ul">
<li><a id="org3bc54ba"></a>markdown-mode<br />
<div class="outline-text-6" id="text-org3bc54ba">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package markdown-mode
  <span style="font-weight: bold;">:mode</span> ((<span style="font-style: italic;">"README\\.md\\'"</span> . gfm-mode)
         (<span style="font-style: italic;">"\\.md\\'"</span>       . markdown-mode)
         (<span style="font-style: italic;">"\\.markdown\\'"</span> . gfm-mode)))
</pre>
</div>
</div>
</li>
</ul>
</li>

<li><a id="orgd2f408b"></a>git-modes<br />
<ul class="org-ul">
<li><a id="orgaa52c1d"></a>gitattributes<br />
<div class="outline-text-6" id="text-orgaa52c1d">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package gitattributes-mode
  <span style="font-weight: bold;">:mode</span> ((<span style="font-style: italic;">"/\\.gitattributes\\'"</span>  . gitattributes-mode)
         (<span style="font-style: italic;">"/info/attributes\\'"</span>   . gitattributes-mode)
         (<span style="font-style: italic;">"/git/attributes\\'"</span>    . gitattributes-mode)))
</pre>
</div>
</div>
</li>

<li><a id="org7e9e49e"></a>gitconfig<br />
<div class="outline-text-6" id="text-org7e9e49e">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package gitconfig-mode
  <span style="font-weight: bold;">:mode</span> ((<span style="font-style: italic;">"/\\.gitconfig\\'"</span>      . gitconfig-mode)
         (<span style="font-style: italic;">"/\\.git/config\\'"</span>     . gitconfig-mode)
         (<span style="font-style: italic;">"/modules/.*/config\\'"</span> . gitconfig-mode)
         (<span style="font-style: italic;">"/git/config\\'"</span>        . gitconfig-mode)
         (<span style="font-style: italic;">"/\\.gitmodules\\'"</span>     . gitconfig-mode)
         (<span style="font-style: italic;">"/etc/gitconfig\\'"</span>     . gitconfig-mode)))
</pre>
</div>
</div>
</li>

<li><a id="orga3987b6"></a>gitignore<br />
<div class="outline-text-6" id="text-orga3987b6">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package gitignore-mode
  <span style="font-weight: bold;">:mode</span> ((<span style="font-style: italic;">"/\\.gitignore\\'"</span>      . gitignore-mode)
         (<span style="font-style: italic;">"/info/exclude\\'"</span>      . gitignore-mode)
         (<span style="font-style: italic;">"/git/ignore\\'"</span>        . gitignore-mode)))
</pre>
</div>
</div>
</li>
</ul>
</li>

<li><a id="org1873e64"></a>restclient<br />
<div class="outline-text-5" id="text-org1873e64">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package restclient
  <span style="font-weight: bold;">:mode</span> ((<span style="font-style: italic;">"\\.rest\\'"</span> . restclient-mode)
         (<span style="font-style: italic;">"\\.restclient\\'"</span> . restclient-mode)))
</pre>
</div>
</div>
</li>

<li><a id="org27b8b66"></a>Nix<br />
<ul class="org-ul">
<li><a id="orgc46b113"></a>nix-mode<br />
<div class="outline-text-6" id="text-orgc46b113">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package nix-mode
  <span style="font-weight: bold;">:mode</span> <span style="font-style: italic;">"\\.nix\\'"</span>)
</pre>
</div>
</div>
</li>

<li><a id="org5b327ed"></a>nix-shell<br />
<div class="outline-text-6" id="text-org5b327ed">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package nix-shell
  <span style="font-weight: bold;">:ensure</span> nil
  <span style="font-weight: bold;">:commands</span> (nix-shell nix-unpack))
</pre>
</div>
</div>
</li>
<li><a id="org3458d9e"></a>nix-drv-mode<br />
<div class="outline-text-6" id="text-org3458d9e">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package nix-drv-mode
  <span style="font-weight: bold;">:disabled</span>
  <span style="font-weight: bold;">:ensure</span> nil
  <span style="font-weight: bold;">:mode</span> <span style="font-style: italic;">"\\.drv\\'"</span>)
</pre>
</div>
</div>
</li>
<li><a id="orgda54234"></a>nix-buffer<br />
<div class="outline-text-6" id="text-orgda54234">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package nix-buffer
  <span style="font-weight: bold;">:commands</span> nix-buffer
  <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">:preface</span>
  <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">(defun turn-on-nix-buffer ()</span>
  <span style="font-weight: bold; font-style: italic;">;;   </span><span style="font-weight: bold; font-style: italic;">(when (and (not noninteractive)</span>
  <span style="font-weight: bold; font-style: italic;">;;         </span><span style="font-weight: bold; font-style: italic;">(not (eq (aref (buffer-name) 0) ?\s))</span>
  <span style="font-weight: bold; font-style: italic;">;;         </span><span style="font-weight: bold; font-style: italic;">(not (file-remote-p default-directory)))</span>
  <span style="font-weight: bold; font-style: italic;">;;     </span><span style="font-weight: bold; font-style: italic;">(nix-buffer)))</span>
  <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">:hook (after-change-major-mode . turn-on-nix-buffer)</span>
  )
</pre>
</div>
</div>
</li>
<li><a id="org23e2852"></a>nix-update<br />
<div class="outline-text-6" id="text-org23e2852">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package nix-update
  <span style="font-weight: bold;">:disabled</span>
  <span style="font-weight: bold;">:commands</span> nix-update-fetch
  <span style="font-weight: bold;">:ensure</span> nil
  <span style="font-weight: bold;">:bind</span> ((<span style="font-style: italic;">"C-. u"</span> . nix-update-fetch)))
</pre>
</div>
</div>
</li>
</ul>
</li>
<li><a id="orgc592883"></a>PHP<br />
<div class="outline-text-5" id="text-orgc592883">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package php-mode
  <span style="font-weight: bold;">:mode</span> <span style="font-style: italic;">"\\.php\\'"</span>)
</pre>
</div>
</div>
</li>

<li><a id="org48e21bd"></a>Proof General<br />
<div class="outline-text-5" id="text-org48e21bd">
<p>
<a href="https://proofgeneral.github.io">Website</a>
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package proof-site
  <span style="font-weight: bold;">:ensure</span> proofgeneral
  <span style="font-weight: bold;">:demand</span>
  <span style="font-weight: bold;">:if</span> (not needs-package-init))
</pre>
</div>
</div>
</li>

<li><a id="org6814acf"></a>Python<br />
<ul class="org-ul">
<li><a id="orgf185e8a"></a>Anaconda<br />
<div class="outline-text-6" id="text-orgf185e8a">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package anaconda-mode
  <span style="font-weight: bold;">:hook</span> ((python-mode . anaconda-mode)
         (python-mode . anaconda-eldoc-mode)))
</pre>
</div>
</div>
</li>

<li><a id="org25c61cb"></a>python-mode<br />
<div class="outline-text-6" id="text-org25c61cb">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package python
  <span style="font-weight: bold;">:ensure</span> nil
  <span style="font-weight: bold;">:mode</span> (<span style="font-style: italic;">"\\.py\\'"</span> . python-mode)
  <span style="font-weight: bold;">:interpreter</span> (<span style="font-style: italic;">"python"</span> . python-mode))
</pre>
</div>
</div>
</li>

<li><a id="orgeb5bb0c"></a>jedi<br />
<div class="outline-text-6" id="text-orgeb5bb0c">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package jedi
  <span style="font-weight: bold;">:disabled</span>
  <span style="font-weight: bold;">:hook</span> ((python-mode . jedi:setup))
  <span style="font-weight: bold;">:config</span>
  (<span style="font-weight: bold;">setq</span> jedi:complete-on-dot t))
</pre>
</div>
</div>
</li>
<li><a id="org7fe3669"></a>elpy<br />
<div class="outline-text-6" id="text-org7fe3669">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package elpy
  <span style="font-weight: bold;">:disabled</span>
  <span style="font-weight: bold;">:mode</span> (<span style="font-style: italic;">"\\.py\\'"</span> . elpy-mode))
</pre>
</div>
</div>
</li>
</ul>
</li>

<li><a id="org827f61e"></a>Ruby<br />
<div class="outline-text-5" id="text-org827f61e">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package ruby-mode
  <span style="font-weight: bold;">:ensure</span> nil
  <span style="font-weight: bold;">:mode</span> (<span style="font-style: italic;">"\\.rb\\'"</span> . ruby-mode)
  <span style="font-weight: bold;">:interpreter</span> (<span style="font-style: italic;">"ruby"</span> . ruby-mode))
</pre>
</div>
</div>
</li>

<li><a id="org37ba68b"></a>Rust<br />
<div class="outline-text-5" id="text-org37ba68b">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package rust-mode
  <span style="font-weight: bold;">:mode</span> <span style="font-style: italic;">"\\.rs\\'"</span>)
</pre>
</div>
</div>
</li>

<li><a id="orgff415d0"></a>SASS<br />
<div class="outline-text-5" id="text-orgff415d0">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package sass-mode
  <span style="font-weight: bold;">:mode</span> <span style="font-style: italic;">"\\.sass\\'"</span>)
</pre>
</div>
</div>
</li>

<li><a id="org60f58f5"></a>Scala<br />
<div class="outline-text-5" id="text-org60f58f5">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package scala-mode
  <span style="font-weight: bold;">:interpreter</span> (<span style="font-style: italic;">"scala"</span> . scala-mode))
</pre>
</div>
</div>
</li>

<li><a id="org267cc85"></a>SCSS<br />
<div class="outline-text-5" id="text-org267cc85">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package scss-mode
  <span style="font-weight: bold;">:mode</span> <span style="font-style: italic;">"\\.scss\\'"</span>)
</pre>
</div>
</div>
</li>

<li><a id="orgf8c1399"></a>Shell<br />
<div class="outline-text-5" id="text-orgf8c1399">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package sh-script
  <span style="font-weight: bold;">:ensure</span> nil
  <span style="font-weight: bold;">:commands</span> shell-command
  <span style="font-weight: bold;">:mode</span> ((<span style="font-style: italic;">"\\.*shellrc$"</span> . sh-mode)
         (<span style="font-style: italic;">"\\.*shell_profile"</span> . sh-mode)
         (<span style="font-style: italic;">"\\.zsh\\'"</span> . sh-mode)))
</pre>
</div>
</div>
</li>

<li><a id="org091fbcf"></a>texinfo<br />
<div class="outline-text-5" id="text-org091fbcf">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package texinfo
  <span style="font-weight: bold;">:ensure</span> nil
  <span style="font-weight: bold;">:mode</span> (<span style="font-style: italic;">"\\.texi\\'"</span> . texinfo-mode))
</pre>
</div>
</div>
</li>

<li><a id="org736f846"></a>TypeScript<br />
<div class="outline-text-5" id="text-org736f846">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package typescript-mode
  <span style="font-weight: bold;">:mode</span> <span style="font-style: italic;">"\\.ts\\'"</span>)
</pre>
</div>
</div>

<ul class="org-ul">
<li><a id="org3f35ee6"></a>tide<br />
<div class="outline-text-6" id="text-org3f35ee6">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package tide
  <span style="font-weight: bold;">:disabled</span>
  <span style="font-weight: bold;">:hook</span> ((typescript-mode . tide-setup)
         (typescript-mode . tide-hl-identifier-mode)))
</pre>
</div>
</div>
</li>
</ul>
</li>

<li><a id="orgca0d339"></a>Web<br />
<div class="outline-text-5" id="text-orgca0d339">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package web-mode
  <span style="font-weight: bold;">:mode</span> ((<span style="font-style: italic;">"\\.erb\\'"</span> . web-mode)
         (<span style="font-style: italic;">"\\.mustache\\'"</span> . web-mode)
         (<span style="font-style: italic;">"\\.html?\\'"</span> . web-mode)
         (<span style="font-style: italic;">"\\.php\\'"</span> . web-mode)
         (<span style="font-style: italic;">"\\.jsp\\'"</span> . web-mode)
         <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">("\\.jsx?$" . web-mode)</span>
         (<span style="font-style: italic;">"\\.es6\\'"</span> . web-mode)
         (<span style="font-style: italic;">"\\.ejs\\'"</span> . web-mode)
         (<span style="font-style: italic;">"\\.phtml\\'"</span> . web-mode)
         (<span style="font-style: italic;">"\\.tpl\\.php\\'"</span> . web-mode)
         (<span style="font-style: italic;">"\\.[agj]sp\\'"</span> . web-mode)
         (<span style="font-style: italic;">"\\.as[cp]x\\'"</span> . web-mode)
         (<span style="font-style: italic;">"\\.djhtml\\'"</span> . web-mode)))
</pre>
</div>
</div>
</li>

<li><a id="org95b3fb6"></a>YAML<br />
<div class="outline-text-5" id="text-org95b3fb6">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package yaml-mode
  <span style="font-weight: bold;">:mode</span> <span style="font-style: italic;">"\\.ya?ml\\'"</span>)
</pre>
</div>
</div>
</li>
</ul>
</div>

<div id="outline-container-orgf0eb719" class="outline-4">
<h4 id="orgf0eb719">Custom</h4>
<div class="outline-text-4" id="text-orgf0eb719">
<p>
These are all available in <a href="./site-lisp">./site-lisp</a>. Eventually they should go into separate
repositories.
</p>
</div>

<ul class="org-ul">
<li><a id="org615ebef"></a>dired-column<br /></li>
<li><a id="orgdefb2cb"></a>em-dired<br /></li>
<li><a id="org63a8592"></a>installer<br /></li>
<li><a id="org9a80385"></a>macho-mode<br /></li>
<li><a id="org28d6779"></a>nethack<br />
<div class="outline-text-5" id="text-org28d6779">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package nethack
  <span style="font-weight: bold;">:commands</span> nethack
  <span style="font-weight: bold;">:ensure</span> nil)
</pre>
</div>
</div>
</li>

<li><a id="org99875c3"></a>nix-fontify<br /></li>
<li><a id="org9947f81"></a>set-defaults<br /></li>
<li><a id="org65c6435"></a>use-package-list<br /></li>
</ul>
</div>
<div id="outline-container-orgadd480f" class="outline-4">
<h4 id="orgadd480f">Other</h4>
<div class="outline-text-4" id="text-orgadd480f">
<p>
These should correspond to minor modes or helper functions. Some of them are
more helpful than others but none are <i>essential</i>.
</p>

<p>
Most of these are available in MELPA.
</p>
</div>

<ul class="org-ul">
<li><a id="org8e199aa"></a>browse-at-remote<br />
<div class="outline-text-5" id="text-org8e199aa">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package browse-at-remote
  <span style="font-weight: bold;">:bind</span> (<span style="font-style: italic;">"C-c g g"</span> . browse-at-remote))
</pre>
</div>
</div>
</li>
<li><a id="org5267550"></a>buffer-move<br />
<div class="outline-text-5" id="text-org5267550">
<p>
<a href="https://github.com/lukhas/buffer-move">GitHub</a>
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package buffer-move
  <span style="font-weight: bold;">:bind</span>
  ((<span style="font-style: italic;">"&lt;M-S-up&gt;"</span> . buf-move-up)
   (<span style="font-style: italic;">"&lt;M-S-down&gt;"</span> . buf-move-down)
   (<span style="font-style: italic;">"&lt;M-S-left&gt;"</span> . buf-move-left)
   (<span style="font-style: italic;">"&lt;M-S-right&gt;"</span> . buf-move-right)))
</pre>
</div>
</div>
</li>

<li><a id="org712e0a7"></a>copy-as-format<br />
<div class="outline-text-5" id="text-org712e0a7">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package copy-as-format
  <span style="font-weight: bold;">:bind</span> ((<span style="font-style: italic;">"C-c w s"</span> . copy-as-format-slack)
         (<span style="font-style: italic;">"C-c w g"</span> . copy-as-format-github)))
</pre>
</div>
</div>
</li>

<li><a id="orge12f092"></a>crux<br />
<div class="outline-text-5" id="text-orge12f092">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package crux
  <span style="font-weight: bold;">:bind</span> ((<span style="font-style: italic;">"C-c D"</span> . crux-delete-file-and-buffer)
         (<span style="font-style: italic;">"C-c C-e"</span> . crux-eval-and-replace)
         (<span style="font-style: italic;">"C-c d"</span> . crux-duplicate-current-line-or-region)
         ([shift return] . crux-smart-open-line)))
</pre>
</div>
</div>
</li>

<li><a id="org34eea20"></a>delight<br />
<div class="outline-text-5" id="text-org34eea20">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package delight)
</pre>
</div>
</div>
</li>
<li><a id="org7db175e"></a>dumb-jump<br />
<div class="outline-text-5" id="text-org7db175e">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package dumb-jump
  <span style="font-weight: bold;">:if</span> (&gt;= emacs-major-version 25)
  <span style="font-weight: bold;">:hook</span> ((prog-mode . dumb-jump-mode)))
</pre>
</div>
</div>
</li>
<li><a id="orge4c2895"></a>git-attr<br />
<div class="outline-text-5" id="text-orge4c2895">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package git-attr-linguist
  <span style="font-weight: bold;">:ensure</span> git-attr
  <span style="font-weight: bold;">:hook</span> ((find-file . git-attr-linguist)))
</pre>
</div>
</div>
</li>
<li><a id="org3fcdf2d"></a>htmlize<br />
<div class="outline-text-5" id="text-org3fcdf2d">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package htmlize <span style="font-weight: bold;">:no-require</span>)
</pre>
</div>
</div>
</li>

<li><a id="org904f7a7"></a>page-break-lines<br />
<div class="outline-text-5" id="text-org904f7a7">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package page-break-lines
  <span style="font-weight: bold;">:delight</span>
  <span style="font-weight: bold;">:hook</span> ((doc-mode
          emacs-lisp-mode
          compilation-mode
          outline-mode
          prog-mode
          haskell-mode
          help-mode
          magit-mode) <span style="font-weight: bold;">. page-break-lines-mode))</span>
</pre>
</div>
</div>
</li>

<li><a id="org6860e5e"></a>pandoc-mode<br />
<div class="outline-text-5" id="text-org6860e5e">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package pandoc-mode
  <span style="font-weight: bold;">:hook</span> ((markdown-mode . pandoc-mode)
         (pandoc-mode . pandoc-load-default-settings)))
</pre>
</div>
</div>
</li>

<li><a id="orga35202d"></a>rainbow-delimiters<br />
<div class="outline-text-5" id="text-orga35202d">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package rainbow-delimiters
  <span style="font-weight: bold;">:hook</span> ((emacs-lisp-mode
          inferior-emacs-lisp-mode
          ielm-mode
          lisp-mode
          inferior-lisp-mode
          lisp-interaction-mode
          slime-repl-mode) <span style="font-weight: bold;">. rainbow-delimiters-mode))</span>
</pre>
</div>
</div>
</li>

<li><a id="org9d495e9"></a>rainbow-mode<br />
<div class="outline-text-5" id="text-org9d495e9">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package rainbow-mode
  <span style="font-weight: bold;">:hook</span> ((emacs-lisp-mode
          inferior-emacs-lisp-mode
          ielm-mode
          lisp-mode
          inferior-lisp-mode
          lisp-interaction-mode
          slime-repl-mode
          web-mode
          less-css-mode
          html-mode
          css-mode) <span style="font-weight: bold;">. rainbow-mode))</span>
</pre>
</div>
</div>
</li>

<li><a id="orgc04d408"></a>shrink-whitespace<br />
<div class="outline-text-5" id="text-orgc04d408">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package shrink-whitespace
  <span style="font-weight: bold;">:bind</span> (<span style="font-style: italic;">"H-SPC"</span> . shrink-whitespace))
</pre>
</div>
</div>
</li>

<li><a id="org55e6731"></a>string-inflection<br />
<div class="outline-text-5" id="text-org55e6731">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package string-inflection
  <span style="font-weight: bold;">:bind</span> ((<span style="font-style: italic;">"C-c r r"</span> . string-inflection-all-cycle)
         (<span style="font-style: italic;">"C-c r c"</span> . string-inflection-camelcase)
         (<span style="font-style: italic;">"C-c r l"</span> . string-inflection-lower-camelcase)
         (<span style="font-style: italic;">"C-c r u"</span> . string-inflection-underscore)
         (<span style="font-style: italic;">"C-c r k"</span> . string-inflection-kebab-case)
         (<span style="font-style: italic;">"C-c r J"</span> . string-inflection-java-style-cycle)))
</pre>
</div>
</div>
</li>

<li><a id="org7c1a368"></a>volatile-highlights<br />
<div class="outline-text-5" id="text-org7c1a368">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package volatile-highlights
  <span style="font-weight: bold;">:commands</span> volatile-highlights-mode
  <span style="font-weight: bold;">:config</span> (volatile-highlights-mode t)
  <span style="font-weight: bold;">:delight</span>
  <span style="font-weight: bold;">:demand</span>)
</pre>
</div>
</div>
</li>
<li><a id="orgc5995ca"></a>with-editor<br />
<div class="outline-text-5" id="text-orgc5995ca">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package with-editor
  <span style="font-weight: bold;">:disabled</span>
  <span style="font-weight: bold;">:hook</span>
  ((shell-mode eshell-mode) . with-editor-export-editor))
</pre>
</div>
</div>
</li>
<li><a id="org0fcea1c"></a>comment-tags<br />
<div class="outline-text-5" id="text-org0fcea1c">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package comment-tags
  <span style="font-weight: bold;">:hook</span> (prog-mode . comment-tags-mode))
</pre>
</div>
</div>
</li>
<li><a id="orgd3469cd"></a>unfill<br />
<div class="outline-text-5" id="text-orgd3469cd">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package unfill
  <span style="font-weight: bold;">:bind</span> ([remap fill-paragraph] . unfill-toggle))
</pre>
</div>
</div>
</li>
<li><a id="org1e65c40"></a>deadgrep<br />
<div class="outline-text-5" id="text-org1e65c40">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">(use-package ripgrep :commands ripgrep-regexp)</span>
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">(use-package rg :commands rg-dwim)</span>
(use-package deadgrep
  <span style="font-weight: bold;">:commands</span> deadgrep
  <span style="font-weight: bold;">:bind</span> (<span style="font-weight: bold;">:map</span> projectile-command-map
         (<span style="font-style: italic;">"s g"</span> . deadgrep)))
</pre>
</div>
</div>
</li>
<li><a id="orgad1f86e"></a>org-static-blog<br />
<div class="outline-text-5" id="text-orgad1f86e">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package org-static-blog <span style="font-weight: bold;">:commands</span> org-static-blog-publish)
</pre>
</div>
</div>
</li>
<li><a id="org03247fb"></a>pcomplette<br />
<div class="outline-text-5" id="text-org03247fb">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package pcomplete
  <span style="font-weight: bold;">:ensure</span> nil
  <span style="font-weight: bold;">:commands</span> pcomplete-here
  <span style="font-weight: bold;">:preface</span>
  (autoload 'pcomplete-comint-setup <span style="font-style: italic;">"pcomplete"</span>)
  <span style="font-weight: bold;">:hook</span> ((shell-mode . (<span style="font-weight: bold;">lambda</span> () (pcomplete-comint-setup 'shell-dynamic-complete-functions)))
         (term-mode . (<span style="font-weight: bold;">lambda</span> () (pcomplete-comint-setup 'term-dynamic-complete-functions)))
         (comint-mode . (<span style="font-weight: bold;">lambda</span> () (pcomplete-comint-setup 'comint-dynamic-complete-functions)))
         (eshell-mode . (<span style="font-weight: bold;">lambda</span> () (add-hook 'completion-at-point-functions
                                        'pcomplete-completions-at-point
                                        nil t)))))
(use-package pcmpl-args)
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">(use-package pcmpl-git)</span>
</pre>
</div>
</div>
</li>
<li><a id="org2254c98"></a>mwim<br />
<div class="outline-text-5" id="text-org2254c98">
<p>
<a href="https://github.com/alezost/mwim.el">GitHub</a>
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package mwim
  <span style="font-weight: bold;">:bind</span> (([remap move-beginning-of-line]
          . mwim-beginning-of-code-or-line)
         ([remap move-end-of-line]
          . mwim-end-of-code-or-line)))
</pre>
</div>
</div>
</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-orgbd3dbfa" class="outline-2">
<h2 id="profiles"><a id="orgbd3dbfa"></a>Profiles</h2>
<div class="outline-text-2" id="text-profiles">
<p>
All of these files live outside of Emacs but are necessary for a usable
developer environment. They are basic shell profile and some git configuration
scripts as well.
</p>
</div>

<div id="outline-container-org08b856b" class="outline-3">
<h3 id="org08b856b"><code>.profile</code></h3>
<div class="outline-text-3" id="text-org08b856b">
<p>
To use this, you must create a short ~/.profile file. Here is an example,
</p>

<div class="org-src-container">
<pre class="src src-shell"><span style="font-weight: bold; font-style: italic;">bootstrap</span>=$<span style="font-weight: bold; font-style: italic;">HOME</span>/.nix-profile/etc/profile
[ -f $<span style="font-weight: bold; font-style: italic;">bootstrap</span> ] &amp;&amp; <span style="font-weight: bold;">source</span> $<span style="font-weight: bold; font-style: italic;">bootstrap</span>
</pre>
</div>

<p>
Run fortune,
</p>

<div class="org-src-container">
<pre class="src src-shell"><span style="font-weight: bold;">if</span> [ -z <span style="font-style: italic;">"$FORTUNE"</span> ] &amp;&amp; [ -x <span style="font-style: italic;">"@fortune@/bin/fortune"</span> ]; <span style="font-weight: bold;">then</span>
  @fortune@/bin/fortune
  <span style="font-weight: bold;">export</span> <span style="font-weight: bold; font-style: italic;">FORTUNE</span>=1
<span style="font-weight: bold;">fi</span>
</pre>
</div>

<p>
Here we setup <code>.profile</code>. First, setup exports.
</p>

<div class="org-src-container">
<pre class="src src-shell"><span style="font-weight: bold;">export</span> <span style="font-weight: bold; font-style: italic;">LANG</span>=en_US.UTF-8 <span style="font-style: italic;">\</span>
       <span style="font-weight: bold; font-style: italic;">LC_ALL</span>=en_US.UTF-8 <span style="font-style: italic;">\</span>
       <span style="font-weight: bold; font-style: italic;">PATH</span>=$<span style="font-weight: bold; font-style: italic;">PREFIX</span>/bin:$<span style="font-weight: bold; font-style: italic;">HOME</span>/.nix-profile/bin:@PATH@
       <span style="font-weight: bold; font-style: italic;">INFOPATH</span>=$<span style="font-weight: bold; font-style: italic;">HOME</span>/.nix-profile/share/info:@INFOPATH@ <span style="font-style: italic;">\</span>
       <span style="font-weight: bold; font-style: italic;">MANPATH</span>=$<span style="font-weight: bold; font-style: italic;">HOME</span>/.nix-profile/share/man:@MANPATH@ <span style="font-style: italic;">\</span>
       <span style="font-weight: bold; font-style: italic;">XDG_DATA_DIRS</span>=$<span style="font-weight: bold; font-style: italic;">HOME</span>/.nix-profile/share:@XDG_DATA_DIRS@ <span style="font-style: italic;">\</span>
       <span style="font-weight: bold; font-style: italic;">CVS_RSH</span>=ssh <span style="font-style: italic;">\</span>
       <span style="font-weight: bold; font-style: italic;">HISTFILE</span>=$<span style="font-weight: bold; font-style: italic;">HOME</span>/.history <span style="font-style: italic;">\</span>
       <span style="font-weight: bold; font-style: italic;">SAVEHIST</span>=10000 <span style="font-style: italic;">\</span>
       <span style="font-weight: bold; font-style: italic;">HISTSIZE</span>=10000 <span style="font-style: italic;">\</span>
       <span style="font-weight: bold; font-style: italic;">EDITOR</span>=emacs
</pre>
</div>

<p>
Then setup aliases.
</p>

<div class="org-src-container">
<pre class="src src-shell"><span style="font-weight: bold;">alias</span> <span style="font-weight: bold; font-style: italic;">ls</span>=<span style="font-style: italic;">"TERM=ansi ls --color=always"</span> <span style="font-style: italic;">\</span>
      <span style="font-weight: bold; font-style: italic;">l</span>=<span style="font-style: italic;">"ls -lF"</span> <span style="font-style: italic;">\</span>
      ..=<span style="font-style: italic;">"cd .."</span> <span style="font-style: italic;">\</span>
      ...=<span style="font-style: italic;">"cd ../.."</span> <span style="font-style: italic;">\</span>
      ....=<span style="font-style: italic;">"cd ../../.."</span> <span style="font-style: italic;">\</span>
      .....=<span style="font-style: italic;">"cd ../../../.."</span> <span style="font-style: italic;">\</span>
      <span style="font-weight: bold; font-style: italic;">tree</span>=<span style="font-style: italic;">'tree -Csuh'</span> <span style="font-style: italic;">\</span>
      <span style="font-weight: bold; font-style: italic;">grep</span>=<span style="font-style: italic;">"grep --color=auto"</span>
</pre>
</div>

<p>
Configure INSIDE_EMACS.
</p>

<div class="org-src-container">
<pre class="src src-shell"><span style="font-weight: bold;">if</span> [ <span style="font-style: italic;">"$TERM"</span> = dumb ] &amp;&amp; ! [ -z <span style="font-style: italic;">"$INSIDE_EMACS"</span> ]; <span style="font-weight: bold;">then</span>
    <span style="font-weight: bold;">export</span> <span style="font-weight: bold; font-style: italic;">TERM</span>=dumb-emacs-ansi <span style="font-style: italic;">\</span>
           <span style="font-weight: bold; font-style: italic;">COLORTERM</span>=1
<span style="font-weight: bold;">fi</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgbcf3111" class="outline-3">
<h3 id="zshrc"><a id="orgbcf3111"></a><code>.zshrc</code></h3>
<div class="outline-text-3" id="text-zshrc">
<p>
This is a profile for use with <a href="http://www.zsh.org">Zsh</a>. It is closely based off of <a href="https://github.com/robbyrussell/oh-my-zsh">oh-my-zsh</a>.
</p>

<p>
Setup ZSH profile. First, we just source the global profile.
</p>

<div class="org-src-container">
<pre class="src src-shell"><span style="font-weight: bold;">source</span> @out@/etc/profile
</pre>
</div>

<p>
Handle dumb options.
</p>

<div class="org-src-container">
<pre class="src src-shell"><span style="font-weight: bold;">case</span> <span style="font-style: italic;">"$TERM"</span><span style="font-weight: bold;"> in</span>
    dumb)
        <span style="font-weight: bold;">unsetopt</span> zle <span style="font-style: italic;">\</span>
                 prompt_cr <span style="font-style: italic;">\</span>
                 prompt_subst
        <span style="font-weight: bold; font-style: italic;">PS1</span>=<span style="font-style: italic;">'$ '</span>
        <span style="font-weight: bold; font-style: italic;">PROMPT</span>=<span style="font-style: italic;">'$ '</span>
        <span style="font-weight: bold;">return</span>
        ;;
    eterm*)
        <span style="font-weight: bold;">setopt</span> nopromptsp <span style="font-style: italic;">\</span>
               single_line_zle
        ;;
<span style="font-weight: bold;">esac</span>
</pre>
</div>

<p>
Load up site-functions in ZSH.
</p>

<div class="org-src-container">
<pre class="src src-shell"><span style="font-weight: bold; font-style: italic;">fpath</span>+=@completions@/share/zsh/site-functions
</pre>
</div>

<p>
Turn on ZSH-specific options.
</p>

<div class="org-src-container">
<pre class="src src-shell"><span style="font-weight: bold;">setopt</span> always_to_end <span style="font-style: italic;">\</span>
       append_history <span style="font-style: italic;">\</span>
       auto_cd <span style="font-style: italic;">\</span>
       auto_menu <span style="font-style: italic;">\</span>
       auto_name_dirs <span style="font-style: italic;">\</span>
       auto_pushd <span style="font-style: italic;">\</span>
       cdablevarS <span style="font-style: italic;">\</span>
       extended_glob <span style="font-style: italic;">\</span>
       hist_expire_dups_first <span style="font-style: italic;">\</span>
       hist_find_no_dups <span style="font-style: italic;">\</span>
       hist_ignore_dups <span style="font-style: italic;">\</span>
       hist_ignore_space <span style="font-style: italic;">\</span>
       hist_reduce_blanks <span style="font-style: italic;">\</span>
       hist_verify <span style="font-style: italic;">\</span>
       interactive_comments <span style="font-style: italic;">\</span>
       long_list_jobs <span style="font-style: italic;">\</span>
       multios <span style="font-style: italic;">\</span>
       no_beep <span style="font-style: italic;">\</span>
       prompt_subst <span style="font-style: italic;">\</span>
       pushd_ignore_dups <span style="font-style: italic;">\</span>
       pushdminus <span style="font-style: italic;">\</span>
       transient_rprompt <span style="font-style: italic;">\</span>
       menu_complete
</pre>
</div>

<p>
Setup completions &amp; colors.
</p>

<div class="org-src-container">
<pre class="src src-shell"><span style="font-weight: bold;">autoload</span> -U colors &amp;&amp; colors
<span style="font-weight: bold;">autoload</span> -U compinit &amp;&amp; compinit
</pre>
</div>

<p>
Bind to emacs&#x2026;
</p>

<div class="org-src-container">
<pre class="src src-shell"><span style="font-weight: bold;">bindkey</span> -e
</pre>
</div>

<p>
Zstyle completions.
</p>

<div class="org-src-container">
<pre class="src src-shell">zstyle <span style="font-style: italic;">':completion:*::::'</span> completer <span style="font-style: italic;">\</span>
       _expand _complete _ignored _approximate
zstyle <span style="font-style: italic;">':completion:*'</span> menu <span style="font-weight: bold; font-style: italic;">select</span>=1 <span style="font-style: italic;">\</span>
       _complete _ignored _approximate
zstyle <span style="font-style: italic;">':completion:*'</span> matcher-list <span style="font-style: italic;">\</span>
       <span style="font-style: italic;">'m:{a-zA-Z-_}={A-Za-z_-}'</span> <span style="font-style: italic;">\</span>
       <span style="font-style: italic;">'r:|=*'</span> <span style="font-style: italic;">'l:|=* r:|=*'</span>
zstyle <span style="font-style: italic;">':completion:*'</span> list-colors <span style="font-style: italic;">''</span>
zstyle <span style="font-style: italic;">':completion:*'</span> select-prompt <span style="font-style: italic;">\</span>
       <span style="font-style: italic;">'%SScrolling active: current selection at %p%s'</span>
zstyle <span style="font-style: italic;">':completion:*'</span> <span style="font-style: italic;">\</span>
       ignored-patterns <span style="font-style: italic;">'*~'</span> <span style="font-style: italic;">'_*'</span> <span style="font-style: italic;">'*\\\#*\\\#'</span>
zstyle <span style="font-style: italic;">':completion:*:scp:*'</span> group-order files <span style="font-style: italic;">\</span>
       all-files users hosts-domain <span style="font-style: italic;">\</span>
       hosts-host hosts-ipaddr
zstyle <span style="font-style: italic;">':completion:*:ssh:*'</span> group-order hosts-domain <span style="font-style: italic;">\</span>
       hosts-host users hosts-ipaddr
zstyle <span style="font-style: italic;">':vcs_info:*'</span> enable git
zstyle <span style="font-style: italic;">'*'</span> single-ignored show
</pre>
</div>

<p>
Turn on prompt with colors.
</p>

<div class="org-src-container">
<pre class="src src-shell"><span style="font-weight: bold; font-style: italic;">PROMPT</span>=<span style="font-style: italic;">'%F{blue}%n@%m:%F{cyan}%c%F{yellow} $ %F{reset}'</span>
</pre>
</div>

<p>
Setup Apple Terminal so that CWD is shown.
</p>

<div class="org-src-container">
<pre class="src src-shell"><span style="font-weight: bold;">update_terminal_cwd</span> () {
    printf <span style="font-style: italic;">'\e]7;%s\a'</span> <span style="font-style: italic;">"file://$HOSTNAME${PWD// /%20}"</span>
}

<span style="font-weight: bold;">if</span> [ <span style="font-style: italic;">"$TERM_PROGRAM"</span> = Apple_Terminal ] <span style="font-style: italic;">\</span>
   &amp;&amp; [ -z <span style="font-style: italic;">"$INSIDE_EMACS"</span> ]; <span style="font-weight: bold;">then</span>
    <span style="font-weight: bold;">autoload</span> add-zsh-hook
    add-zsh-hook chpwd update_terminal_cwd
    update_terminal_cwd
<span style="font-weight: bold;">fi</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgf4d0b03" class="outline-3">
<h3 id="orgf4d0b03"><code>etc-profile.sh</code></h3>
<div class="outline-text-3" id="text-orgf4d0b03">
<p>
This just sources everything in the <code>/etc/profile.d</code> dir. <code>PREFIX</code> can be
used to reference the Nix output dir.
</p>

<div class="org-src-container">
<pre class="src src-shell"><span style="font-weight: bold;">export</span> <span style="font-weight: bold; font-style: italic;">PREFIX</span>=@out@
</pre>
</div>

<p>
This will source everything in <code>/etc/profile.d</code>.
</p>

<div class="org-src-container">
<pre class="src src-shell"><span style="font-weight: bold;">for</span> i<span style="font-weight: bold;"> in</span> @out@/etc/profile.d/*.sh $<span style="font-weight: bold; font-style: italic;">HOME</span>/.nix-profile/etc/profile.d/*.sh; <span style="font-weight: bold;">do</span>
  <span style="font-weight: bold;">if</span> [ -r $<span style="font-weight: bold; font-style: italic;">i</span> ]; <span style="font-weight: bold;">then</span>
    <span style="font-weight: bold;">source</span> $<span style="font-weight: bold; font-style: italic;">i</span>
  <span style="font-weight: bold;">fi</span>
<span style="font-weight: bold;">done</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org768871d" class="outline-3">
<h3 id="org768871d"><code>.gitignore</code></h3>
<div class="outline-text-3" id="text-org768871d">
<p>
Some basic gitignore paths.
</p>

<div class="org-src-container">
<pre class="src src-gitignore">*~
\#*\#
*.DS_Store
</pre>
</div>
</div>
</div>
<div id="outline-container-org9d38f6b" class="outline-3">
<h3 id="org9d38f6b"><code>.gitconfig</code></h3>
<div class="outline-text-3" id="text-org9d38f6b">
<div class="org-src-container">
<pre class="src src-gitconfig">[core]
	editor = emacsclient
#       fsmonitor = @out@/etc/fsmonitor

[commit]
	gpgSign = true

[push]
	default = simple

[pull]
	rebase = true

[alias]
	amend = commit --amend

[help]
	autcorrect = 1

[color]
	ui = true
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-org2364c9a" class="outline-2">
<h2 id="bootstrap"><a id="org2364c9a"></a>Bootstrapping</h2>
<div class="outline-text-2" id="text-bootstrap">
</div>

<div id="outline-container-orge85670c" class="outline-3">
<h3 id="site-paths"><a id="orge85670c"></a><code>site-paths.el.in</code></h3>
<div class="outline-text-3" id="text-site-paths">
<p>
This file provides site-specific paths. However, it must be substituted in Nix
before we can actually run it in Emacs. To prevent Emacs from trying to run
this, I’ve set the syntax to <code>text</code>.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">require</span> '<span style="font-weight: bold; text-decoration: underline;">set-defaults</span>)
(<span style="font-weight: bold;">require</span> '<span style="font-weight: bold; text-decoration: underline;">subr-x</span>)
</pre>
</div>

<p>
<code>output-directory</code> points to the nix-profile directory created by Nix.
Ideally, this could point to a Nix store path, but the order of building
means that we don’t know this until too late.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">defvar</span> <span style="font-weight: bold; font-style: italic;">output-directory</span>
        (expand-file-name <span style="font-style: italic;">".nix-profile"</span> (getenv <span style="font-style: italic;">"HOME"</span>)))
(<span style="font-weight: bold;">defvar</span> <span style="font-weight: bold; font-style: italic;">zsh-command</span>
        (expand-file-name <span style="font-style: italic;">"bin/zsh"</span> output-directory))
</pre>
</div>

<p>
Setup <code>exec-path</code>.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">setq</span> exec-path
      (append `(<span style="font-style: italic;">"@bins@/bin"</span>
                ,(expand-file-name <span style="font-style: italic;">"bin"</span> output-directory)
                <span style="font-style: italic;">"@PATH@"</span>)
              exec-path))
</pre>
</div>

<p>
Setup <code>man-path</code>.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">defvar</span> <span style="font-weight: bold; font-style: italic;">man-path</span> `(<span style="font-style: italic;">"@manpages@/share/man"</span>
                   ,(expand-file-name <span style="font-style: italic;">"share/man"</span> output-directory)
                   <span style="font-style: italic;">"@MANPATH@"</span>))
</pre>
</div>

<p>
This will setup cacert-file var,
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">defcustom</span> <span style="font-weight: bold; font-style: italic;">cacert-file</span> <span style="font-style: italic;">"/etc/ssl/certs/ca-bundle.crt"</span>
  <span style="font-style: italic;">"Path for SSL certificates."</span>
  <span style="font-weight: bold;">:type</span> 'string
  <span style="font-weight: bold;">:group</span> 'environment)
</pre>
</div>

<p>
Set env vars provided by Nix,
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(append-envs <span style="font-style: italic;">":"</span>
 '(<span style="font-style: italic;">"NIX_PATH"</span>
     (<span style="font-style: italic;">"nixpkgs=/nix/var/nix/profiles/per-user/root/channels/nixpkgs"</span>
      <span style="font-style: italic;">"nixos=/nix/var/nix/profiles/per-user/root/channels/nixos"</span>))
 `(<span style="font-style: italic;">"PATH"</span> ,exec-path)
 `(<span style="font-style: italic;">"MANPATH"</span> ,man-path))
(set-envs
 `(<span style="font-style: italic;">"HISTFILE"</span> ,(expand-file-name <span style="font-style: italic;">".history"</span> (getenv <span style="font-style: italic;">"HOME"</span>)))
 `(<span style="font-style: italic;">"XDG_DATA_DIRS"</span> ,(string-join `(<span style="font-style: italic;">"@XDG_DATA_DIRS@"</span>
                                   ,(expand-file-name <span style="font-style: italic;">"share"</span>
                                                      output-directory))
                                 <span style="font-style: italic;">":"</span>))
 `(<span style="font-style: italic;">"INFOPATH"</span> ,(string-join `(<span style="font-style: italic;">"@INFOPATH@"</span>
                              ,(expand-file-name <span style="font-style: italic;">"share/info"</span>
                                                 output-directory))
                            <span style="font-style: italic;">":"</span>)))
</pre>
</div>

<p>
Set paths provided by Nix,
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">defvar</span> <span style="font-weight: bold; font-style: italic;">gnutls-program</span> <span style="font-style: italic;">"gnutls"</span>)
(<span style="font-weight: bold;">defvar</span> <span style="font-weight: bold; font-style: italic;">pdf2dsc-command</span> <span style="font-style: italic;">"pdf2dsc"</span>)
(<span style="font-weight: bold;">defvar</span> <span style="font-weight: bold; font-style: italic;">dvips-command</span> <span style="font-style: italic;">"dvips"</span>)
(<span style="font-weight: bold;">defvar</span> <span style="font-weight: bold; font-style: italic;">dvipng-command</span> <span style="font-style: italic;">"dvipng"</span>)
(<span style="font-weight: bold;">defvar</span> <span style="font-weight: bold; font-style: italic;">xetex-command</span> <span style="font-style: italic;">"xetex"</span>)
(<span style="font-weight: bold;">defvar</span> <span style="font-weight: bold; font-style: italic;">xelatex-command</span> <span style="font-style: italic;">"xelatex"</span>)
(<span style="font-weight: bold;">defvar</span> <span style="font-weight: bold; font-style: italic;">luatex-command</span> <span style="font-style: italic;">"luatex"</span>)
(<span style="font-weight: bold;">defvar</span> <span style="font-weight: bold; font-style: italic;">makeinfo-command</span> <span style="font-style: italic;">"makeinfo"</span>)
(<span style="font-weight: bold;">defvar</span> <span style="font-weight: bold; font-style: italic;">LaTeX-command</span> <span style="font-style: italic;">"LaTeX"</span>)
(<span style="font-weight: bold;">defvar</span> <span style="font-weight: bold; font-style: italic;">pdftex-command</span> <span style="font-style: italic;">"pdftex"</span>)
(<span style="font-weight: bold;">defvar</span> <span style="font-weight: bold; font-style: italic;">context-command</span> <span style="font-style: italic;">"context"</span>)
(<span style="font-weight: bold;">defvar</span> <span style="font-weight: bold; font-style: italic;">bibtex-command</span> <span style="font-style: italic;">"bibtex"</span>)
(<span style="font-weight: bold;">defvar</span> <span style="font-weight: bold; font-style: italic;">makeindex-command</span> <span style="font-style: italic;">"makeindex"</span>)
(<span style="font-weight: bold;">defvar</span> <span style="font-weight: bold; font-style: italic;">dvipdfmx-command</span> <span style="font-style: italic;">"dvipdfmx"</span>)
(<span style="font-weight: bold;">defvar</span> <span style="font-weight: bold; font-style: italic;">ag-executable</span> <span style="font-style: italic;">"ag"</span>)
(<span style="font-weight: bold;">defvar</span> <span style="font-weight: bold; font-style: italic;">ripgrep-executable</span> <span style="font-style: italic;">"ripgrep"</span>)
(<span style="font-weight: bold;">defvar</span> <span style="font-weight: bold; font-style: italic;">lacheck-command</span> <span style="font-style: italic;">"lacheck"</span>)
(<span style="font-weight: bold;">defvar</span> <span style="font-weight: bold; font-style: italic;">chktex-command</span> <span style="font-style: italic;">"chktex"</span>)
(<span style="font-weight: bold;">defvar</span> <span style="font-weight: bold; font-style: italic;">ps2pdf-command</span> <span style="font-style: italic;">"ps2pdf"</span>)

(set-paths
 '(company-cmake-executable <span style="font-style: italic;">"@cmake@/bin/cmake"</span>)
 '(doc-view-dvipdf-program <span style="font-style: italic;">"@ghostscript@/bin/dvipdf"</span>)
 '(cacert-file <span style="font-style: italic;">"@cacert@/etc/ssl/certs/ca-bundle.crt"</span>)
 '(calc-gnuplot-name <span style="font-style: italic;">"@gnuplot@/bin/gnuplot"</span>)
 '(gnuplot-program <span style="font-style: italic;">"@gnuplot@/bin/gnuplot"</span>)
 '(doc-view-ps2pdf-program <span style="font-style: italic;">"@ghostscript@/bin/ps2pdf"</span>)
 '(dired-touch-program <span style="font-style: italic;">"@coreutils@/bin/touch"</span>)
 '(dired-chmod-program <span style="font-style: italic;">"@coreutils@/bin/chmod"</span>)
 '(dired-chown-program <span style="font-style: italic;">"@coreutils@/bin/chown"</span>)
 '(dired-free-space-program <span style="font-style: italic;">"@coreutils@/bin/df"</span>)
 '(diff-command <span style="font-style: italic;">"@diffutils@/bin/diff"</span>)
 '(find-program <span style="font-style: italic;">"@findutils@/bin/find"</span>)
 '(epg-gpg-program <span style="font-style: italic;">"@gpg@/bin/gpg"</span>)
 '(epg-gpgconf-program <span style="font-style: italic;">"@gpg@/bin/gpgconf"</span>)
 '(epg-gpgsm-program <span style="font-style: italic;">"@gpg@/bin/gpgsm"</span>)
 '(flycheck-sh-bash-executable <span style="font-style: italic;">"@bash@/bin/bash"</span>)
 '(flycheck-sh-zsh-executable <span style="font-style: italic;">"@zsh@/bin/zsh"</span>)
 '(flycheck-perl-executable <span style="font-style: italic;">"@perl@/bin/perl"</span>)
 <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">'(flycheck-go-golint-executable "@golint@/bin/golint")</span>
 '(flycheck-haskell-hlint-executable <span style="font-style: italic;">"@hlint@/bin/hlint"</span>)
 '(flycheck-python-flake8-executable <span style="font-style: italic;">"@flake8@/bin/flake8"</span>)
 '(flycheck-asciidoc-executable <span style="font-style: italic;">"@asciidoc@/bin/asciidoc"</span>)
 '(flycheck-less-executable <span style="font-style: italic;">"@lessc@/bin/lessc"</span>)
 '(flycheck-c/c++-gcc-executable <span style="font-style: italic;">"@gcc@/bin/gcc"</span>)
 '(flycheck-javascript-eslint-executable <span style="font-style: italic;">"@eslint@/bin/eslint"</span>)
 '(flycheck-javascript-jshint-executable <span style="font-style: italic;">"@jshint@/bin/jshint"</span>)
 <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">'(flycheck-go-build-executable "@go@/bin/go")</span>
 <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">'(flycheck-go-test-executable "@go@/bin/go")</span>
 '(flycheck-lua-executable <span style="font-style: italic;">"@lua@/bin/luac"</span>)
 '(flycheck-xml-xmllint-executable <span style="font-style: italic;">"@libxml2@/bin/xmllint"</span>)
 '(flycheck-html-tidy-executable <span style="font-style: italic;">"@tidy@/bin/tidy"</span>)
 '(fortune-dir <span style="font-style: italic;">"@fortune@/share/games/fortunes"</span>)
 '(fortune-program <span style="font-style: italic;">"@fortune@/bin/fortune"</span>)
 '(fortune-file <span style="font-style: italic;">"@fortune@/share/games/fortunes/debian"</span>)
 '(grep-program <span style="font-style: italic;">"@gnugrep@/bin/grep"</span>)
 '(haskell-check-command <span style="font-style: italic;">"@hlint@/bin/hlint"</span>)
 '(haskell-hoogle-command <span style="font-style: italic;">"@hoogle@/bin/hoogle"</span>)
 '(haskell-hasktags-path <span style="font-style: italic;">"@hasktags@/bin/hasktags"</span>)
 '(ispell-program-name <span style="font-style: italic;">"@aspell@/bin/aspell"</span>)
 '(ispell-grep-command <span style="font-style: italic;">"@gnugrep@/bin/grep"</span>)
 '(irony-cmake-executable <span style="font-style: italic;">"@cmake@/bin/cmake"</span>)
 '(jka-compr-info-compress-program <span style="font-style: italic;">"@ncompress@/bin/compress"</span>)
 '(jka-compr-info-uncompress-program <span style="font-style: italic;">"@ncompress@/bin/uncompress"</span>)
 <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">'(irony-server-install-prefix "@irony@")</span>
 '(jka-compr-dd-program <span style="font-style: italic;">"@coreutils@/bin/dd"</span>)
 '(magit-git-executable <span style="font-style: italic;">"@git@/bin/git"</span>)
 '(markdown-command <span style="font-style: italic;">"@markdown2@/bin/markdown2"</span>)
 '(manual-program <span style="font-style: italic;">"@man@/bin/man"</span>)
 '(man-awk-command <span style="font-style: italic;">"@gawk@/bin/awk"</span>)
 '(man-sed-command <span style="font-style: italic;">"@gnused@/bin/sed"</span>)
 '(man-untabify-command <span style="font-style: italic;">"@coreutils@/bin/pr"</span>)
 '(nethack-executable <span style="font-style: italic;">"@nethack@/bin/nethack"</span>)
 '(org-pandoc-command <span style="font-style: italic;">"@pandoc@/bin/pandoc"</span>)
 '(pandoc-binary <span style="font-style: italic;">"@pandoc@/bin/pandoc"</span>)
 '(remote-shell-program <span style="font-style: italic;">"@openssh@/bin/ssh"</span>)
 '(ripgrep-executable <span style="font-style: italic;">"@ripgrep@/bin/rg"</span>)
 '(rtags-path <span style="font-style: italic;">"@rtags@/bin"</span>)
 '(sql-ingres-program <span style="font-style: italic;">"@parallel@/bin/sql"</span>)
 '(sql-interbase-program <span style="font-style: italic;">"@unixODBC@/bin/isql"</span>)
 <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">'(sql-mysql-program "@mariadb@/bin/mysql")</span>
 '(sql-ms-program <span style="font-style: italic;">"@freetds@/bin/osql"</span>)
 '(sql-postgres-program <span style="font-style: italic;">"@freetds@/bin/osql"</span>)
 '(sql-sqlite-program <span style="font-style: italic;">"@sqliteInteractive@/bin/sqlite3"</span>)
 '(tramp-encoding-shell <span style="font-style: italic;">"@bash@/bin/sh"</span>)
 '(tex-shell <span style="font-style: italic;">"@bash@/bin/sh"</span>)
 '(xargs-program <span style="font-style: italic;">"@findutils@/bin/xargs"</span>)
 '(vc-git-program <span style="font-style: italic;">"@git@/bin/git"</span>)
 '(gnutls-program <span style="font-style: italic;">"@gnutls@/bin/gnutls-cli"</span>)
 '(pdf2dsc-command <span style="font-style: italic;">"@ghostscript@/bin/pdf2dsc"</span>)
 '(preview-gs-command <span style="font-style: italic;">"@texlive@/bin/rungs"</span>)
 '(TeX-command <span style="font-style: italic;">"@texlive@/bin/tex"</span>)
 '(LaTeX-command <span style="font-style: italic;">"@texlive@/bin/latex"</span>)
 '(latex-run-command <span style="font-style: italic;">"@texlive@/bin/latex"</span>)
 '(tex-run-command <span style="font-style: italic;">"@texlive@/bin/tex"</span>)
 '(luatex-command <span style="font-style: italic;">"@texlive@/bin/luatex"</span>)
 '(xetex-command <span style="font-style: italic;">"@texlive@/bin/xetex"</span>)
 '(xelatex-command <span style="font-style: italic;">"@texlive@/bin/xelatex"</span>)
 '(makeinfo-command <span style="font-style: italic;">"@texinfoInteractive@/bin/makeinfo"</span>)
 '(pdftex-command <span style="font-style: italic;">"@texlive@/bin/pdftex"</span>)
 '(context-command <span style="font-style: italic;">"@texlive@/bin/context"</span>)
 '(bibtex-command <span style="font-style: italic;">"@texlive@/bin/bibtex"</span>)
 '(dvipdfmx-command <span style="font-style: italic;">"@texlive@/bin/dvipdfmx"</span>)
 '(makeindex-command <span style="font-style: italic;">"@texlive@/bin/makeindex"</span>)
 '(chktex-command <span style="font-style: italic;">"@texlive@/bin/chktex"</span>)
 '(lacheck-command <span style="font-style: italic;">"@texlive@/bin/lacheck"</span>)
 '(dvipdfmx-command <span style="font-style: italic;">"@texlive@/bin/dvipdfmx"</span>)
 '(dvips-command <span style="font-style: italic;">"@texlive@/bin/dvips"</span>)
 '(dvipng-command <span style="font-style: italic;">"@texlive@/bin/dvipng"</span>)
 '(ps2pdf-command <span style="font-style: italic;">"@ghostscript@/bin/ps2pdf"</span>)
 '(locate-executable <span style="font-style: italic;">"@findutils@/bin/locate"</span>)
 '(ag-executable <span style="font-style: italic;">"@ag@/bin/ag"</span>)
 '(notmuch-command <span style="font-style: italic;">"@notmuch@/bin/notmuch"</span>)
 '(dumb-jump-rg-cmd <span style="font-style: italic;">"@ripgrep@/bin/rg"</span>)
 '(dumb-jump-ag-cmd <span style="font-style: italic;">"@ag@/bin/ag"</span>)
 '(gud-gdb-command-name <span style="font-style: italic;">"@gdb@/bin/gdb"</span>)
 '(coq-prog-name <span style="font-style: italic;">"@coq@/bin/coqtop"</span>)
 '(coq-dependency-analyzer <span style="font-style: italic;">"@coq@/bin/coqdep"</span>)
 '(coq-compiler <span style="font-style: italic;">"@coq@/bin/coqc"</span>)
 )
</pre>
</div>

<p>
Set some defaults that depend on the path variables below,
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(set-defaults
 '(imap-ssl-program `(,(concat gnutls-program <span style="font-style: italic;">" --tofu -p %p %s"</span>)))
 '(tls-program (concat gnutls-program <span style="font-style: italic;">" --tofu -p %p %h"</span>))
 '(preview-pdf2dsc-command
   (concat pdf2dsc-command <span style="font-style: italic;">" %s.pdf %m/preview.dsc"</span>))
 '(preview-dvips-command
   (concat dvips-command <span style="font-style: italic;">" -Pwww %d -o %m/preview.ps"</span>))
 '(preview-fast-dvips-command
   (concat dvips-command <span style="font-style: italic;">" -Pwww %d -o %m/preview.ps"</span>))
 '(preview-dvipng-command
   (concat dvipng-command
     <span style="font-style: italic;">" -picky -noghostscript %d -o \"%m/prev%%03d.png\""</span>))
 '(TeX-engine-alist
   `((xetex <span style="font-style: italic;">"XeTeX"</span>
      xetex-command
      xelatex-command
      xetex-command)
     (luatex <span style="font-style: italic;">"LuaTeX"</span> luatex-command
      ,(concat luatex-command <span style="font-style: italic;">" --jobname=%s"</span>)
      luatex-command)))
 '(TeX-command-list
   `((<span style="font-style: italic;">"TeX"</span>
      ,(concat <span style="font-style: italic;">"%(PDF)%(tex) %(file-line-error) "</span>
               <span style="font-style: italic;">"%(extraopts) %`%S%(PDFout)%(mode)%' %t"</span>)
      TeX-run-TeX nil
      (plain-tex-mode ams-tex-mode texinfo-mode)
      <span style="font-weight: bold;">:help</span> <span style="font-style: italic;">"Run plain TeX"</span>)
     (<span style="font-style: italic;">"LaTeX"</span> <span style="font-style: italic;">"%`%l%(mode)%' %t"</span> TeX-run-TeX nil
      (latex-mode doctex-mode)
      <span style="font-weight: bold;">:help</span> <span style="font-style: italic;">"Run LaTeX"</span>)
     (<span style="font-style: italic;">"Makeinfo"</span> ,(concat makeinfo-command
                          <span style="font-style: italic;">" %(extraopts) %t"</span>)
      TeX-run-compile nil
      (texinfo-mode)
      <span style="font-weight: bold;">:help</span> <span style="font-style: italic;">"Run Makeinfo with Info output"</span>)
     (<span style="font-style: italic;">"Makeinfo HTML"</span>
      ,(concat makeinfo-command
               <span style="font-style: italic;">" %(extraopts) --html %t"</span>)
      TeX-run-compile nil
      (texinfo-mode)
      <span style="font-weight: bold;">:help</span> <span style="font-style: italic;">"Run Makeinfo with HTML output"</span>)
     (<span style="font-style: italic;">"AmSTeX"</span>
      ,(concat pdftex-command
           <span style="font-style: italic;">" %(PDFout) %(extraopts) %`%S%(mode)%' %t"</span>)
      TeX-run-TeX nil
      (ams-tex-mode)
      <span style="font-weight: bold;">:help</span> <span style="font-style: italic;">"Run AMSTeX"</span>)
     (<span style="font-style: italic;">"ConTeXt"</span>
      ,(concat context-command
           <span style="font-style: italic;">" --once --texutil %(extraopts) %(execopts)%t"</span>)
      TeX-run-TeX nil
      (context-mode)
      <span style="font-weight: bold;">:help</span> <span style="font-style: italic;">"Run ConTeXt once"</span>)
     (<span style="font-style: italic;">"ConTeXt Full"</span>
      ,(concat context-command
               <span style="font-style: italic;">" %(extraopts) %(execopts)%t"</span>)
      TeX-run-TeX nil
      (context-mode)
      <span style="font-weight: bold;">:help</span> <span style="font-style: italic;">"Run ConTeXt until completion"</span>)
     (<span style="font-style: italic;">"BibTeX"</span> ,(concat bibtex-command <span style="font-style: italic;">" %s"</span>)
      TeX-run-BibTeX nil t <span style="font-weight: bold;">:help</span> <span style="font-style: italic;">"Run BibTeX"</span>)
     (<span style="font-style: italic;">"Biber"</span> <span style="font-style: italic;">"biber %s"</span> TeX-run-Biber nil t
              <span style="font-weight: bold;">:help</span> <span style="font-style: italic;">"Run Biber"</span>)
     (<span style="font-style: italic;">"View"</span> <span style="font-style: italic;">"%V"</span> TeX-run-discard-or-function t t
             <span style="font-weight: bold;">:help</span> <span style="font-style: italic;">"Run Viewer"</span>)
     (<span style="font-style: italic;">"Print"</span> <span style="font-style: italic;">"%p"</span> TeX-run-command t t
             <span style="font-weight: bold;">:help</span> <span style="font-style: italic;">"Print the file"</span>)
     (<span style="font-style: italic;">"Queue"</span> <span style="font-style: italic;">"%q"</span> TeX-run-background nil t
             <span style="font-weight: bold;">:help</span> <span style="font-style: italic;">"View the printer queue"</span>
             <span style="font-weight: bold;">:visible</span> TeX-queue-command)
     (<span style="font-style: italic;">"File"</span> ,(concat dvips-command <span style="font-style: italic;">" %d -o %f "</span>)
      TeX-run-dvips t t <span style="font-weight: bold;">:help</span> <span style="font-style: italic;">"Generate PostScript file"</span>)
     (<span style="font-style: italic;">"Dvips"</span> ,(concat dvips-command <span style="font-style: italic;">" %d -o %f "</span>)
      TeX-run-dvips nil t
      <span style="font-weight: bold;">:help</span> <span style="font-style: italic;">"Convert DVI file to PostScript"</span>)
     (<span style="font-style: italic;">"Dvipdfmx"</span> ,(concat dvipdfmx-command <span style="font-style: italic;">" %d"</span>)
      TeX-run-dvipdfmx nil t
      <span style="font-weight: bold;">:help</span> <span style="font-style: italic;">"Convert DVI file to PDF with dvipdfmx"</span>)
     (<span style="font-style: italic;">"Ps2pdf"</span> ,(concat ps2pdf-command <span style="font-style: italic;">" %f"</span>)
      TeX-run-ps2pdf nil t
      <span style="font-weight: bold;">:help</span> <span style="font-style: italic;">"Convert PostScript file to PDF"</span>)
     (<span style="font-style: italic;">"Index"</span> ,(concat makeindex-command <span style="font-style: italic;">" %s"</span>)
      TeX-run-index nil t
      <span style="font-weight: bold;">:help</span> <span style="font-style: italic;">"Run makeindex to create index file"</span>)
     (<span style="font-style: italic;">"upMendex"</span> <span style="font-style: italic;">"upmendex %s"</span>
      TeX-run-index t t
      <span style="font-weight: bold;">:help</span> <span style="font-style: italic;">"Run mendex to create index file"</span>)
     (<span style="font-style: italic;">"Xindy"</span> <span style="font-style: italic;">"xindy %s"</span>
      TeX-run-command nil t
      <span style="font-weight: bold;">:help</span> <span style="font-style: italic;">"Run xindy to create index file"</span>)
     (<span style="font-style: italic;">"Check"</span> ,(concat lacheck-command <span style="font-style: italic;">" %s"</span>)
      TeX-run-compile nil
      (latex-mode)
      <span style="font-weight: bold;">:help</span> <span style="font-style: italic;">"Check LaTeX file for correctness"</span>)
     (<span style="font-style: italic;">"ChkTeX"</span> ,(concat chktex-command <span style="font-style: italic;">" -v6 %s"</span>)
      TeX-run-compile nil
      (latex-mode)
      <span style="font-weight: bold;">:help</span> <span style="font-style: italic;">"Check LaTeX file for common mistakes"</span>)
     (<span style="font-style: italic;">"Spell"</span> <span style="font-style: italic;">"(TeX-ispell-document \"\")"</span>
      TeX-run-function nil t
      <span style="font-weight: bold;">:help</span> <span style="font-style: italic;">"Spell-check the document"</span>)
     (<span style="font-style: italic;">"Clean"</span> <span style="font-style: italic;">"TeX-clean"</span>
      TeX-run-function nil t
      <span style="font-weight: bold;">:help</span> <span style="font-style: italic;">"Delete generated intermediate files"</span>)
     (<span style="font-style: italic;">"Clean All"</span> <span style="font-style: italic;">"(TeX-clean t)"</span> TeX-run-function nil t
      <span style="font-weight: bold;">:help</span>
      <span style="font-style: italic;">"Delete generated intermediate and output files"</span>)
     (<span style="font-style: italic;">"Other"</span> <span style="font-style: italic;">""</span> TeX-run-command t t
      <span style="font-weight: bold;">:help</span> <span style="font-style: italic;">"Run an arbitrary command"</span>)))
 '(counsel-grep-base-command
   (concat ripgrep-executable
    <span style="font-style: italic;">" -i -M 120 --no-heading --line-number --color never '%s' %s"</span>))
 '(counsel-rg-base-command
   (concat ripgrep-executable
           <span style="font-style: italic;">" -i --no-heading --line-number %s ."</span>))
 '(counsel-ag-base-command
   (concat ag-executable <span style="font-style: italic;">" --nocolor --nogroup %s"</span>))
 '(org-preview-latex-process-alist
   `((dvipng
      <span style="font-weight: bold;">:programs</span> (<span style="font-style: italic;">"latex"</span> <span style="font-style: italic;">"dvipng"</span>)
          <span style="font-weight: bold;">:description</span> <span style="font-style: italic;">"dvi &gt; png"</span>
          <span style="font-weight: bold;">:message</span> <span style="font-style: italic;">""</span>
          <span style="font-weight: bold;">:image-input-type</span> <span style="font-style: italic;">"dvi"</span>
          <span style="font-weight: bold;">:image-output-type</span> <span style="font-style: italic;">"png"</span>
          <span style="font-weight: bold;">:image-size-adjust</span> (1.0 . 1.0)
          <span style="font-weight: bold;">:latex-compiler</span>
      (,(concat LaTeX-command
         <span style="font-style: italic;">" -interaction nonstopmode -output-directory %o %f"</span>))
          <span style="font-weight: bold;">:image-converter</span>
      (,(concat dvipng-command
         <span style="font-style: italic;">" -fg %F -bg %B -D %D -T tight -o %O %f"</span>)))))
 '(Info-directory-list '(<span style="font-style: italic;">"@infopages@/share/info"</span>))
 '(tramp-remote-path
   `(tramp-own-remote-path
         <span style="font-style: italic;">"/run/current-system/sw/bin"</span>
         tramp-default-remote-path
         <span style="font-style: italic;">"/bin"</span>
         <span style="font-style: italic;">"/usr/bin"</span>
         <span style="font-style: italic;">"/sbin"</span>
         <span style="font-style: italic;">"/usr/sbin"</span>
         <span style="font-style: italic;">"/usr/local/bin"</span>
         <span style="font-style: italic;">"/usr/local/sbin"</span>
         <span style="font-style: italic;">"/opt/bin"</span>
         <span style="font-style: italic;">"/opt/sbin"</span>
         ,(expand-file-name <span style="font-style: italic;">"bin"</span> output-directory)))
 '(woman-manpath man-path)
 '(Man-header-file-path
   `(<span style="font-style: italic;">"@sysheaders@/include"</span>
     <span style="font-style: italic;">"/usr/include"</span>
     <span style="font-style: italic;">"/usr/local/include"</span>))
 '(ffap-c-path
   '(<span style="font-style: italic;">"@sysheaders@/include"</span>
     <span style="font-style: italic;">"/usr/include"</span>
     <span style="font-style: italic;">"/usr/local/include"</span>))
 '(rng-schema-locating-files
   `(<span style="font-style: italic;">"schemas.xml"</span>
         <span style="font-style: italic;">"@schemas@"</span>
         ,(expand-file-name
            <span style="font-style: italic;">"schema/schemas.xml"</span> data-directory)))
 '(irony-additional-clang-options
   '(<span style="font-style: italic;">"-I@sysheaders@/include"</span>
         <span style="font-style: italic;">"-I@sysheaders@/include/c++/v1"</span>
         <span style="font-style: italic;">"-F@sysframeworks@/Library/Frameworks"</span>))
 )
</pre>
</div>
</div>
</div>

<div id="outline-container-org105630b" class="outline-3">
<h3 id="org105630b"><code>bootstrap.sh</code></h3>
<div class="outline-text-3" id="text-org105630b">
<p>
This is the bootstrap script that is mentioned above. We use it to install the
IDE. It ensures Nix is installed as well as that the Git repo is available &amp;
up-to-date.
</p>

<p>
First we install Nix if it isn’t already.
</p>

<div class="org-src-container">
<pre class="src src-shell"><span style="font-weight: bold;">if</span> ! command -v nix-env &gt;/dev/null 2&gt;&amp;1; <span style="font-weight: bold;">then</span>
    <span style="font-weight: bold; font-style: italic;">nix_installer</span>=$(mktemp)
    curl -s https://nixos.org/nix/install <span style="font-style: italic;">\</span>
      &gt; $<span style="font-weight: bold; font-style: italic;">nix_installer</span>
    sh $<span style="font-weight: bold; font-style: italic;">nix_installer</span>
<span style="font-weight: bold;">fi</span>
</pre>
</div>

<p>
If we are in a Git repo already, we’ll pull to get latest updates.
</p>

<div class="org-src-container">
<pre class="src src-shell"><span style="font-weight: bold;">if</span> [ -d .git ] &amp;&amp; command -v git &gt;/dev/null 2&gt;&amp;1; <span style="font-weight: bold;">then</span>
    git pull origin master || <span style="font-weight: bold;">true</span>
<span style="font-weight: bold;">fi</span>
</pre>
</div>

<p>
If we can’t find default.nix then we’ll clone from GitHub. This will be stored in
<code>~/.local/share/bauer</code>. 
</p>

<div class="org-src-container">
<pre class="src src-shell"><span style="font-weight: bold;">if</span> ! [ -f default.nix ] <span style="font-style: italic;">\</span>
   &amp;&amp; command -v git &gt;/dev/null 2&gt;&amp;1; <span style="font-weight: bold;">then</span>
    <span style="font-weight: bold; font-style: italic;">repo_dir</span>=$<span style="font-weight: bold; font-style: italic;">HOME</span>/.local/share/bauer
    mkdir -p $(dirname $<span style="font-weight: bold; font-style: italic;">repo_dir</span>)
    git clone https://github.com/matthewbauer/bauer <span style="font-style: italic;">\</span>
              $<span style="font-weight: bold; font-style: italic;">repo_dir</span>
    <span style="font-weight: bold;">cd</span> $<span style="font-weight: bold; font-style: italic;">repo_dir</span>
<span style="font-weight: bold;">fi</span>
</pre>
</div>

<p>
The last action is to install our new derivation.
</p>

<div class="org-src-container">
<pre class="src src-shell">nix-env -if .
</pre>
</div>

<p>
Install the profile.
</p>

<div class="org-src-container">
<pre class="src src-shell"><span style="font-weight: bold;">echo</span> <span style="font-style: italic;">"source $HOME/.nix-profile/etc/profile"</span> &gt;&gt; $<span style="font-weight: bold; font-style: italic;">HOME</span>/.profile

<span style="font-weight: bold;">echo</span> <span style="font-style: italic;">"To use bauer correctly, you must first source the profile."</span>
<span style="font-weight: bold;">echo</span>
<span style="font-weight: bold;">echo</span> <span style="font-style: italic;">"To do this, just run:"</span>
<span style="font-weight: bold;">echo</span> <span style="font-style: italic;">"  source $HOME/.nix-profile/etc/profile"</span>
<span style="font-weight: bold;">echo</span> <span style="font-style: italic;">"From you command line"</span>
<span style="font-weight: bold;">echo</span> <span style="font-style: italic;">"You can also run either emacs or zsh to launch the environment"</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org567c5a7" class="outline-3">
<h3 id="runemacs"><a id="org567c5a7"></a><code>runemacs.sh</code></h3>
<div class="outline-text-3" id="text-runemacs">
<p>
Cross-platform script to execute app.
</p>

<div class="org-src-container">
<pre class="src src-shell"><span style="font-weight: bold;">case</span> $(uname) <span style="font-weight: bold;">in</span>
    Darwin)
        open @emacs@/Applications/Emacs.app
    ;;
    *)
        @emacs@/bin/emacs
    ;;
<span style="font-weight: bold;">esac</span>
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-org1df5d0f" class="outline-2">
<h2 id="build"><a id="org1df5d0f"></a>Building</h2>
<div class="outline-text-2" id="text-build">
</div>

<div id="outline-container-orgd28b873" class="outline-3">
<h3 id="orgd28b873"><code>default.nix</code>: the tangler</h3>
<div class="outline-text-3" id="text-orgd28b873">
<p>
Here we being the building process. There are a couple of stages to this not
normally seen in configurations. The first part is the ‘default.nix’ which will
tangle the README.org file. This should be the only file that has to live
outside of this ORG document. This is meant to be very minimal so that once we
tangle README.org, we can get a working .nix file to import from using Nix’s
import from derivation.
</p>

<p>
The function header defines some arguments you can pass. It will use the latest
nixpkgs-unstable from nixos.org. If you want to change this, you can pass in
your own pkgs variable.
</p>

<p>
The small argument is a bit of a hack. Nix will only recognize args that have
been explicitly listed so we cannot rely on the ‘&#x2026;’ syntax to pick up random
args.
</p>

<div class="org-src-container">
<pre class="src src-nix"># -*- mode: nix; coding: utf-8; -*-
{ version ? "19.03"
, channel ? {
    "x86_64-darwin" = "nixpkgs-${version}-darwin";
  }.${builtins.currentSystem} or "nixos-${version}"
, nixpkgs-url ?
  "nixos.org/channels/${channel}/nixexprs.tar.xz"
, system ? builtins.currentSystem
, crossSystem ? null
, config ? {}
, overlays ? []
, pkgs ? import (builtins.fetchTarball nixpkgs-url) {
  inherit crossSystem system config overlays;
}
, small ? false
, ...
} @ args:
</pre>
</div>

<p>
Now let&rsquo;s tangle README.org&#x2026; This uses ORG’s babel functionality to generate a
.nix file. The .nix file is renamed to default.nix to replace this script.
</p>

<div class="org-src-container">
<pre class="src src-nix">let
inherit (pkgs) lib;
ensure = f: n: if builtins.pathExists f then f
	       else builtins.fetchurl
	       "https://matthewbauer.us/bauer/${n}";
in import (pkgs.runCommand "README" {
  buildInputs = with pkgs; [ emacs git ];
} (''
  install -D ${ensure ./README.org "README.org"} \
	  $out/README.org
  cd $out
'' + lib.optionalString (builtins.pathExists ./site-lisp) ''
  cp -r ${./site-lisp} site-lisp
'' + ''
  emacs --batch --quick \
	-l ob-tangle \
	--eval "(org-babel-tangle-file \"README.org\")"
  cp bauer.nix default.nix
'')) (args // { inherit ensure pkgs; })
</pre>
</div>
</div>
</div>

<div id="outline-container-orgc4af751" class="outline-3">
<h3 id="orgc4af751"><code>bauer.nix</code>: the build script</h3>
<div class="outline-text-3" id="text-orgc4af751">
<p>
Here we have the actual Nix file that will build our Emacs configuration. Again
we have some options that can be provided&#x2026;
</p>

<div class="org-src-container">
<pre class="src src-nix"># -*- mode: nix; coding: utf-8; -*-
{ system ? builtins.currentSystem
, crossSystem ? null
, config ? {}
, overlays ? []
, pkgs ? import &lt;nixpkgs&gt; { inherit crossSystem system config overlays; }
, ensure ? (f: n: f)
, small ? pkgs.config.bauer.small or true
, ... }: let
inherit (pkgs) stdenv lib runCommand buildEnv config writeText;
inherit (stdenv) hostPlatform;
big = !small;
allowUnfree = config.allowUnfree or false;
</pre>
</div>

<p>
By default, you will be building the &ldquo;small&rdquo; version which is about 500MB. The
normal version has a huge closure totalling in at over 5GB. This is extremely
useful for integrations with developer tools and manuals, but also inconvenient
when wanting to start running for the first time. If you want to enable the big
version, you can just do ‘config.bauer.small = false’ in your
~/.config/nixpkgs/config.nix file.
Alternatively, if you <i>want</i> the small version, just do
‘nixpkgs.config.bauer.small = true’.
</p>

<p>
Next we start defining some packages. R is one of the simpler ones right now,
so let&rsquo;s start with that.
</p>

<div class="org-src-container">
<pre class="src src-nix">rEnv = pkgs.rWrapper.override {
  packages = with pkgs.rPackages; [
    RCurl
  ];
};
</pre>
</div>

<p>
Here we define our package set. This will just give us access to all of the
Emacs packages defined in Nixpkgs.
</p>

<p>
We also define our Emacs version to use. Mitsuharo’s Emacs package is much
better for MacOS so we use that when we’re on Darwin systems. Otherwise, just
default to ‘emacs’ which should be the latest (Nixpkgs-unstable has version 26.1
currently).
</p>

<div class="org-src-container">
<pre class="src src-nix">customEmacsPackages = pkgs.emacsPackagesNgGen
  (if hostPlatform.isDarwin then pkgs.emacsMacport else pkgs.emacs);
</pre>
</div>

<p>
Next, we define aspell with the English language. This is used by Emacs
ispell.
</p>

<div class="org-src-container">
<pre class="src src-nix">myAspell = pkgs.aspellWithDicts (ps : with ps; [ en ]);
</pre>
</div>

<p>
Tex live provides some LaTeX commads for us.
</p>

<div class="org-src-container">
<pre class="src src-nix">myTex = pkgs.texlive.combine {
  inherit (pkgs.texlive) xetex setspace
    fontspec chktex enumitem xifthen
    ifmtarg filehook wrapfig inconsolata
    upquote minted lastpage collection-basic
    collection-binextra collection-context
    collection-fontsrecommended collection-fontutils
    collection-langenglish collection-latex
    collection-latexrecommended collection-luatex
    collection-metapost collection-texworks
    collection-xetex capt-of ulem hyperref titlesec;
};
</pre>
</div>
</div>

<div id="outline-container-org96aade8" class="outline-4">
<h4 id="org96aade8">Emacs configuration</h4>
<div class="outline-text-4" id="text-org96aade8">
<p>
Here, we start building up the site-paths.el file. This does a simple
substitution of all the attributes set.
</p>

<div class="org-src-container">
<pre class="src src-nix">  site-paths = runCommand "site-paths.el" (with pkgs; ({
    inherit (customEmacsPackages) emacs;
    inherit ripgrep ag # fortune # nethack
	    coreutils findutils openssh
	    bash zsh diffutils man gawk
	    gnugrep gnused cacert git

	    # Nix paths
	    manpages sysheaders sysframeworks
	    schemas bins infopages;

    inherit MANPATH PATH XDG_DATA_DIRS INFOPATH;
  } // (lib.optionalAttrs big {
    # random packages needed in site-paths
    gpg = gnupg1compat;
    aspell = myAspell;
    inherit ant perl perlcritic
      asciidoc lessc lua gcc
      pandoc clang cmake ghostscript
      sqliteInteractive freetds
      parallel unixODBC ncompress
      texinfoInteractive notmuch gnuplot
      gdb coq rtags # mariadb go golint
      gnutls
      ;
    inherit (pythonPackages) flake8;
    inherit (nodePackages) jshint eslint;
    inherit (haskellPackages) hoogle hlint; # hasktags
    texlive = myTex;
    markdown2 = pythonPackages.markdown2;
    tidy = html-tidy;
    libxml2 = libxml2.bin;
    # stylish = haskellPackages.stylish-haskell;
    # intero = haskellPackages.intero-nix-shim;
    # irony = irony-server;
    # jdeeserver = jdee-server;
  }))) ''
    substituteAll ${./site-paths.el.in} $out
    substituteInPlace $out \
      --subst-var-by PATH ${PATH} \
      --subst-var-by INFOPATH ${INFOPATH} \
      --subst-var-by MANPATH ${MANPATH} \
      --subst-var-by XDG_DATA_DIRS ${XDG_DATA_DIRS}
'';
</pre>
</div>

<p>
Emacs building can be divided into phases. Each phase will run through the Elisp
once.
</p>
</div>

<ul class="org-ul">
<li><a id="org9a5d9c6"></a>Phase 1: picking up dependencies<br />
<div class="outline-text-5" id="text-org9a5d9c6">
<p>
myEmacsPackages gets a listing of all of the packages that are needed by the
Emacs configuration. use-package-list generates this list automatically.
</p>

<div class="org-src-container">
<pre class="src src-nix">package-list =
  runCommand "package-list" {
    buildInputs = [ customEmacsPackages.emacs ];
  } ''
</pre>
</div>

<div class="org-src-container">
<pre class="src src-nix">emacs --batch --quick \
      -L ${customEmacsPackages.use-package
	  }/share/emacs/site-lisp/elpa/use-package-* \
      -L ${customEmacsPackages.delight
	  }/share/emacs/site-lisp/elpa/delight-* \
      -L ${customEmacsPackages.bind-key
	  }/share/emacs/site-lisp/elpa/bind-key-* \
      -l ${ensure ./site-lisp/set-defaults.el
		   "site-lisp/set-defaults.el"} \
      -l ${ensure ./site-lisp/bauer.el
		   "site-lisp/bauer.el"} \
      -l ${ensure ./site-lisp/use-package-list.el
		   "site-lisp/use-package-list.el"} \
      --eval "(use-package-list \"${./README.el}\")" \
      &gt; $out
</pre>
</div>

<div class="org-src-container">
<pre class="src src-nix">'';
</pre>
</div>

<div class="org-src-container">
<pre class="src src-nix">myEmacsPackages = builtins.fromJSON
		   (builtins.readFile package-list);
</pre>
</div>
</div>
</li>

<li><a id="org41439e0"></a>Phase 2: byte compiling<br />
<div class="outline-text-5" id="text-org41439e0">
<div class="org-src-container">
<pre class="src src-nix">default = runCommand "bauer-emacs" {
  buildInputs = [ pkgs.emacs ];
} ''
</pre>
</div>

<p>
Install our lisp files. Many of these should be released into MELPA but don’t
have the time to do it currently.
</p>

<div class="org-src-container">
<pre class="src src-nix">install -D ${site-paths} \
	$out/share/emacs/site-lisp/site-paths.el
install -D ${./README.el} \
	$out/share/emacs/site-lisp/default.el
install -D ${ensure ./site-lisp/em-dired.el
		     "site-lisp/em-dired.el"} \
	$out/share/emacs/site-lisp/em-dired.el
install -D ${ensure ./site-lisp/dired-column.el
		     "site-lisp/dired-column.el"} \
	$out/share/emacs/site-lisp/dired-column.el
install -D ${ensure ./site-lisp/macho-mode.el
		     "site-lisp/macho-mode.el"} \
	$out/share/emacs/site-lisp/macho-mode.el
install -D ${ensure ./site-lisp/nethack.el
		     "site-lisp/nethack.el"} \
	$out/share/emacs/site-lisp/nethack.el
install -D ${ensure ./site-lisp/set-defaults.el
		     "site-lisp/set-defaults.el"} \
	$out/share/emacs/site-lisp/set-defaults.el
install -D ${ensure ./site-lisp/installer.el
		     "site-lisp/installer.el"} \
	$out/share/emacs/site-lisp/installer.el
install -D ${ensure ./site-lisp/restart-emacs.el
		     "site-lisp/restart-emacs.el"} \
	$out/share/emacs/site-lisp/restart-emacs.el
install -D ${ensure ./site-lisp/use-package-list.el
		     "site-lisp/use-package-list.el"} \
	$out/share/emacs/site-lisp/use-package-list.el
install -D ${ensure ./site-lisp/bauer.el
		    "site-lisp/bauer.el"} \
	$out/share/emacs/site-lisp/bauer.el
install -D ${ensure ./site-lisp/dante.el
		    "site-lisp/dante.el"} \
	$out/share/emacs/site-lisp/dante.el
</pre>
</div>

<p>
This is fairly complicated. What happens is we batch compile all of the .el
files. The problem is the .el files all are going to depend on dependencies
that we have just found in package-list. The solution is that complex eval
below where we add all of the paths (plus their requisites) to the load
path. This works but is hacky &amp; I am interested in fixing it.
</p>

<div class="org-src-container">
<pre class="src src-nix">cd $out/share/emacs/site-lisp
export HOME=$PWD
emacs --batch --quick \
      --eval \
"(let ((default-directory \"${emacsWrapper
  ((requiredPackages customEmacsPackages myEmacsPackages)
   ++ (with customEmacsPackages; [use-package delight]))
}/share/emacs/site-lisp\"))
  (normal-top-level-add-subdirs-to-load-path))" \
      -L . -f batch-byte-compile *.el
</pre>
</div>

<div class="org-src-container">
<pre class="src src-nix">'';
</pre>
</div>
</div>
</li>

<li><a id="org4d89054"></a>Phase 3: wrapping into Emacs<br />
<div class="outline-text-5" id="text-org4d89054">
<div class="org-src-container">
<pre class="src src-nix">emacsWrapper = explicitRequires:
 runCommand "emacs-packages-deps"
 { nativeBuildInputs = [ pkgs.xorg.lndir pkgs.emacs ];
   inherit explicitRequires; } ''
findInputsOld() {
    local pkg="$1"; shift
    local var="$1"; shift
    local propagatedBuildInputsFiles=("$@")
    local varSlice="$var[*]"
    case "''${!varSlice-}" in
	*" $pkg "*) return 0 ;;
    esac
    unset -v varSlice
    eval "$var"'+=("$pkg")'
    if ! [ -e "$pkg" ]; then
	echo "build input $pkg does not exist" &gt;&amp;2
	exit 1
    fi
    local file
    for file in "''${propagatedBuildInputsFiles[@]}"; do
	file="$pkg/nix-support/$file"
	[[ -f "$file" ]] || continue
	local pkgNext
	for pkgNext in $(&lt; "$file"); do
	    findInputsOld "$pkgNext" "$var" \
			  "''${propagatedBuildInputsFiles[@]}"
	done
    done
}
mkdir -p $out/bin
mkdir -p $out/share/emacs/site-lisp
local requires
for pkg in $explicitRequires; do
  findInputsOld $pkg requires propagated-user-env-packages
done
linkPath() {
  local pkg=$1
  local origin_path=$2
  local dest_path=$3
  if [[ -d "$pkg/$origin_path" ]]; then
    lndir -silent "$pkg/$origin_path" \
			     "$out/$dest_path"
  fi
}
linkEmacsPackage() {
  linkPath "$1" "bin" "bin"
  linkPath "$1" "share/emacs/site-lisp" \
		"share/emacs/site-lisp"
}
for pkg in "''${requires[@]}"; do
  linkEmacsPackage $pkg
done
emacs --batch -f batch-byte-compile \
	      "$siteStart"
'';
</pre>
</div>

<p>
requiredPackages is a function that takes two arguments.
</p>

<div class="org-src-container">
<pre class="src src-nix">requiredPackages = epkgs: map (x:
  if builtins.hasAttr x epkgs
    then builtins.getAttr x epkgs
  else if builtins.hasAttr x pkgs.emacsPackages
    then builtins.getAttr x pkgs.emacsPackages
  else abort "no attribute found for use-package ${x}");
</pre>
</div>

<p>
Now we build our Emacs distribution.
</p>

<p>
TODO use dump-emacs here to speed up config.
</p>

<div class="org-src-container">
<pre class="src src-nix">myEmacs = customEmacsPackages.emacsWithPackages (epkgs:
  (requiredPackages epkgs myEmacsPackages)
  ++ [default epkgs.use-package]
);
</pre>
</div>
</div>
</li>
</ul>
</div>

<div id="outline-container-org7352c18" class="outline-4">
<h4 id="org7352c18">The environment</h4>
<div class="outline-text-4" id="text-org7352c18">
<p>
Finally, we can actually build the environment.
</p>

<p>
First build the info pages&#x2026;
</p>

<div class="org-src-container">
<pre class="src src-nix">infopages = buildEnv {
  name = "info-pages";
  buildInputs = [ pkgs.texinfoInteractive ];
  paths = userPackages ++ [customEmacsPackages.emacs];
  extraOutputsToInstall = [ "info" "doc" "devdoc" ];
  pathsToLink = [ "/share/info" ];
  postBuild = ''
    shopt -s nullglob
    for i in $out/share/info/*; do
      install-info $i $out/share/info/dir
    done
  '';
};
</pre>
</div>

<p>
Setup man pages&#x2026;
</p>

<div class="org-src-container">
<pre class="src src-nix">manpages = buildEnv {
  name = "man-pages";
  ignoreCollisions = (!(config.bauer.small or false));
  paths = userPackages ++ [pkgs.posix_man_pages
			   # pkgs.llvmPackages.clang-manpages
			   # pkgs.llvmPackages.llvm-manpages
			   ]
    ++ lib.optional (hostPlatform.isDarwin &amp;&amp; big &amp;&amp; allowUnfree)
		     "${apple_sdk}/usr"
    ++ lib.optional hostPlatform.isLinux pkgs.man-pages;
  extraOutputsToInstall = [ "man" "doc" "devdoc" "devman" ];
  pathsToLink = [ "/share/man" ];
};
</pre>
</div>

<p>
Setup XDG data directory..
</p>

<div class="org-src-container">
<pre class="src src-nix">xdg-data = buildEnv {
  name = "xdg-data-dirs";
  buildInputs = [ pkgs.desktop-file-utils pkgs.shared-mime-info ];
  paths = userPackages ++ [ customEmacsPackages.emacs pkgs.zsh ];
  pathsToLink = [
    "/share/applications"
    "/share/mime"
    "/share/menus"
    "/share/icons"
  ];
  postBuild = ''
    export XDG_DATA_DIRS=$out/share

    if [ -w $out/share/applications ]; then
      update-desktop-database $out/share/applications
    fi

    if [ -w $out/share/mime ] \
       &amp;&amp; [ -w $out/share/mime/packages ]; then
      update-mime-database -V $out/share/mime
    fi
  '';
};
</pre>
</div>

<p>
ZSH completions&#x2026;
</p>

<div class="org-src-container">
<pre class="src src-nix">zsh-completions = buildEnv {
  name = "zsh-completions";
  paths = userPackages;
  pathsToLink = [ "/share/zsh/site-functions" ];
};
</pre>
</div>

<p>
Setup binaries
</p>

<div class="org-src-container">
<pre class="src src-nix">bins = buildEnv {
  name = "bins";
  paths = userPackages;
  extraOutputsToInstall = [ "bin" ];
  pathsToLink = [ "/bin" ];
  postBuild = ''
    find $out/bin -maxdepth 1 -name ".*" -type l -delete
  '';
};
</pre>
</div>

<p>
Setup system headers&#x2026;
</p>

<div class="org-src-container">
<pre class="src src-nix">sysheaders = buildEnv {
  name = "headers";
  paths = [ pkgs.libcxx ]
    ++ lib.optional (hostPlatform.isDarwin &amp;&amp; big &amp;&amp; allowUnfree)
		    "${apple_sdk}/usr";
};
</pre>
</div>

<p>
Setup some Apple frameworks.
</p>

<div class="org-src-container">
<pre class="src src-nix">apple_sdk = "${pkgs.darwin.xcode}/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX.sdk";
sysframeworks = buildEnv {
  name = "frameworks";
  paths = lib.optionals (hostPlatform.isDarwin &amp;&amp; big &amp;&amp; allowUnfree)
	  [ "${apple_sdk}/System/Library/Frameworks"
	    "${apple_sdk}/System/Library/PrivateFrameworks" ];
};
</pre>
</div>

<p>
Setup schemas&#x2026;
</p>

<div class="org-src-container">
<pre class="src src-nix">schemas = writeText "schemas.xml" ''
&lt;locatingRules
    xmlns="http://thaiopensource.com/ns/locating-rules/1.0"
&gt;
  &lt;documentElement localName="section" typeId="DocBook"/&gt;
  &lt;documentElement localName="chapter" typeId="DocBook"/&gt;
  &lt;documentElement localName="article" typeId="DocBook"/&gt;
  &lt;documentElement localName="book" typeId="DocBook"/&gt;
  &lt;typeId id="DocBook"
	  uri="${pkgs.docbook5}/xml/rng/docbook/docbookxi.rnc"
  /&gt;
&lt;/locatingRules&gt;
'';
</pre>
</div>

<p>
Full list of packages that will be made available.
</p>

<div class="org-src-container">
<pre class="src src-nix">userPackages = (with pkgs; [
  # From common-path.nix
  coreutils findutils diffutils gnused gnugrep gawk gnutar
  gzip bzip2 gnumake bash patch xz

  # Helpful core tools
  curl zsh cacert file lsof pstree which rsync
  unzip man openssh less calc ag ripgrep # sqlite
  tree # cvs # gnuplot # subversion # gnupg # watchman
  # (pkgs.git.override { withManual = true; })

  # Nix tools
  nix-zsh-completions # nix # nix-index
] ++ lib.optionals big ([
  myAspell

  # Useful tools
  isync notmuch graphviz indent
  graphviz imagemagick

  bazaar mercurial

  # Programming interpreters/compilers
  myTex rEnv perl python lua coq ocaml
  openjdk nodejs gcc gdb

  travis v8

  # Disabled
  # gcal ocrad mailutils dirmngr jwhois moe
] ++ (with netbsd; [ getent getconf ]) # games
  ++ (with nodePackages; [ tern heroku node2nix ])
  ++ (with gitAndTools; [ hub ])
  ++ (with haskellPackages; [ ghc jq nix-diff cabal2nix cabal-install ])
  ++ (with unixtools; [ utillinux nettools procps ])
));
</pre>
</div>

<p>
Setup global environment variables &amp; directories. Most of the global
directories will not exist, but the way search paths work, means that is okay.
We aim to support all directories in a common system, prioritizing ones that the
user has the most direct access to.
</p>

<div class="org-src-container">
<pre class="src src-nix">global-dirs = [ # "~/.nix-profile"
		# "~/.local"
		"/nix/var/nix/profiles/default"
		"/run/wrappers"
		"/run/current-system/sw"
		"/usr/local"
		"/usr"
		"" ];

PATH = lib.concatStringsSep ":" [
	 (lib.makeBinPath ([ bins customEmacsPackages.emacs pkgs.zsh ]
			   ++ global-dirs))
	 (lib.makeSearchPath "sbin" [ "/usr" "" ])
       ];
MANPATH = lib.makeSearchPathOutput "man" "share/man"
  ([ manpages customEmacsPackages.emacs pkgs.zsh ] ++ global-dirs);
INFOPATH = "${infopages}/share/info";
XDG_DATA_DIRS = lib.makeSearchPathOutput "xdg" "share"
  ([ xdg-data ] ++ global-dirs);
</pre>
</div>

<p>
The actual environment.
</p>

<div class="org-src-container">
<pre class="src src-nix">in buildEnv {
  name = "bauer";
  buildInputs = [ pkgs.makeWrapper pkgs.bash ];
  postBuild = ''
    mkdir -p $out/etc
    # substituteAll ${./gitconfig} $out/etc/gitconfig
    substituteAll ${./zshrc.sh} $out/etc/.zshrc
    substituteInPlace $out/etc/.zshrc \
      --subst-var-by completions ${zsh-completions}
    ln -s $out/etc/.zshrc $out/etc/zshrc
    makeWrapper ${pkgs.zsh}/bin/zsh $out/bin/zsh --set ZDOTDIR $out/etc
    substituteAll ${./etc-profile.sh} $out/etc/profile
    substitute ${./runemacs.sh} $out/bin/run \
      --subst-var-by emacs ${myEmacs}
    chmod +x $out/bin/run
    patchShebangs $out/bin/run
    ln -s $out/bin/run $out/bin/bauer
  '';
  pathsToLink = [
    "/bin"
    "/etc/profile.d"
  ] ++ lib.optional hostPlatform.isDarwin "/Applications";
  meta = with lib; {
    description = "Bauer's automated unified Emacs realm";
    maintainers = with maintainers; [ matthewbauer ];
    platforms = platforms.all;
  };
  passthru = with lib; {
    shellPath = "/bin/zsh";
    run = "/bin/run";
    sourceFile = "/etc/profile.d/profile";
    PATH = makeSearchPath "bin" [bins];
    MANPATH = makeSearchPath "share/man" [manpages];
    INFOPATH = makeSearchPath "share/info" [infopages];
    XDG_DATA_DIRS = makeSearchPath "share" [xdg-data];
  };
  paths = [
    myEmacs
    (runCommand "my-profile" {
      emacs = myEmacs;
      inherit (pkgs) cacert; # fortune
      inherit PATH MANPATH XDG_DATA_DIRS INFOPATH;
    } ''
      mkdir -p $out/etc/profile.d
      substituteAll ${./profile.sh} $out/etc/profile.d/my-profile.sh
      substituteInPlace $out/etc/profile.d/my-profile.sh \
	--subst-var-by PATH ${PATH} \
	--subst-var-by INFOPATH ${INFOPATH} \
	--subst-var-by MANPATH ${MANPATH} \
	--subst-var-by XDG_DATA_DIRS ${XDG_DATA_DIRS}
    '')
  ];
}
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orge44fb55" class="outline-3">
<h3 id="orge44fb55">Invoking it</h3>
<div class="outline-text-3" id="text-orge44fb55">
<p>
We can build it with <code>nix-build</code>.
</p>

<div class="org-src-container">
<pre class="src src-shell">nix-build
./result/bin/run
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-org11b2322" class="outline-2">
<h2 id="ci"><a id="org11b2322"></a>Continuous integration</h2>
<div class="outline-text-2" id="text-ci">
<a href="https://travis-ci.org/matthewbauer/bauer">
  <img src="https://travis-ci.org/matthewbauer/bauer.svg?branch=master" alt="travis status"></img>
</a>

<p>
We&rsquo;ll set up Travis support here. We start by configuring <code>.travis.yml</code>.
</p>
</div>

<div id="outline-container-orgb7727f6" class="outline-3">
<h3 id="travis"><a id="orgb7727f6"></a><code>.travis.yml</code></h3>
<div class="outline-text-3" id="text-travis">
<div class="org-src-container">
<pre class="src src-yaml">language: nix
</pre>
</div>

<p>
Next we&rsquo;ll set up nix-build &amp; pass the URL of Nixpkgs with the <code>NIXPKGS</code>.
</p>

<div class="org-src-container">
<pre class="src src-yaml">script:
  - nix-build -Q --argstr channel $CHANNEL
</pre>
</div>

<p>
Setup the OSs. Sadly no Windows support yet.
</p>

<div class="org-src-container">
<pre class="src src-yaml">git:
  depth: 1
</pre>
</div>

<p>
Setup some values for <code>NIXPKGS</code> variables.
</p>

<div class="org-src-container">
<pre class="src src-yaml">matrix:
  include:
    - os: linux
      dist: trusty
      env: CHANNEL=nixos-18.09
    - os: linux
      dist: trusty
      env: CHANNEL=nixos-19.03
    - os: linux
      dist: trusty
      env: CHANNEL=nixos-unstable
    - os: osx
      env: CHANNEL=nixpkgs-18.09-darwin
    - os: osx
      env: CHANNEL=nixpkgs-19.03-darwin
    - os: osx
      env: CHANNEL=nixpkgs-unstable
</pre>
</div>

<p>
Setup the cache.
</p>

<div class="org-src-container">
<pre class="src src-yaml">cache:
  directories:
    - /nix/store
</pre>
</div>

<p>
Turn off those annoying Travis notifications.
</p>

<div class="org-src-container">
<pre class="src src-yaml">notifications:
  email: false
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-org6d5a45d" class="outline-2">
<h2 id="extra"><a id="org6d5a45d"></a>Extra</h2>
<div class="outline-text-2" id="text-extra">
</div>

<div id="outline-container-org75b3202" class="outline-3">
<h3 id="org75b3202"><code>update.sh</code></h3>
<div class="outline-text-3" id="text-org75b3202">
<p>
This is a simple script that I use to make sure I&rsquo;ve updated the generated
files.
</p>

<div class="org-src-container">
<pre class="src src-shell">emacs --batch <span style="font-style: italic;">\</span>
      -l ob-tangle <span style="font-style: italic;">\</span>
      --eval <span style="font-style: italic;">"(org-babel-tangle-file \"README.org\")"</span>
emacs README.org --batch -f org-html-export-to-html
</pre>
</div>
</div>
</div>
<div id="outline-container-orgc6b44ef" class="outline-3">
<h3 id="orgc6b44ef"><code>.gitignore</code></h3>
<div class="outline-text-3" id="text-orgc6b44ef">
<p>
If you end up with generated files, they’re easy to remove with Git. Just run
<code>git clean -xdf</code> &amp; it will remove all of the files that match the .gitignore
rules (which should never be added to the git tree).
</p>

<p>
These set up some paths for <code>.gitignore</code> that we don’t want getting put in
the repo. Start with Emacs/org-mode/LaTeX stuff.
</p>

<div class="org-src-container">
<pre class="src src-gitignore">flycheck_*.el
*.elc
*.pdf
*.html
*.tex
*.log
*.aux
*.out
*.toc
</pre>
</div>

<p>
Nix-related stuff.
</p>

<div class="org-src-container">
<pre class="src src-gitignore"># nix stuff
result
result-*
</pre>
</div>

<p>
These are all tangled by <a href="./README.html">README.org</a>.
</p>

<div class="org-src-container">
<pre class="src src-gitignore">README.el
bauer.nix
zshrc.sh
etc-profile.sh
runemacs.sh
gitconfig
gitignore
default.el
profile.sh
site-paths.el.in
org-init.el
org-src-*
configuration.nix
install
auto/
</pre>
</div>
</div>
</div>

<div id="outline-container-org0ccfafa" class="outline-3">
<h3 id="org0ccfafa"><code>.gitattributes</code></h3>
<div class="outline-text-3" id="text-org0ccfafa">
<div class="org-src-container">
<pre class="src src-gitattributes">config.nix     linguist-generated=true
default.nix    linguist-generated=true
bootstrap.sh   linguist-generated=true
install        linguist-generated=true
update.sh      linguist-generated=true
.travis.yml    linguist-generated=true
.gitattributes linguist-generated=true
.gitignore     linguist-generated=true
module.nix     linguist-generated=true
</pre>
</div>
</div>
</div>
<div id="outline-container-org6b97e55" class="outline-3">
<h3 id="org6b97e55"><code>init.el</code></h3>
<div class="outline-text-3" id="text-org6b97e55">
<p>
You can use this as <a href="file:///Users/mbauer/.emacs.d/init.el">your Emacs init file</a>:
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(load
  (expand-file-name <span style="font-style: italic;">"settings.el"</span> user-emacs-directory) t)
(package-initialize)
(<span style="font-weight: bold;">defvar</span> <span style="font-weight: bold; font-style: italic;">bauer-dir</span>
        (expand-file-name <span style="font-style: italic;">".emacs.d"</span> (getenv <span style="font-style: italic;">"HOME"</span>)))
(<span style="font-weight: bold;">defvar</span> <span style="font-weight: bold; font-style: italic;">bauer-org</span>
        (expand-file-name <span style="font-style: italic;">"README.org"</span> bauer-dir))
(add-to-list 'load-path
             (expand-file-name <span style="font-style: italic;">"site-lisp"</span> bauer-dir))
(<span style="font-weight: bold;">unless</span> (file-exists-p
          (expand-file-name <span style="font-style: italic;">"README.el"</span> bauer-dir))
  (<span style="font-weight: bold;">let</span> ((default-directory bauer-dir))
    (autoload 'org-babel-tangle-file <span style="font-style: italic;">"ob-tangle"</span>)
    (org-babel-tangle-file bauer-org
                          <span style="font-style: italic;">"README.el"</span>
                          <span style="font-style: italic;">"emacs-lisp"</span>)))
(load (expand-file-name <span style="font-style: italic;">"README.el"</span> bauer-dir) t)
</pre>
</div>
</div>
</div>

<div id="outline-container-orgd6945cf" class="outline-3">
<h3 id="orgd6945cf">NixOS module</h3>
<div class="outline-text-3" id="text-orgd6945cf">
<p>
I’ve provided a module suitable for use with a NixOS configuration. To use it,
just add something like the following to your configuration.nix file.
</p>

<div class="org-src-container">
<pre class="src src-nix"># -*- mode: nix; coding: utf-8; -*-
{ ... }:
{
  imports = [
    (builtins.fetchurl "https://matthewbauer.us/bauer/module.nix")
  ];
  programs.bauer.enable = true;
}
</pre>
</div>

<p>
The actual module implementation follow here. It will pull in some files needed
for all of this to work. It should provide ‘bauer’ as a runnable command.
</p>

<div class="org-src-container">
<pre class="src src-nix"># -*- mode: nix; coding: utf-8; -*-
{ config, lib, pkgs, ... }: with lib;

let
  ensure = f: n: if builtins.pathExists f then f
		 else builtins.fetchurl
    "https://matthewbauer.us/bauer/${n}";
  bauer = import (ensure ./default.nix "default.nix") {
    inherit pkgs;
  };
in {
  options = {
    programs.bauer = {
      enable = mkOption {
	default = false;
	type = types.bool;
      };
    };
  };

  config = mkIf config.programs.bauer.enable {
    environment = {
      systemPackages = [ bauer ];
      variables = with lib; {
	PATH = [bauer.PATH];
	XDG_DATA_DIRS = [bauer.XDG_DATA_DIRS];
	MANPATH = [bauer.MANPATH];
	INFOPATH = [bauer.INFOPATH];
      };
    };
  };
}
</pre>
</div>
</div>
</div>
<div id="outline-container-org8c04f02" class="outline-3">
<h3 id="org8c04f02">LICENSE</h3>
<div class="outline-text-3" id="text-org8c04f02">
<p>
Copyright (C) 2018 Matthew Bauer
</p>

<p>
This program is free software: you can redistribute it and/or modify it under
the terms of the GNU General Public License as published by the Free Software
Foundation, either version 3 of the License, or (at your option) any later
version.
</p>

<p>
This program is distributed in the hope that it will be useful, but WITHOUT
ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE. See the GNU General Public License for more
details.
</p>

<p>
You should have received a copy of the GNU General Public License along with
this program. If not, see <a href="http://www.gnu.org/licenses/">http://www.gnu.org/licenses/</a>.
</p>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="author">Author: Matthew Bauer</p>
<p class="email">Email: <a href="mailto:mjbauer95@gmail.com">mjbauer95@gmail.com</a></p>
<p class="date">Created: 2019-02-27 Wed 22:02</p>
<p class="creator"><a href="https://www.gnu.org/software/emacs/">Emacs</a> 26.1 (<a href="https://orgmode.org">Org</a> mode 9.1.13)</p>
<p class="validation"><a href="http://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
